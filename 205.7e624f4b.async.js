(self.webpackChunklango_ui=self.webpackChunklango_ui||[]).push([[205],{70078:function(Fa,vi,oe){var Nn=oe(15009).default,Ee=oe(99289).default,Ae=oe(19632).default,re=oe(97857).default;(function(){window.dhPlayerControl=Object.assign({videoWS:null,wsConnectCount:0,wsSession:0,windowState:"wsPending",videoList:{},hwndList:{},callBackList:{},wsConnect:!1,loginFlag:"LOGIN_PENDING",connectPort:[8e3,8001,8002,8003,8004],curPortIndex:0},window.dhPlayerControl||{},{noCardPlayerFlag:!1,DHPlayerVersion:"",pkgDHPlayerVerion:[2311300922],pluginLoginInfo:{},isPIframe:!1,dhMessage:{701:{code:701,message:"\u5F53\u524D\u6B63\u5728\u5BF9\u8BB2\uFF0C\u65E0\u6CD5\u6253\u5F00\u97F3\u9891",i18nKey:"video.player.error701",type:"msg"},702:{code:702,message:"\u5F53\u524D\u8BBE\u5907\u6B63\u5728\u5BF9\u8BB2",i18nKey:"video.player.error702",type:"msg"},703:{code:703,message:"\u5F53\u524D\u5176\u4ED6\u8BBE\u5907\u6B63\u5728\u5BF9\u8BB2",i18nKey:"video.player.error703",type:"msg"},704:{code:704,message:"\u6293\u56FE\u9274\u6743",i18nKey:"video.player.error704",type:"option"},705:{code:705,message:"\u672C\u5730\u5F55\u50CF\u4E0B\u8F7D\u9274\u6743",i18nKey:"video.player.error705",type:"option"},706:{code:706,message:"\u4E3B/\u8F85\u7801\u6D41\u5207\u6362",i18nKey:"video.player.error706",type:"option"}}}),Function.prototype.myBind=function(s){var m=this,g=Array.prototype.slice.call(arguments,1);return"bind"in Function.prototype?m.bind(s,g):function(){m.apply(s,g)}},document.getElementsByClassName||(document.getElementsByClassName=function(f,s){for(var m=(s||document).getElementsByTagName("*"),g=[],_=0;_<m.length;_++)for(var R=m[_],S=R.className.split(" "),F=0;F<S.length;F++)if(S[F]==f){g.push(R);break}return g});function le(){if(window.dhPlayerControl.pkgDHPlayerVerion.includes(window.dhPlayerControl.DHPlayerVersion))return{isEqual:!0,code:0,i18nKey:"video.player.plugin.version.ok",message:"\u521B\u5EFA\u6210\u529F"};if(window.dhPlayerControl.pkgDHPlayerVerion[0]>window.dhPlayerControl.DHPlayerVersion)return{isEqual:!1,code:-1,i18nKey:"video.player.plugin.version.low.redownload",message:"\u5F53\u524D\u7535\u8111\u4E0A\u7684\u63D2\u4EF6\u7248\u672C\u8FC7\u4F4E,\u5EFA\u8BAE\u5347\u7EA7\u63D2\u4EF6!"};if(window.dhPlayerControl.pkgDHPlayerVerion[window.dhPlayerControl.pkgDHPlayerVerion.length-1]<window.dhPlayerControl.DHPlayerVersion)return{isEqual:!0,code:1,i18nKey:"video.player.plugin.version.high.redownload",message:"\u521B\u5EFA\u6210\u529F"}}function Ye(f,s){var m=function(R){if(R.channelId){var S=R.channelId.split("$1$0$");return!S&&(S=R.channelId.split("$")),S}else return[R.deviceCode,R.channelSeq]},g={real:{data:{channelId:f.channelId||"",streamType:Number(f.streamType)||1,dataType:Number(f.dataType)||1}},talk:{data:{audioBit:16,sampleRate:8e3,audioType:2,talkType:Bt(f.deviceType),deviceCode:m(f)[0],channelSeq:m(f)[1]}},stopTalk:{data:{deviceCode:m(f)[0],channelSeq:m(f)[1],talkType:Bt(f.deviceType),session:f.session}},playbackByTime:{clientType:"WINPC",clientMac:"30:9c:23:79:40:08",clientPushId:"",project:"PSDK",method:"SS.Playback.StartPlaybackByTime",data:{nvrId:"",optional:"/admin/API/SS/Playback/StartPlaybackByTime",recordType:"0",recordSource:f.recordSource,streamType:f.streamType||0,channelId:f.channelId,startTime:f.bBack===0&&f.currentPlayTime||f.startTime,endTime:f.bBack===0?f.endTime:f.currentPlayTime||f.endTime}},playbackByFile:{clientType:"WINPC",clientMac:"30:9c:23:79:40:08",clientPushId:"",project:"PSDK",method:"SS.Playback.StartPlaybackByFile",data:{ssId:"1001",optional:"/evo-apigw/admin/API/SS/Playback/StartPlaybackByFile",startTime:f.bBack===0?f.currentPlayTime:f.playStartTime,endTime:f.bBack===0?f.playEndTime:f.currentPlayTime,fileName:"{fe69f729-9d4b-42d4-b6a0-56189aaa4e1e}",diskId:"1540852944-1540853395",nvrId:"",recordSource:f.recordSource,channelId:f.channelId,playbackMode:"0",streamId:"5875"}},queryRecord:{clientType:"WINPC",clientMac:"30:9c:23:79:40:08",clientPushId:"",project:"PSDK",method:"SS.Record.QueryRecords",data:{cardNo:"",optional:"/admin/API/SS/Record/QueryRecords",diskPath:"",startIndex:"",streamType:f.streamType||0,recordType:"0",recordSource:f.recordSource,endIndex:"",startTime:f.startTime,endTime:f.endTime,channelId:f.channelId}}};return g[s].snum=f.snum,JSON.parse(JSON.stringify(g[s]))}function Bt(f){var s=[1,3,6,14,43];return s.includes(Number(f))?2:1}function ct(f){return f&&(window.getComputedStyle(f).display!="none"||window.getComputedStyle(f).visibility!="hidden")||!1}function N(f){var s=f.url,m="";return s.includes("|")?(s=s.split("|").map(function(g){return g.includes(window.location.hostname)?(m=g+(f.token?"?token="+f.token:""),null):g+(f.token?"?token="+f.token:"")}).filter(function(g){return g}).join("|"),s=m?m+"|"+s:s):s=s+(f.token?"?token="+f.token:""),s}function Dt(){var f=window.dhPlayerControl.isPIframe?this.setting.topInnerWidth:window.top.innerWidth,s=window.dhPlayerControl.isPIframe?this.setting.topInnerHeight:window.top.innerHeight;return{width:f,height:s}}function gi(){var f=window.osRatio||[1,1],s=window.screenX,m=window.screen.availLeft,g=0;if(m<=0)g=s>=-2&&s<=9?0:s,g=g*f[m===0?0:1];else{var _=s-m;_=_>=-2&&_<=9?0:_,g=m*f[0]+_*f[1]}return g}function sn(){var f=0,s=window.screen,m=navigator.userAgent.toLowerCase();return window.devicePixelRatio!==void 0?f=window.devicePixelRatio:~m.indexOf("msie")?s.deviceXDPI&&s.logicalXDPI&&(f=s.deviceXDPI/s.logicalXDPI):window.outerWidth!==void 0&&window.innerWidth!==void 0&&(f=window.outerWidth/window.innerWidth),f&&(f=Math.round(f*100)),f}function Wt(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(typeof WebSocket=="undefined"){this.setting.createError&&this.setting.createError({code:1005,data:null,success:!1,i18nKey:"browser.not.support.socket",message:"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301socket!"});return}window.dhPlayerControl.videoWS=new WebSocket("ws:127.0.0.1:".concat([window.dhPlayerControl.connectPort[f]])),window.dhPlayerControl.videoWS.onopen=function(){window.dhPlayerControl.manualCloseWS=!1,window.dhPlayerControl.windowState="wsSuccess",window.dhPlayerControl.curPortIndex=f,Ot.call(this);var s=An(),m=function(){var R=window.dhPlayerControl.videoList[g];if(R.send({method:"common.version",info:{}}),s.success)if(R.setting.usePluginLogin){R.loginServer(),window.dhPlayerControl.loginFlag="LOGIN_PENDING";var S=new Promise(function(F,J){var H=setInterval(function(){window.dhPlayerControl.loginFlag!=="LOGIN_PENDING"&&(clearInterval(H),F())},300)});S.then(function(){R.create(),window.isResetConnect=R.setting.isResetConnect})}else R.create(),window.isResetConnect=R.setting.isResetConnect;else R.setting.createError(s);return 1};for(var g in window.dhPlayerControl.videoList)if(m())break},window.dhPlayerControl.videoWS.onmessage=yi,window.dhPlayerControl.videoWS.onclose=function(){if(window.dhPlayerControl.windowState==="wsPending"||window.dhPlayerControl.windowState==="noPlugin"){if(f<window.dhPlayerControl.connectPort.length-1){window.dhPlayerControl.timer=setTimeout(function(){window.dhPlayerControl.videoWS=null,Wt(f+1),clearTimeout(window.dhPlayerControl.timer)},300);return}window.dhPlayerControl.windowState="noPlugin";for(var s in window.dhPlayerControl.videoList){var m=window.dhPlayerControl.videoList[s];m.setting.createError&&m.setting.createError({code:1001,data:null,i18nKey:"video.player.plugin.not.installed",message:"\u63D2\u4EF6\u672A\u5B89\u88C5",success:!1})}}else if(window.dhPlayerControl.windowState="wsError",window.isResetConnect&&!window.dhPlayerControl.manualCloseWS){console.log("----------\u65E0\u6CD5\u4E0E\u63D2\u4EF6\u5EFA\u7ACB\u8FDE\u63A5-------");for(var s in window.dhPlayerControl.videoList){var m=window.dhPlayerControl.videoList[s];m.setting.createError&&m.setting.createError({code:1003,data:null,i18nKey:"websocket.reload",message:"\u65E0\u6CD5\u4E0E\u64AD\u653E\u5668\u5EFA\u7ACB\u8FDE\u63A5\uFF0C\u6B63\u5728\u5C1D\u8BD5\u91CD\u8FDE...",success:!1})}setTimeout(function(){window.dhPlayerControl.videoWS=null,Wt(window.dhPlayerControl.curPortIndex)},3e3)}else for(var s in window.dhPlayerControl.videoList){var m=window.dhPlayerControl.videoList[s];m.setting.createError&&m.setting.createError({code:1003,data:null,i18nKey:"websocket.disconnect",message:"\u65E0\u6CD5\u4E0E\u64AD\u653E\u5668\u5EFA\u7ACB\u8FDE\u63A5",success:!1})}}}function Ot(){var f=this;clearInterval(window.wsHeart),window.wsHeart=setInterval(function(){f.send(JSON.stringify({method:"common.heartbeat",info:{},id:window.dhPlayerControl.wsConnectCount++}))},10*1e3)}function mi(f){for(var s="image/jpeg",m=atob(f),g=m.length,_=new Uint8Array(g);g--;)_[g]=m.charCodeAt(g);return new Blob([_],{type:s})}function zt(f,s){var m=mi(f),g=URL.createObjectURL(m);return g}function yi(f){if(!(f.data==null||f.data=="")){window.dhPlayerControl.wsSession=s&&s.session||window.dhPlayerControl.wsSession;var s=JSON.parse(f.data);if(s.method&&!["window.osRatio","video.window.clicked","video.window.dbclicked","video.division.change","video.customDivision.change","video.downloadFileSize","video.download.mp4.result","video.downloadByTime"].includes(s.method)&&localStorage.printLog&&console.log("client->web: ",s.method,s.info),s.method==="window.loginServer")switch(s.info.code){case 0:case 3:window.dhPlayerControl.loginFlag="LOGIN_PENDING";break;case 1:case 2:window.dhPlayerControl.loginFlag="LOGIN_SUCCESS";break;case 4:window.dhPlayerControl.loginFlag="LOGIN_ERROR";default:break}if(s.method==="window.loginServer.notify"&&(s.info.result===0?window.dhPlayerControl.loginFlag="LOGIN_SUCCESS":window.dhPlayerControl.loginFlag="LOGIN_ERROR"),s&&s.data&&s.data.ver&&(window.dhPlayerControl.DHPlayerVersion=Number(s.data.ver)),s.method==="window.osRatio"&&(window.osRatio=s.info.dpi),s.info&&typeof s.info.hwnd=="number"){var m=window.dhPlayerControl.videoList[window.dhPlayerControl.hwndList[s.info.hwnd]],g=m.setting;if(typeof s.info.snum=="number")var _=g.channelList.filter(function(x){return x.snum===s.info.snum})[0];switch(s.method){case"window.message":g.dhPlayerMessage&&g.dhPlayerMessage(_,window.dhPlayerControl.dhMessage[s.info.eventCode]);break;case"video.change.substream":if(_.byUrl)return g.dhPlayerMessage&&g.dhPlayerMessage(_,re(re({},window.dhPlayerControl.dhMessage[706]),{},{streamType:Number(s.info.substream)}));_.streamType=Number(s.info.substream),m.startReal([_],{isSubStream:!0});break;case"video.notifyrealmonitor":Number(s.info.result)===0&&g.realSuccess&&g.realSuccess(_,g.channelList),Number(s.info.result)===10704&&g.realError&&g.realError(_,{code:10704,message:"\u6253\u5F00\u89C6\u9891\u5931\u8D25",i18nKey:"video.player.play.fail"}),Number(s.info.result)===-405&&g.realError&&g.realError(_,{code:10705,message:"\u6253\u5F00\u89C6\u9891\u8D85\u65F6",i18nKey:"video.player.play.timeout"}),m.setWindowDragEnable();break;case"video.reopenvideo":if(_.byUrl)return g.realError(_,{code:204,message:"\u6D41\u5F02\u5E38\u65AD\u5F00\uFF0C\u8BF7\u91CD\u65B0\u8FDE\u63A5~",i18nKey:"video.player.stream.disconnect.reload"});s.info.count++,m.startReal([_],{isReOpen:!0,count:s.info.count++});break;case"video.notifyplayback":Number(s.info.result)===0&&g.playbackSuccess&&g.playbackSuccess(_,g.channelList),m.setWindowDragEnable();break;case"web.seekRecord":g.channelList.forEach(function(x,W){if(x.snum===s.info.snum){if(x.byUrl){g.switchStartTime&&g.switchStartTime({startTime:s.info.seekTime,snum:s.info.snum});return}if(s.info.seekTime<x.startTime){g.playbackError&&g.playbackError(_,{code:201,i18nKey:"play.record.error.201.tip1",message:"\u5F53\u524D\u65F6\u95F4\u4E0D\u5F97\u5C0F\u4E8E\u5F00\u59CB\u65F6\u95F4"});return}if(s.info.seekTime>x.endTime){g.playbackError&&g.playbackError(_,{code:201,i18nKey:"play.record.error.201.tip2",message:"\u5F53\u524D\u65F6\u95F4\u4E0D\u5F97\u5927\u4E8E\u7ED3\u675F\u65F6\u95F4"});return}var ae=x.records&&x.records.findIndex(function(ve){return Number(ve.startTime)<=s.info.seekTime&&Number(ve.endTime)>s.info.seekTime});ae>=0?(x.currentIndex=ae,console.log("\u5F53\u524D\u62D6\u62FD\u5230\u7B2C".concat(x.currentIndex,"\u5F55\u50CF")),x.currentPlayTime=s.info.seekTime,x.bBack=Number(s.info.bBack),m.closeVideo(s.info.snum).then(function(ve){m.startPlayback(x,{isConnect:!0,scaleSteps:Number(s.info.scaleSteps)})})):console.log("\u5F53\u524D\u4F4D\u7F6E\u65E0\u5F55\u50CF\uFF0C\u4E0D\u80FD\u62D6\u62FD")}});break;case"web.replay":g.channelList.forEach(function(x,W){if(x.snum===s.info.snum){if(x.byUrl){g.replay&&g.replay(s.info.snum,s.info.seekTime);return}if(x.bBack=Number(s.info.bBack),x.bBack){if(x.currentIndex===0){g.playbackFinish&&g.playbackFinish({snum:s.info.snum,channelId:s.info.channelId,code:201,i18nKey:"video.player.playback.complete",message:"\u5F55\u50CF\u5DF2\u5168\u90E8\u64AD\u653E\u5B8C\u6210"});return}x.currentIndex--,x.currentPlayTime=x.records[x.currentIndex].endTime}else{if(x.currentIndex===x.records.length-1){g.playbackFinish&&g.playbackFinish({snum:s.info.snum,channelId:s.info.channelId,code:201,i18nKey:"video.player.playback.complete",message:"\u5F55\u50CF\u5DF2\u5168\u90E8\u64AD\u653E\u5B8C\u6210"});return}x.currentIndex++,x.currentPlayTime=x.records[x.currentIndex].startTime}x.recordSource===2?m.closeVideo(s.info.snum).then(function(){m.startPlayback(x,{isConnect:!0,scaleSteps:Number(s.info.scaleSteps)})}):m.startPlayback(x,{isConnect:!0,bContinue:!0,scaleSteps:Number(s.info.scaleSteps)})}});break;case"video.close":var R=-1;g.channelList.forEach(function(x,W){x.snum===s.info.snum&&(x.closed?delete x.closed:R=W)}),R>=0&&(g.channelList.splice(R,1),g.closeWindowSuccess&&g.closeWindowSuccess({snum:s.info.snum,channelList:g.channelList}));break;case"video.notifytalk":if(s.info.bOpen){var S=!1;g.channelList.forEach(function(x){if(x.byUrl){S=!0,g.notifyTalk&&g.notifyTalk({channelId:s.info.channelId,snum:s.info.snum});return}x.isTalk&&(S=!0,g.request.stopTalk&&g.request.stopTalk(Ye(x,"stopTalk")).then(function(){delete x.isTalk,m.startTalk(s.info.snum)}).catch(function(W){W.code===2051&&m.startTalk(s.info.snum)}))}),!S&&m.startTalk(s.info.snum)}else g.channelList.forEach(function(x){x.snum===s.info.snum&&g.request.stopTalk&&g.request.stopTalk(Ye(x,"stopTalk")).then(function(){console.log("\u5173\u95ED\u5BF9\u8BB2")}),m.closeTalk()});break;case"talk.close":g.snum=s.info.wndId,g.closeTalkSuccess&&g.closeTalkSuccess(s.info.wndId);break;case"web.captureCallBack":var F=s.info.PicBuf?zt(s.info.PicBuf):"";g.snapshotSuccess&&g.snapshotSuccess({base64Url:s.info.PicBuf,path:F},_);break;case"window.LocalRecordFinish":g.videoDownloadSuccess&&g.videoDownloadSuccess(s.info.path,_);break;case"video.window.clicked":_=g.channelList.filter(function(x){return x.snum===s.info.wndIndex})[0],g.clickWindow&&g.clickWindow(s.info.wndIndex,_);break;case"video.window.dbclicked":_=g.channelList.filter(function(x){return x.snum===s.info.wndIndex})[0],g.dbClickWindow&&g.dbClickWindow(s.info.wndIndex,_);break;case"video.division.change":g.division=s.info.division,g.changeDivision&&g.changeDivision(s.info.division),m.setWindowDragEnable();break;case"video.customDivision.change":g.division=JSON.stringify(s.info),g.changeDivision&&g.changeDivision(JSON.stringify(s.info)),m.setWindowDragEnable();break;case"video.downloadFileSize":g.downloadProgress&&g.downloadProgress(s.info);break;case"video.download.mp4.result":g.downloadRecordSuccess&&g.downloadRecordSuccess(s.info);break;case"video.downloadByTime":if(Number(s.info.errCode)===0)g.downloadRecordSuccess&&g.downloadRecordSuccess(s.info);else{var J={142:"rtsp\u65AD\u5F00\u8FDE\u63A5",135:"\u89C6\u9891\u5F02\u5E38",141:"SS\u670D\u52A1\u5F02\u5E38"};g.downloadRecordError&&g.downloadRecordError(s.info,{code:Number(s.info.errCode),mesage:J[Number(s.info.errCode)]})}default:break}}var H=null,G=null;if(window.dhPlayerControl.callBackList[s.id]&&(H=window.dhPlayerControl.callBackList[s.id].onError,G=window.dhPlayerControl.callBackList[s.id].onSuccess),s.code!=0){H&&typeof H=="function"&&(H(s),delete window.dhPlayerControl.callBackList[s.id]);return}G&&typeof G=="function"&&(G(s),delete window.dhPlayerControl.callBackList[s.id])}}function fe(){window.dhPlayerControl.manualCloseWS=!0,window.dhPlayerControl.videoWS&&window.dhPlayerControl.videoWS.close(),window.dhPlayerControl.videoWS=null,window.wsHeart=clearInterval(window.wsHeart)}function pi(){var f=window.navigator.userAgent.toLowerCase(),s="";return f.indexOf("win")>-1?f.indexOf("windows nt 5.0")>-1||f.indexOf("Windows 2000")>-1?s="Windows 2000":f.indexOf("windows nt 5.1")>-1||f.indexOf("Windows XP")>-1?s="Windows XP":f.indexOf("windows nt 5.2")>-1||f.indexOf("Windows 2003")>-1?s="Windows 2003":f.indexOf("windows nt 6.0")>-1||f.indexOf("Windows Vista")>-1?s="Windows Vista":f.indexOf("windows nt 6.1")>-1||f.indexOf("windows 7")>-1?s="Windows 7":f.indexOf("windows nt 6.2")>-1||f.indexOf("windows 8")>-1?s="Windows 8":f.indexOf("windows nt 6.3")>-1?s="Windows 8.1":f.indexOf("windows nt 6.4")>-1||f.indexOf("windows nt 10")>-1?s="Windows 10":s="Unknown":f.indexOf("iphone")>-1?s="Iphone":f.indexOf("mac")>-1?s="Mac":f.indexOf("x11")>-1||f.indexOf("unix")>-1||f.indexOf("sunname")>-1||f.indexOf("bsd")>-1?s="Unix":f.indexOf("linux")>-1?f.indexOf("android")>-1?s="Android":s="Linux":s="Unknown",s}function bt(){var f={},s=navigator.userAgent.toLowerCase(),m;return(m=s.match(/edg\/([\d.]+)/))?f.edge=m[1]:(m=s.match(/rv:([\d.]+)\) like gecko/))||(m=s.match(/msie ([\d.]+)/))?f.ie=m[1]:(m=s.match(/firefox\/([\d.]+)/))?f.firefox=m[1]:(m=s.match(/chrome\/([\d.]+)/))?f.chrome=m[1]:(m=s.match(/opera.([\d.]+)/))?f.opera=m[1]:(m=s.match(/version\/([\d.]+).*safari/))&&(f.safari=m[1]),f.edge?{broswer:"Edg",version:f.edge}:f.ie?{broswer:"IE",version:f.ie}:f.firefox?{broswer:"Firefox",version:f.firefox}:f.chrome?{broswer:"Chrome",version:f.chrome}:f.opera?{broswer:"Opera",version:f.opera}:f.safari?{broswer:"Safari",version:f.safari}:{broswer:"",version:"0"}}function tt(){var f=bt();return f.broswer==="IE"?0:f.broswer==="Chrome"||f.broswer==="Edg"?1:f.broswer==="Firefox"?2:-1}function An(){var f=["Windows 7","Windows 10","Windows 8","Windows 8.1","Unix","Linux"],s=["Chrome","Firefox","Edg"],m=pi(),g=bt(),_=g.broswer,R=g.version;return console.log("\u5F53\u524D\u8BC6\u522B\u7684\u64CD\u4F5C\u7CFB\u7EDF\u7248\u672C\u4E3A\uFF1A ",m,"\u6D4F\u89C8\u5668\u4E3A: ",_,R+"\u7248\u672C"),f.includes(m)?s.includes(_)?Number(R.split(".")[0])<76||m==="unix"?{code:1002,success:!1,i18nKey:"browser.version.low",message:"\u5F53\u524D\u7684\u6D4F\u89C8\u5668\u7248\u672C\u4E0D\u652F\u6301\uFF01\u8BF7\u4F7F\u7528\u8F83\u9AD8\u7248\u672C\u7684\u6D4F\u89C8\u5668\uFF01"}:{code:1e3,success:!0}:{code:1002,success:!1,i18nKey:"browser.not.support",message:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\uFF01 \u4EC5\u652F\u6301\u8C37\u6B4C\uFF0C\u706B\u72D0\uFF0Cedge\u6D4F\u89C8\u5668"}:{code:1002,success:!1,i18nKey:"window.system.not.support",message:"\u7535\u8111\u7CFB\u7EDF\u4E0D\u652F\u6301\uFF01\u4EC5\u652F\u6301win7, win8, win8.1, win10, Unix, Linux \u7CFB\u7EDF"}}function ln(f){var s=this,m=0,g=0,_;if(window.dhPlayerControl.isPIframe)_=this.setting.pIframeRect,m=_.left||0,g=_.top||0;else{if(window.parent!==window)return{outLeft:0,outTop:0};var R=window.parent.document.getElementsByTagName("iframe"),S=null,F="",J=function H(G){if(R[G])try{f?F=R[G].contentWindow.document.getElementsByClassName(f)[0]:F=R[G].contentWindow.document.getElementById(s.setting.videoId),F?S=R[G]:H(G+1)}catch(x){H(G+1)}};R.length&&J(0),S&&(_=S.getBoundingClientRect(),m=_.left,g=_.top)}return{outLeft:m,outTop:g}}function Un(f,s){var m=this,g=null,_=ln.call(this),R=_.outLeft,S=_.outTop;s&&(R=0,S=0);var F=function(H){var G=[];return H.length&&H.forEach(function(x){var W=x&&x.getBoundingClientRect()||null;W&&(W.width||W.height)&&(G=[].concat(Ae(G),[W.left+(m.setting.outContent.left||R),W.top+(m.setting.outContent.top||S),W.width,W.height]))}),G};return s?g=window.top.document.querySelectorAll(".".concat(f)):g=window.document.querySelectorAll(".".concat(f)),F(g)}function un(f){var s="",m=this.setting.videoId;if(f?s=document.getElementsByClassName(f)[0]:s=document.getElementById(m),!s)return{};var g=s.getBoundingClientRect(),_=ln.call(this,f),R=_.outTop,S=_.outLeft,F=g.left+(this.setting.outContent.left||S),J=g.top+(this.setting.outContent.top||R),H=F+g.width,G=J+g.height;return{left:F,top:J,right:H,bottom:G,width:g.width,height:g.height}}function cn(f){var s=this,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"queryRecord";return new Promise(function(g,_){if(f.records&&f.records.length&&g(f),!s.setting.request[m]){_({code:207,i18nKey:"video.player.please.input.recordings.interface",message:"\u8BF7\u901A\u8FC7 request \u5C5E\u6027\u4F20\u5165\u67E5\u8BE2\u5F55\u50CF\u63A5\u53E3"});return}s.setting.request[m](Ye(f,m)).then(function(R){if(!f.records||f.records===[]){if(!R.records||!R.records.length){_({code:201,channelInfo:f,i18nKey:"video.player.selected.channel.search.empty",message:"\u901A\u9053 ".concat(f.channelName||f.name||"\u672A\u77E5"," \u672A\u67E5\u8BE2\u5230\u5F55\u50CF\u6587\u4EF6")});return}f.records=R.records.sort(function(S,F){return S.startTime-F.startTime}),f.currentIndex=0,s.setting.channelList[s.setting.channelList.findIndex(function(S){return S.channelId===f.channelId&&S.snum===f.snum})]=f}g(R)}).catch(function(R){_(R)})})}function jn(f,s){return f.records=s.records,f.rtspUrl=N(f),f}function dn(f,s){var m=this,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"playbackByFile",_=this;return new Promise(function(R,S){var F=Ye(f,g);cn.call(m,f).then(function(J){if(!_.setting.request[g]){S({code:207,i18nKey:"video.player.please.afferent.interface.playbackbyfile",message:"\u8BF7\u901A\u8FC7 request \u5C5E\u6027\u4F20\u5165 \u201C\u6839\u636E\u65F6\u95F4\u67E5\u8BE2\u5F55\u50CF\u201D \u63A5\u53E3"});return}var H=J.records[f.currentIndex];f.playStartTime=H.startTime,f.playEndTime=H.endTime,f.currentPlayTime=s?f.currentPlayTime:f.playStartTime;var G=String(f.playStartTime),x=f.bBack===0?String(f.playEndTime):String(f.currentPlayTime);F.data={ssId:H.ssId,optional:"/evo-apigw/admin/API/SS/Playback/StartPlaybackByFile",startTime:G,endTime:f.playEndTime,fileName:H.recordName,diskId:"".concat(G,"-").concat(x),nvrId:"",recordSource:f.recordSource,channelId:f.channelId,playbackMode:"0",streamId:H.streamId},_.setting.request[g](F).then(function(W){R(jn(W,f))}).catch(function(W){S(W)})}).catch(function(J){S(J)})})}function Jn(f){var s=this,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"playbackByTime";return new Promise(function(g,_){cn.call(s,f).then(function(){if(!s.setting.request[m]){_({code:207,i18nKey:"video.player.please.afferent.interface.playbackbytime",message:"\u8BF7\u901A\u8FC7 request \u5C5E\u6027\u4F20\u5165 \u201C\u901A\u8FC7\u65F6\u95F4\u64AD\u653E\u5F55\u50CF\u201D \u63A5\u53E3"});return}s.setting.request[m](Ye(f,m)).then(function(R){g(jn(R,f))}).catch(function(R){_(R)})}).catch(function(R){_(R)})})}var hn=function f(s){if(!s)throw new Error("\u8BF7\u4F20\u5165\u914D\u7F6E\u53C2\u6570");if(this instanceof f){var m={isResetConnect:!0,videoId:"DHVideoPlayer",windowType:0,outContent:{left:0,right:0,width:0,height:0},show:!0,option_id:{},refreshTimer:null,browserType:1,version:0,stopRefresh:!1,showBar:!0,hwnd:"",division:1,pIframeShieldData:[],documentTitle:"",topInnerWidth:0,topInnerHeight:0,parentIframeShieldRect:[],pIframeRect:[],topMozInnerScreenX:0,topMozInnerScreenY:0,oldPosition:"",oldShield:"",request:{},channelList:[],draggable:!1,visible:!0,domVisible:!0,usePluginLogin:!1,pluginLoginInfo:{host:"",port:"443",username:"",password:""}};this.setting=Object.assign({},m,s),this.adjustCount=0,this.focus=!1,this.init()}else return new f(s)};hn.fn=hn.prototype={onbeforeunload:function(){var s=this;this.destroy(!0).then(function(){fe.call(s)})},_update:function(s){var m=this,g=function(Ct,Ft){return Object.prototype.toString.call(Ct).includes(Ft)},_=s.windowType,R=s.isResetConnect,S=s.request,F=s.division,J=s.visible,H=s.draggable,G=s.showBar,x=s.shieldClass,W=s.coverShieldClass,ae=s.parentIframeShieldClass,ve=s.language;g(R,"Boolean")&&R!==this.setting.isResetConnect&&(this.setting.isResetConnect=R),g(J,"Boolean")&&J!==this.setting.visible&&(this.setting.visible=J,J?this.show():this.hide()),g(G,"Boolean")&&G!==this.setting.showBar&&this.showControlBar(G),g(H,"Boolean")&&H!==this.setting.draggable&&(this.setting.draggable=H,this.setWindowDragEnable()),F!=this.setting.division&&this.changeDivision(F),g(S,"Object")&&(this.setting.request=re({},S)),g(x,"Array")&&(this.setting.shieldClass=x),g(ae,"Array")&&(this.setting.parentIframeShieldClass=ae),g(W,"Array")&&(this.setting.coverShieldClass=W),_=Number(_),([0,1,2,3,7].includes(_)&&_!==Number(this.setting.windowType)||ve!==this.setting.language)&&(this.setting.language=ve,this.setting.socketTimer&&clearTimeout(this.setting.socketTimer),this.setting.socketTimer=setTimeout(function(){m.setting.windowType=_,m.create()},this.setting.usePluginLogin?1e3:300))},send:function(s,m){s.session=window.dhPlayerControl.wsSession,s.id=window.dhPlayerControl.wsConnectCount++,s.info&&(s.info.browserType=this.setting.browserType,s.method!=="window.destroy"&&(s.info.hwnd=s.method==="window.create"?void 0:this.setting.hwnd)),m&&Object.keys(m).length&&(window.dhPlayerControl.callBackList[s.id]=m),["window.change","window.shield","browserFocusBlur","window.show","window.loginServer","video.toolbar.showButton","window.enableDrag","video.division.change"].includes(s.method)||localStorage.printLog&&console.log("web->client: ",s.method,s.info),window.dhPlayerControl.videoWS&&window.dhPlayerControl.videoWS.readyState==1&&window.dhPlayerControl.videoWS.send(JSON.stringify(s))},create:function(){var s=this,m=un.call(this),g=Object.assign({},{},m),_=Dt.call(this),R=sn();g.isCustomDivision=isNaN(this.setting.division),g.num=isNaN(this.setting.division)?null:this.setting.division,g.customDivision=isNaN(this.setting.division)?JSON.parse(this.setting.division):null,g.toolBar=this.setting.showBar?1:0,g.windowType=this.setting.windowType-0,g.clientAreaHeight=_.height*R/100,g.clientAreaWidth=_.width*R/100,g.authority=!1,this.setTopBind=this.setTop.myBind(this),this.onbeforeunloadBind=this.onbeforeunload.myBind(this),this.visibilitychangeBind=this.setVisible.myBind(this);var S=this;this.setLanguage(),this.destroy().then(function(){s.send({method:"window.create",info:g},{onSuccess:function(J){if(J.data&&typeof J.data.hwnd=="number"){var H=J.data.hwnd;console.log("".concat([0,2].includes(S.setting.windowType)?"\u5B9E\u65F6\u9884\u89C8\u7A97\u53E3":"\u5F55\u50CF\u56DE\u653E\u7A97\u53E3","\u521B\u5EFA\u6210\u529F hwnd: ").concat(H,`
\u63D2\u4EF6\u7248\u672C: `).concat(window.dhPlayerControl.DHPlayerVersion)),S.setting.hwnd=H,window.dhPlayerControl.videoList[S.setting.videoId].setting=S.setting,window.dhPlayerControl.hwndList[H]=S.setting.videoId}S.setTopBind=S.setTop.myBind(S),window.addEventListener("beforeunload",S.onbeforeunloadBind),document.addEventListener("click",S.setTopBind),S.handleAdjust();for(var G=0;G<=3;)S.setting.oldPosition="",S.setting.oldShield="",S.changePosition(),G++;S.setTabControlBtn(),S.setWindowDragEnable(),S.setting.usePluginLogin?window.dhPlayerControl.loginFlag==="LOGIN_SUCCESS"?S.setting.createSuccess&&S.setting.createSuccess(le()):window.dhPlayerControl.loginFlag==="LOGIN_ERROR"&&S.setting.createError&&S.setting.createError({code:1004,msg:"\u767B\u5F55\u5931\u8D25, \u8BF7\u68C0\u67E5\u767B\u5F55\u4FE1\u606F"}):S.setting.createSuccess&&S.setting.createSuccess(le()),document.visibilityState==="visible"?S.show():S.hide(),document.addEventListener("visibilitychange",S.visibilitychangeBind,!0)},onError:function(){fe();var J=setTimeout(function(){Wt(),clearTimeout(J)},3e3)}})})},setLanguage:function(){var s=this;return new Promise(function(m,g){console.log(s.setting.language,"language"),s.send({method:"common.updateLanguage",info:{LanguageType:s.setting.language||(localStorage.language==="zh-cn"?"zh":"en")}},{onSuccess:function(){m()}})})},setTabControlBtn:function(s,m){var g=["BTN_STREAM","BTN_VOICE","BTN_TALK","BTN_RECORD","BTN_PIC","BTN_ENLARGE","BTN_CLOSE"];this.send({method:"video.toolbar.showButton",info:{space:15,snum:m,btns:s||g}})},setVisible:function(){document.visibilityState=="hidden"?this.hide():this.show()},setTop:function(){this.focus=!0,document.visibilityState=="visible"&&this.browserFocusBlur()},browserFocusBlur:function(){this.send({method:"browserFocusBlur",info:{show:this.setting.show,focus:this.focus}})},handleAdjust:function(){var s=this;!this.setting.stopRefresh&&this.changePosition(),!this.setting.stopRefresh&&this.windowShield(this.cover());var m=document.getElementById(this.setting.videoId);this.setting.domVisible!==ct(m)&&(this.setting.domVisible?this.hide():this.show(),this.setting.domVisible=ct(m)),this.setting.refreshTimer=window.requestAnimationFrame(function(){return s.handleAdjust()})},removeClickEventListener:function(){document.removeEventListener("click",this.setTopBind)},addClickEventListener:function(){document.addEventListener("click",this.setTopBind)},destroy:function(){var s=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return new Promise(function(g,_){var R=window.dhPlayerControl.videoList[s.setting.videoId];!R||R.setting&&typeof R.setting.hwnd!="number"?g():s.send({method:"window.destroy",info:{hwnd:R.setting.hwnd,isRefresh:m}},{onSuccess:function(){document.removeEventListener("click",s.setTopBind),document.removeEventListener("visibilitychange",s.visibilitychangeBind,!0),window.removeEventListener("beforeunload",s.onbeforeunloadBind),console.log("\u9500\u6BC1\u6210\u529F, hwnd: ".concat(R.setting.hwnd)),g()},onError:function(){document.removeEventListener("click",s.setTopBind),document.removeEventListener("visibilitychange",s.visibilitychangeBind,!0),window.removeEventListener("beforeunload",s.onbeforeunloadBind),console.log("\u9500\u6BC1\u6210\u529F, hwnd: ".concat(R.setting.hwnd)),g()}})})},waterMark:function(s){var m=this;s.forEach(function(g){var _=g.color.split(","),R=g.position.split(",");m.send({method:"video.setOSDInfo",info:{snum:g.snum,R:_[0]||255,G:_[1]||255,B:_[2]||255,fontSize:g.fontSize||14,positionX:R[0]||1,positionY:R[1]||1,osdInfo:g.text||"",fontWeight:g.fontWeight||0}})})},setWindowDragEnable:function(){this.send({method:"window.enableDrag",info:{enable:this.setting.draggable}})},setFullScreen:function(){this.send({method:"video.fullScreen",info:{}})},chooseWindow:function(s,m){this.send({method:"window.select",info:{snum:s}}),m&&m(this.setting.channelList.filter(function(g){return g.snum===s})[0])},openAudio:function(s){this.send({method:"video.enableAudio",info:{snum:s.snum,isEnable:s.isEnable,videoType:Number(this.setting.windowType)===0?0:1}})},startReal:function(s){var m=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=g.isReOpen,R=g.isSubStream,S=g.count,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"real",J=[],H=s.map(function(G){return G.snum+1}).sort(function(G,x){return x-G})[0];H>64&&this.setting.realError&&this.setting.realError(item,{code:209,i18nKey:"video.player.support.max",maxNum:H,message:"\u6700\u5927\u53EA\u652F\u630164\u8DEF\u64AD\u653E"}),!isNaN(this.setting.division)&&this.setting.division<H&&this.changeDivision(H),s.forEach(function(G){var x=!1;m.setting.channelList=m.setting.channelList.map(function(ae){return ae.snum===G.snum?(x=!0,re(re({},G),{},{closed:!0})):ae}),x||J.push(re({},G));var W=function(){if(m.setting.usePluginLogin){m.realByUrl(re(re({},G),{},{path:""}),{isReOpen:_,isSubStream:R,count:S},!0);return}else{if(!m.setting.request[F]){m.setting.realError&&m.setting.realError(G,{code:207,i18nKey:"video.player.please.afferent.interface.real",message:"\u8BF7\u901A\u8FC7 request \u5C5E\u6027\u4F20\u5165\u5B9E\u65F6\u9884\u89C8\u63A5\u53E3"});return}m.setting.request[F](Ye(G,F)).then(function(ve){ve.url&&m.realByUrl(re(re({},G),{},{path:N(ve)}),{isReOpen:_,isSubStream:R,count:S},!0)}).catch(function(ve){m.setting.channelList=m.setting.channelList.filter(function(Ue){return Ue.snum!==G.snum}),m.setting.realError&&m.setting.realError(G,ve)})}};if(!_&&!R&&x){m.closeVideo(G.snum).then(function(){W()});return}W()}),this.setting.channelList=[].concat(Ae(this.setting.channelList),J),window.dhPlayerControl.videoList[this.setting.videoId].setting.channelList=Ae(this.setting.channelList)},realByUrl:function(s){var m=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=g.isSubStream,R=g.isReOpen,S=g.count,F=arguments.length>2?arguments[2]:void 0,J=function(){m.send({method:"video.realmonitor",info:{snum:s.snum,path:s.path,channelId:s.channelId,channelName:s.channelName||"",redirect:typeof s.redirect=="boolean"?s.redirect:!1,camerType:s.cameraType,decodeMode:typeof s.decodeMode=="number"?s.decodeMode:2,bStreamChange:!!_,reopenvideo:!!R,streamType:s.streamType||1,count:S,deviceCode:s.channelId&&s.channelId.split("$1$0$")[0]||"",deviceType:s.deviceType,talkType:Bt(s.deviceType)}})};if(!F){var H=this.setting.channelList.findIndex(function(x){return x.snum===s.snum});H>=0?this.setting.channelList[H]=re(re({},s),{},{byUrl:!0,closed:!0}):this.setting.channelList.push(re(re({},s),{},{byUrl:!0})),window.dhPlayerControl.videoList[this.setting.videoId].setting.channelList=Ae(this.setting.channelList),!R&&!_&&this.closeVideo(s.snum).then(function(){J()});return}var G=setInterval(function(){clearInterval(G),m.setting.hwnd>=0?J():m.realByUrl(s,{isSubStream:_,isReOpen:R,count:S},F)},200)},startTalk:function(){var f=Ee(Nn().mark(function m(){var g=this,_,R,S,F,J,H=arguments;return Nn().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(_=H.length>0&&H[0]!==void 0?H[0]:0,R=H.length>1&&H[1]!==void 0?H[1]:"talk",S=this.setting.channelList.findIndex(function(W){return W.snum===_}),!(S<0)){x.next=5;break}return x.abrupt("return",this.setting.talkError(F,{code:206,i18nKey:"video.player.current.window.no.live.view",message:"\u8BF7\u5148\u8C03\u7528\u5B9E\u65F6\u9884\u89C8\u63A5\u53E3"}));case 5:if(F=this.setting.channelList[S],J=Ye(F,R).data,this.setting.request[R]){x.next=10;break}return this.setting.talkError&&this.setting.talkError(F,{code:207,i18nKey:"video.player.please.afferent.interface.talk.and.stopTalk",message:"\u8BF7\u901A\u8FC7 request \u5C5E\u6027\u4F20\u5165\u5BF9\u8BB2\u63A5\u53E3\u548C\u505C\u6B62\u5BF9\u8BB2\u63A5\u53E3"}),x.abrupt("return");case 10:this.setting.request[R]({data:J}).then(function(W){F.session=W.session;var ae=W.audioBit,ve=W.audioType,Ue=W.sampleRate;F.isTalk=!0,g.talkByUrl({redirect:!1,audioBit:ae,audioType:ve,sampleRate:Ue,path:N(W),channelId:F.channelId,talkType:Bt(F.deviceType),snum:_})}).catch(function(W){g.setting.talkError&&g.setting.talkError(F,W)});case 11:case"end":return x.stop()}},m,this)}));function s(){return f.apply(this,arguments)}return s}(),talkByUrl:function(s){this.send({method:"video.starttalk",info:{snum:s.snum,path:s.path,channelId:s.channelId,redirect:!1,audioType:s.audioType,audioBit:s.audioBit,sampleRate:s.sampleRate,talkType:s.talkType}})},startPlayback:function(s){var m=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=g.isConnect,R=g.bContinue,S=g.scaleSteps,F=function(W){return parseInt(new Date(W).getTime()/1e3)},J=function(W){Number(W.recordSource)===3||+(W.recordSource===4)?dn.call(m,W,_).then(function(ae){if(ae.code===201)return m.setting.playbackError&&m.setting.playbackError(W,ae);W.endTime=Number(W.records[W.records.length-1].endTime),m.playbackByUrl(re(re({},W),{},{path:ae.rtspUrl,records:ae.records,redirect:!1,bContinue:R,scaleSteps:S,isLastFile:W.currentIndex===ae.records.length-1}),!0)}).catch(function(ae){m.setting.playbackError&&m.setting.playbackError(W,ae)}):Number(W.recordSource)===2?Jn.call(m,W).then(function(ae){W.endTime=Number(W.records[W.records.length-1].endTime),m.playbackByUrl(re(re({},W),{},{path:ae.rtspUrl,records:ae.records,redirect:!1,bContinue:R,scaleSteps:S,isLastFile:W.currentIndex===ae.records.length-1}),!0)}).catch(function(ae){m.setting.playbackError&&m.setting.playbackError(W,ae)}):Number(W.recordSource)===1?cn.call(m,W).then(function(){var ae=W.records[0].recordSource;W.recordSource=Number(ae),(Number(ae)===3||Number(ae)===4)&&dn.call(m,W,_).then(function(ve){if(ve.code===201)return m.setting.playbackError&&m.setting.playbackError(W,ve);W.endTime=Number(W.records[W.records.length-1].endTime),m.playbackByUrl(re(re({},W),{},{path:ve.rtspUrl,records:ve.records,redirect:!1,bContinue:R,scaleSteps:S,isLastFile:W.currentIndex===ve.records.length-1}),!0)}).catch(function(ve){m.setting.playbackError&&m.setting.playbackError(W,ve)}),Number(ae)===2&&Jn.call(m,W).then(function(ve){W.endTime=Number(W.records[W.records.length-1].endTime),m.playbackByUrl(re(re({},W),{},{path:ve.rtspUrl,records:ve.records,redirect:!1,bContinue:R,scaleSteps:S,isLastFile:W.currentIndex===ve.records.length-1}),!0)}).catch(function(ve){m.setting.playbackError&&m.setting.playbackError(W,ve)})}).catch(function(ae){m.setting.playbackError&&m.setting.playbackError(W,ae)}):m.setting.playbackError&&m.setting.playbackError(W,{code:404,i18nKey:"video.player.only.play.device.and.center.recordings",message:"\u53EA\u80FD\u64AD\u653E\u8BBE\u5907\u5F55\u50CF\u548C\u4E2D\u5FC3\u5F55\u50CF\uFF01"})};if(_)J(s);else{var H=[],G=s.map(function(x){return x.snum+1}).sort(function(x,W){return W-x})[0];!isNaN(this.setting.division)&&this.setting.division<G&&this.changeDivision(G),s.forEach(function(x){if(x.startTime=F(x.startTime),x.endTime=F(x.endTime),x.startTime>x.endTime){var W=x.startTime;x.startTime=x.endTime,x.endTime=W}x.bBack=0;var ae=!0;m.setting.channelList.forEach(function(ve,Ue){ve.snum===x.snum&&(ae=!1,m.setting.channelList[Ue]=re(re({},x),{},{closed:!0}),m.closeVideo(x.snum).then(function(){m.setting.usePluginLogin?m.playbackByUrl(re(re({},x),{},{path:"",records:[],redirect:!1,bContinue:R,scaleSteps:S}),!0):J(re({},x))}))}),ae&&H.push(re({},x))}),H.forEach(function(x){m.setting.usePluginLogin?m.playbackByUrl(re(re({},x),{},{path:"",records:[],redirect:!1,bContinue:R,scaleSteps:S}),!0):J(re({},x))}),this.setting.channelList=[].concat(Ae(this.setting.channelList),H),window.dhPlayerControl.videoList[this.setting.videoId].setting.channelList=Ae(this.setting.channelList)}},playbackByUrl:function(s,m){if(!m){var g=this.setting.channelList.findIndex(function(_){return _.snum===s.snum});g>=0?this.setting.channelList[g]=re(re({},s),{},{byUrl:!0}):this.setting.channelList.push(re(re({},s),{},{byUrl:!0}))}this.send({method:"video.playback",info:{snum:s.snum,path:s.path,records:s.records,startTime:s.startTime,endTime:s.endTime,recordSource:s.recordSource,playStartTime:s.playStartTime||s.startTime,playEndTime:s.playEndTime||s.endTime,currentPlayTime:s.currentPlayTime||s.playStartTime,channelId:s.channelId,channelName:s.channelName||s.name||"",decodeMode:typeof s.decodeMode=="number"?s.decodeMode:2,redirect:typeof s.redirect=="boolean"?s.redirect:!1,bBack:s.bBack||0,bContinue:!!s.bContinue,scaleSteps:s.scaleSteps||0,lastFile:!!s.isLastFile}})},startDownloadRecord:function(s){var m=this,g=function(S){return parseInt(new Date(S).getTime()/1e3)},_=function(S){Number(S.recordSource)===3||Number(S.recordSource)===4?dn.call(m,S).then(function(F){if(F.code===201)return m.setting.downloadError&&m.setting.downloadError(S,F);S.endTime=Number(S.records[S.records.length-1].endTime),m.downloadRecord({snum:S.snum,url:F.rtspUrl,records:F.records,startTime:S.startTime,endTime:S.endTime})}).catch(function(F){m.setting.downloadError&&m.setting.downloadError(S,F)}):Number(S.recordSource)===2?Jn.call(m,S).then(function(F){S.endTime=Number(S.records[S.records.length-1].endTime),m.downloadRecord({snum:S.snum,url:F.rtspUrl,records:F.records,startTime:S.startTime,endTime:S.endTime})}).catch(function(F){m.setting.downloadError&&m.setting.downloadError(S,F)}):m.setting.downloadError&&m.setting.downloadError(S,{code:404,i18nKey:"video.player.only.download.device.and.center.recordings",message:"\u53EA\u80FD\u4E0B\u8F7D\u8BBE\u5907\u5F55\u50CF\u548C\u4E2D\u5FC3\u5F55\u50CF\uFF01"})};if(s.length>4)return this.setting.downloadError({code:401,i18nKey:"video.player.download.recordings.max",message:"\u6700\u591A\u652F\u63014\u8DEF\u5F55\u50CF\u540C\u65F6\u4E0B\u8F7D"});s.forEach(function(R){if(R.startTime=g(R.startTime),R.endTime=g(R.endTime),R.startTime>R.endTime){var S=R.startTime;R.startTime=R.endTime,R.endTime=S}R.bBack=0,_(R)})},changePosition:function(s,m){var g=this,_=Dt.call(this),R=sn(),S=un.call(this);for(var F in S)S[F]=S[F]*R/100;var J=Object.assign({},{},S,s);J.clientAreaHeight=_.height*R/100,J.clientAreaWidth=_.width*R/100,J.browserScreenX=gi(),J.screenX=window.screenX,J.screenY=window.screenY,window.dhPlayerControl.isPIframe?(J.mozInnerScreenX=this.setting.topMozInnerScreenX*R/100,J.mozInnerScreenY=this.setting.topMozInnerScreenY*R/100):(J.mozInnerScreenX=window.top.mozInnerScreenX*R/100,J.mozInnerScreenY=window.top.mozInnerScreenY*R/100),delete J.width,delete J.height,J.show=document.visibilityState!=="hidden",J.title=window.dhPlayerControl.isPIframe?this.setting.documentTitle:window.top.document.title;var H=function(){g.send({method:"window.change",info:J},m)};if(this.setting.oldPosition===JSON.stringify(J)){for(;this.adjustCount<3;)this.adjustCount++,H(),this.windowShield(this.cover(),!0);return}this.adjustCount=0,this.setting.oldPosition=JSON.stringify(J),H()},hide:function(){this.setting.show=!1,this.setting.stopRefresh=!0,this.send({method:"window.show",info:{show:!1}})},show:function(){var s=this;this.setting.stopRefresh=!1,this.setting.show=!0,this.send({method:"window.show",info:{show:!0}},{onSuccess:function(){s.setting.refreshTimer&&window.cancelAnimationFrame(s.setting.refreshTimer),s.setting.oldPosition="",s.handleAdjust(),s.setting.showWindowSuccess&&s.setting.showWindowSuccess()},onError:this.setting.showWindowError})},downloadRecord:function(s){this.send({method:"video.downloadByTime",info:{channelId:s.channelId,snum:s.snum,url:s.url,records:s.records,startTime:s.startTime,endTime:s.endTime,redirect:typeof s.redirect=="boolean"?s.redirect:!1}})},closeVideo:function(s){var m=this;return new Promise(function(g){m.send({method:"video.close",info:{snum:typeof s=="number"?s:0,isAll:typeof s!="number"}},{onSuccess:function(){g()}})})},closeTalk:function(){this.send({method:"video.closetalk",info:{snum:0,isAll:!0}})},controlPlayback:function(s){this.send({method:"video.playbackChangeState",info:{snum:s.snum,state:s.state}})},showControlBar:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setting.showBar=s,this.send({method:"video.setToolBarShow",info:{isShow:s?1:0}})},localRecordDownload:function(s){this.send({method:"vidoe.localRecord",info:{snum:s}})},changeDivision:function(s){s&&(isNaN(s)?(this.setting.division=s,this.send({method:"video.customDivision.change",info:JSON.parse(s)}),this.setting.changeDivision&&this.setting.changeDivision(s)):(this.setting.division=Number(s),this.send({method:"video.division.change",info:{division:this.setting.division}}),this.setting.changeDivision&&this.setting.changeDivision(this.setting.division)),this.setWindowDragEnable())},snapshot:function(s){this.send({method:"video.snapic",info:{snum:s}})},windowShield:function(s,m,g){var _=Dt.call(this),R=sn(),S={};S.region=this.getShieldRect(s).map(function(F){return F*R/100}),S.clientAreaHeight=_.height*R/100,S.clientAreaWidth=_.width*R/100,!(!m&&this.setting.oldShield===JSON.stringify(S))&&(this.setting.oldShield=JSON.stringify(S),this.send({method:"window.shield",info:S},g))},version:function(s){this.send({method:"common.version",info:{}},s)},isEnableIvs:function(s){this.send({method:"video.enableIvs",info:{snum:s.snum,isEnableIVS:s.isEnableIVS,ivsType:s.ivsType}})},getWindowState:function(s){this.send({method:"window.getWindowState",info:{}},s)},cover:function(){var s=this,m=un.call(this),g=m.left,_=m.top,R=m.right,S=m.bottom,F=m.width,J=m.height,H=[],G=Dt.call(this),x=function(_e){_e&&_e[0]&&(_<_e[0].top&&H.push(g,_,F+1,_e[0].top-_),S>_e[0].bottom&&H.push(g,_e[0].bottom,F+1,S-_e[0].bottom),g<_e[0].left&&H.push(g,_,_e[0].left-g+1,J),R>_e[0].right&&H.push(_e[0].right,_,R-_e[0].right+1,J))};x([{top:0,left:0,right:G.width,bottom:G.height}]);var W,ae,ve;if(window.dhPlayerControl.isPIframe)W=this.setting.pIframeRect,ae=W.left,ve=W.top;else{var Ue=window.parent.document.getElementsByTagName("iframe"),Ct=null,Ft=null,wi=function kt(_e){if(Ue[_e])try{Ft=Ue[_e].contentWindow.document.getElementById(s.setting.videoId),Ft?Ct=Ue[_e]:kt(_e+1)}catch(Te){kt(_e+1)}};Ue.length&&wi(0),Ct&&(W=Ct.getBoundingClientRect())}return W&&x([{top:W.top,left:W.left,width:W.width,height:W.height}]),this.setting.coverShieldClass&&this.setting.coverShieldClass.length&&this.setting.coverShieldClass.forEach(function(kt){var _e=document.getElementsByClassName(kt)[0],Te=_e?_e.getClientRects():null;Te=[{left:Te[0].left,top:Te[0].top,bottom:Te[0].bottom,right:Te[0].right}],W&&(Te[0].left=Te[0].left+W.left,Te[0].top=Te[0].top+W.top,Te[0].bottom=Te[0].top+Te[0].height,Te[0].right=Te[0].left+Te[0].width),Te&&x(Te)}),H},loginServer:function(){this.send({method:"window.loginServer",info:{host:this.setting.pluginLoginInfo.host,port:String(this.setting.pluginLoginInfo.port),username:this.setting.pluginLoginInfo.username,password:this.setting.pluginLoginInfo.password}})},logoutServer:function(){var s=this;return new Promise(function(m,g){s.send({method:"window.logoutServer",info:{}}),setTimeout(function(){m()},2e3)})},getLoginState:function(){this.send({method:"window.getLoginState",info:{}})},getLoginInfo:function(){this.send({method:"window.getLoginInfo",info:{}})},extendOption:function(s,m){for(var g={},_=0;_<s.length;_++)g[s[_]]=this.setting[s[_]];return Object.assign({},g,m)},getShieldRect:function(s){for(var m=this.setting.shieldClass||[],g=s||[],_=0;_<m.length;_++)g=[].concat(Ae(g),Ae(Un.call(this,m[_])));if(window.dhPlayerControl.isPIframe){var R;(R=g).push.apply(R,Ae(this.setting.pIframeShieldData))}else{var S=this.setting.parentIframeShieldClass||[];for(_=0;_<S.length;_++)g=[].concat(Ae(g),Ae(Un.call(this,S[_],!0)))}return g},MainCall:function(s){var m=document.getElementById(this.setting.ieDom);this.setting.option_id[s.id]=s,m&&m.MainCall(s.method,JSON.stringify(s))},init:function(){var s=this;try{console.log(window.top.origin),window.dhPlayerControl.isPIframe=!1,this.initPlayer()}catch(m){console.log("\u5B58\u5728\u8DE8\u57DFiframe"),window.dhPlayerControl.isPIframe=!0,addEventListener("message",function(g){g.data.methods==="title"&&(s.setting.documentTitle=g.data.title||document.title),g.data.methods==="rect"&&(s.setting.topInnerWidth=g.data.topInnerWidth||0,s.setting.topInnerHeight=g.data.topInnerHeight||0,s.setting.pIframeRect=g.data.pIframeRect||0,s.setting.topMozInnerScreenX=g.data.topMozInnerScreenX||0,s.setting.topMozInnerScreenY=g.data.topMozInnerScreenY||0),g.data.methods=="shieldRect"&&(s.setting.pIframeShieldData=g.data.pIframeShieldData||[])}),this.initPlayer()}},initPlayer:function(){var s=this,m="";if(window.dhPlayerControl.videoList[this.setting.videoId]&&(m=window.dhPlayerControl.videoList[this.setting.videoId].setting.hwnd),window.dhPlayerControl.videoList[this.setting.videoId]=this,this.setting.hwnd=m,!window.dhPlayerControl.wsConnect)window.dhPlayerControl.wsConnect=!0,Wt.call(this);else if(window.dhPlayerControl.windowState==="wsSuccess"&&(!this.setting.usePluginLogin||window.dhPlayerControl.loginFlag!=="LOGIN_PENDING")){var g=An();if(!g.success)return this.setting.createError&&this.setting.createError(g);this.setting.socketTimer&&clearTimeout(this.setting.socketTimer),this.setting.socketTimer=setTimeout(function(){s.create()},this.setting.usePluginLogin?1e3:300)}else window.dhPlayerControl.windowState==="noPlugin"?this.setting.createError&&this.setting.createError({code:1001,success:!1,i18nKey:"video.player.plugin.not.installed",message:"\u63D2\u4EF6\u672A\u5B89\u88C5"}):window.dhPlayerControl.windowState==="wsError"?this.setting.createError&&this.setting.createError({code:1003,success:!1,message:"\u65E0\u6CD5\u4E0E\u64AD\u653E\u5668\u5EFA\u7ACB\u8FDE\u63A5"+window.isResetConnect?", \u6B63\u5728\u91CD\u8FDE...":0}):setTimeout(function(){s.initPlayer()},300);this.setting.browserType=tt()}},window.VideoPlayer=window.VideoPlayer||hn})()},83615:function(Fa,vi,oe){"use strict";oe.r(vi),oe.d(vi,{DhPlayer:function(){return g},HikPlayer:function(){return dn},LangoAvatar:function(){return sn},LangoBadge:function(){return S},LangoFilter:function(){return wi},LangoMap:function(){return Na},LangoSpace:function(){return H},LangoVideo:function(){return Ya}});var Nn=oe(97857),Ee=oe.n(Nn),Ae=oe(5574),re=oe.n(Ae),le=oe(67294),Ye=oe.p+"static/default_logo.313c8eb7.png",Bt=oe(93967),ct=oe.n(Bt),N=oe(85893),Dt=function(b){var y=b.url,c=b.defaultImage,w=b.size,P=w===void 0?40:w,E=b.bgColor,T=E===void 0?"#eee":E,C=b.shape,B=C===void 0?"circle":C,p=b.children,I=(0,le.useState)(y||Ye),U=re()(I,2),ce=U[0],Ce=U[1],Pe=function(){Ce(c||Ye)},De=(0,le.useMemo)(function(){return typeof P=="number"?{width:P+"px",height:P+"px"}:P.toString().includes("px")||P.toString().includes("%")?{width:P,height:P}:{}},[P]);return(0,N.jsxs)("div",{className:ct()("lango-avatar",B==="circle"&&"lango-avatar-circle",B==="square"&&"lango-avatar"),style:Ee()(Ee()({},De),{},{backgroundColor:T}),children:[!p&&(0,N.jsx)("img",{src:ce,alt:"",onError:Pe}),!!p&&p]})},gi=Dt,sn=gi,Wt=oe(12444),Ot=oe.n(Wt),mi=oe(72004),zt=oe.n(mi),yi=oe(9783),fe=oe.n(yi),pi=oe(52677),bt=oe.n(pi),tt=oe(48764).lW,An=function(){"use strict";function ue(i){return(ue=typeof Symbol=="function"&&bt()(Symbol.iterator)=="symbol"?function(t){return bt()(t)}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":bt()(t)})(i)}function b(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function y(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function c(i,t,e){return t&&y(i.prototype,t),e&&y(i,e),i}function w(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}var P=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof oe.g!="undefined"?oe.g:typeof self!="undefined"?self:{};function E(i,t,e){return i(e={path:t,exports:{},require:function(o,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(r==null&&e.path)}},e.exports),e.exports}var T=function(t){return t&&t.Math==Math&&t},C=T((typeof globalThis=="undefined"?"undefined":ue(globalThis))=="object"&&globalThis)||T((typeof window=="undefined"?"undefined":ue(window))=="object"&&window)||T((typeof self=="undefined"?"undefined":ue(self))=="object"&&self)||T(ue(P)=="object"&&P)||Function("return this")(),B=function(t){try{return!!t()}catch(e){return!0}},p=!B(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),I={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,ce={f:U&&!I.call({1:2},1)?function(i){var t=U(this,i);return!!t&&t.enumerable}:I},Ce=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Pe={}.toString,De=function(t){return Pe.call(t).slice(8,-1)},_t="".split,Oe=B(function(){return!Object("z").propertyIsEnumerable(0)})?function(i){return De(i)=="String"?_t.call(i,""):Object(i)}:Object,Ke=function(t){if(t==null)throw TypeError("Can't call method on "+t);return t},Je=function(t){return Oe(Ke(t))},Se=function(t){return ue(t)==="object"?t!==null:typeof t=="function"},nt=function(t,e){if(!Se(t))return t;var n,o;if(e&&typeof(n=t.toString)=="function"&&!Se(o=n.call(t))||typeof(n=t.valueOf)=="function"&&!Se(o=n.call(t))||!e&&typeof(n=t.toString)=="function"&&!Se(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")},it={}.hasOwnProperty,Ie=function(t,e){return it.call(t,e)},St=C.document,Ci=Se(St)&&Se(St.createElement),Mt=function(t){return Ci?St.createElement(t):{}},fn=!p&&!B(function(){return Object.defineProperty(Mt("div"),"a",{get:function(){return 7}}).a!=7}),Hn=Object.getOwnPropertyDescriptor,vn={f:p?Hn:function(i,t){if(i=Je(i),t=nt(t,!0),fn)try{return Hn(i,t)}catch(e){}if(Ie(i,t))return Ce(!ce.f.call(i,t),i[t])}},ze=function(t){if(!Se(t))throw TypeError(String(t)+" is not an object");return t},He=Object.defineProperty,de={f:p?He:function(i,t,e){if(ze(i),t=nt(t,!0),ze(e),fn)try{return He(i,t,e)}catch(n){}if("get"in e||"set"in e)throw TypeError("Accessors not supported");return"value"in e&&(i[t]=e.value),i}},O=p?function(i,t,e){return de.f(i,t,Ce(1,e))}:function(i,t,e){return i[t]=e,i},Q=function(t,e){try{O(C,t,e)}catch(n){C[t]=e}return e},Y="__core-js_shared__",he=C[Y]||Q(Y,{}),se=Function.toString;typeof he.inspectSource!="function"&&(he.inspectSource=function(i){return se.call(i)});var me,be,pe,Le=he.inspectSource,je=C.WeakMap,We=typeof je=="function"&&/native code/.test(Le(je)),Nt=E(function(i){(i.exports=function(t,e){return he[t]||(he[t]=e!==void 0?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),dt=0,gn=Math.random(),Ro=function(t){return"Symbol("+String(t===void 0?"":t)+")_"+(++dt+gn).toString(36)},To=Nt("keys"),ki=function(t){return To[t]||(To[t]=Ro(t))},_i={},$a=C.WeakMap;if(We){var At=new $a,Qa=At.get,es=At.has,ts=At.set;me=function(t,e){return ts.call(At,t,e),e},be=function(t){return Qa.call(At,t)||{}},pe=function(t){return es.call(At,t)}}else{var mn=ki("state");_i[mn]=!0,me=function(t,e){return O(t,mn,e),e},be=function(t){return Ie(t,mn)?t[mn]:{}},pe=function(t){return Ie(t,mn)}}var ot={set:me,get:be,has:pe,enforce:function(t){return pe(t)?be(t):me(t,{})},getterFor:function(t){return function(e){var n;if(!Se(e)||(n=be(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Ut=E(function(i){var t=ot.get,e=ot.enforce,n=String(String).split("String");(i.exports=function(o,r,a,l){var u=!!l&&!!l.unsafe,d=!!l&&!!l.enumerable,h=!!l&&!!l.noTargetGet;typeof a=="function"&&(typeof r!="string"||Ie(a,"name")||O(a,"name",r),e(a).source=n.join(typeof r=="string"?r:"")),o!==C?(u?!h&&o[r]&&(d=!0):delete o[r],d?o[r]=a:O(o,r,a)):d?o[r]=a:Q(r,a)})(Function.prototype,"toString",function(){return typeof this=="function"&&t(this).source||Le(this)})}),yn=C,Eo=function(t){return typeof t=="function"?t:void 0},ht=function(t,e){return arguments.length<2?Eo(yn[t])||Eo(C[t]):yn[t]&&yn[t][e]||C[t]&&C[t][e]},ns=Math.ceil,is=Math.floor,Si=function(t){return isNaN(t=+t)?0:(t>0?is:ns)(t)},os=Math.min,Io=function(t){return t>0?os(Si(t),9007199254740991):0},rs=Math.max,as=Math.min,Lo=function(t){return function(e,n,o){var r,a=Je(e),l=Io(a.length),u=function(d,h){var v=Si(d);return v<0?rs(v+h,0):as(v,h)}(o,l);if(t&&n!=n){for(;l>u;)if((r=a[u++])!=r)return!0}else for(;l>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}},ss={includes:Lo(!0),indexOf:Lo(!1)}.indexOf,xo=function(t,e){var n,o=Je(t),r=0,a=[];for(n in o)!Ie(_i,n)&&Ie(o,n)&&a.push(n);for(;e.length>r;)Ie(o,n=e[r++])&&(~ss(a,n)||a.push(n));return a},Vn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ls=Vn.concat("length","prototype"),us={f:Object.getOwnPropertyNames||function(i){return xo(i,ls)}},qo={f:Object.getOwnPropertySymbols},cs=ht("Reflect","ownKeys")||function(i){var t=us.f(ze(i)),e=qo.f;return e?t.concat(e(i)):t},ds=function(t,e){for(var n=cs(e),o=de.f,r=vn.f,a=0;a<n.length;a++){var l=n[a];Ie(t,l)||o(t,l,r(e,l))}},hs=/#|\.prototype\./,pn=function(t,e){var n=vs[fs(t)];return n==ms||n!=gs&&(typeof e=="function"?B(e):!!e)},fs=pn.normalize=function(i){return String(i).replace(hs,".").toLowerCase()},vs=pn.data={},gs=pn.NATIVE="N",ms=pn.POLYFILL="P",Bo=pn,ys=vn.f,rt=function(t,e){var n,o,r,a,l,u=t.target,d=t.global,h=t.stat;if(n=d?C:h?C[u]||Q(u,{}):(C[u]||{}).prototype)for(o in e){if(a=e[o],r=t.noTargetGet?(l=ys(n,o))&&l.value:n[o],!Bo(d?o:u+(h?".":"#")+o,t.forced)&&r!==void 0){if(ue(a)===ue(r))continue;ds(a,r)}(t.sham||r&&r.sham)&&O(a,"sham",!0),Ut(n,o,a,t)}},Gn=Object.keys||function(i){return xo(i,Vn)},Do=function(t){return Object(Ke(t))},jt=Object.assign,Wo=Object.defineProperty,Oo=!jt||B(function(){if(p&&jt({b:1},jt(Wo({},"a",{enumerable:!0,get:function(){Wo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var i={},t={},e=Symbol(),n="abcdefghijklmnopqrst";return i[e]=7,n.split("").forEach(function(o){t[o]=o}),jt({},i)[e]!=7||Gn(jt({},t)).join("")!=n})?function(i,t){for(var e=Do(i),n=arguments.length,o=1,r=qo.f,a=ce.f;n>o;)for(var l,u=Oe(arguments[o++]),d=r?Gn(u).concat(r(u)):Gn(u),h=d.length,v=0;h>v;)l=d[v++],p&&!a.call(u,l)||(e[l]=u[l]);return e}:jt;rt({target:"Object",stat:!0,forced:Object.assign!==Oo},{assign:Oo}),yn.Object.assign;var zo=!!Object.getOwnPropertySymbols&&!B(function(){return!String(Symbol())}),ps=zo&&!Symbol.sham&&ue(Symbol.iterator)=="symbol",Zn=Nt("wks"),wn=C.Symbol,ws=ps?wn:wn&&wn.withoutSetter||Ro,Fe=function(t){return Ie(Zn,t)||(zo&&Ie(wn,t)?Zn[t]=wn[t]:Zn[t]=ws("Symbol."+t)),Zn[t]},Fo={};Fo[Fe("toStringTag")]="z";var Pi=String(Fo)==="[object z]",bs=Fe("toStringTag"),Cs=De(function(){return arguments}())=="Arguments",Mo=Pi?De:function(i){var t,e,n;return i===void 0?"Undefined":i===null?"Null":typeof(e=function(o,r){try{return o[r]}catch(a){}}(t=Object(i),bs))=="string"?e:Cs?De(t):(n=De(t))=="Object"&&typeof t.callee=="function"?"Arguments":n},ks=Pi?{}.toString:function(){return"[object "+Mo(this)+"]"};Pi||Ut(Object.prototype,"toString",ks,{unsafe:!0});var Jt,No,Ao,Uo=function(t){return function(e,n){var o,r,a=String(Ke(e)),l=Si(n),u=a.length;return l<0||l>=u?t?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===u||(r=a.charCodeAt(l+1))<56320||r>57343?t?a.charAt(l):o:t?a.slice(l,l+2):r-56320+(o-55296<<10)+65536}},_s={codeAt:Uo(!1),charAt:Uo(!0)},Ss=!B(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype}),jo=ki("IE_PROTO"),Ps=Object.prototype,Kn=Ss?Object.getPrototypeOf:function(i){return i=Do(i),Ie(i,jo)?i[jo]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?Ps:null},Jo=Fe("iterator"),Ho=!1;[].keys&&("next"in(Ao=[].keys())?(No=Kn(Kn(Ao)))!==Object.prototype&&(Jt=No):Ho=!0),Jt==null&&(Jt={}),Ie(Jt,Jo)||O(Jt,Jo,function(){return this});var Ri,Ti={IteratorPrototype:Jt,BUGGY_SAFARI_ITERATORS:Ho},Rs=p?Object.defineProperties:function(i,t){ze(i);for(var e,n=Gn(t),o=n.length,r=0;o>r;)de.f(i,e=n[r++],t[e]);return i},Ei=ht("document","documentElement"),Vo=ki("IE_PROTO"),Ii=function(){},Go=function(t){return"<script>"+t+"<\/script>"},Xn=function(){try{Ri=document.domain&&new ActiveXObject("htmlfile")}catch(o){}var t,e;Xn=Ri?function(o){o.write(Go("")),o.close();var r=o.parentWindow.Object;return o=null,r}(Ri):((e=Mt("iframe")).style.display="none",Ei.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write(Go("document.F=Object")),t.close(),t.F);for(var n=Vn.length;n--;)delete Xn.prototype[Vn[n]];return Xn()};_i[Vo]=!0;var Zo=Object.create||function(i,t){var e;return i!==null?(Ii.prototype=ze(i),e=new Ii,Ii.prototype=null,e[Vo]=i):e=Xn(),t===void 0?e:Rs(e,t)},Ts=de.f,Ko=Fe("toStringTag"),Li=function(t,e,n){t&&!Ie(t=n?t:t.prototype,Ko)&&Ts(t,Ko,{configurable:!0,value:e})},Ht={},Es=Ti.IteratorPrototype,Is=function(){return this},Xo=Object.setPrototypeOf||("__proto__"in{}?function(){var i,t=!1,e={};try{(i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),t=e instanceof Array}catch(n){}return function(n,o){return ze(n),function(r){if(!Se(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype")}(o),t?i.call(n,o):n.__proto__=o,n}}():void 0),xi=Ti.IteratorPrototype,Yn=Ti.BUGGY_SAFARI_ITERATORS,bn=Fe("iterator"),Yo="keys",$n="values",$o="entries",Ls=function(){return this},Qo=function(t,e,n,o,r,a,l){(function(te,M,A){var z=M+" Iterator";te.prototype=Zo(Es,{next:Ce(1,A)}),Li(te,z,!1),Ht[z]=Is})(n,e,o);var u,d,h,v=function(M){if(M===r&&ne)return ne;if(!Yn&&M in k)return k[M];switch(M){case Yo:case $n:case $o:return function(){return new n(this,M)}}return function(){return new n(this)}},D=e+" Iterator",L=!1,k=t.prototype,q=k[bn]||k["@@iterator"]||r&&k[r],ne=!Yn&&q||v(r),Z=e=="Array"&&k.entries||q;if(Z&&(u=Kn(Z.call(new t)),xi!==Object.prototype&&u.next&&(Kn(u)!==xi&&(Xo?Xo(u,xi):typeof u[bn]!="function"&&O(u,bn,Ls)),Li(u,D,!0))),r==$n&&q&&q.name!==$n&&(L=!0,ne=function(){return q.call(this)}),k[bn]!==ne&&O(k,bn,ne),Ht[e]=ne,r)if(d={values:v($n),keys:a?ne:v(Yo),entries:v($o)},l)for(h in d)(Yn||L||!(h in k))&&Ut(k,h,d[h]);else rt({target:e,proto:!0,forced:Yn||L},d);return d},xs=_s.charAt,er="String Iterator",qs=ot.set,Bs=ot.getterFor(er);Qo(String,"String",function(i){qs(this,{type:er,string:String(i),index:0})},function(){var i,t=Bs(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(i=xs(e,n),t.index+=i.length,{value:i,done:!1})});var tr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},qi=Fe("unscopables"),Bi=Array.prototype;Bi[qi]==null&&de.f(Bi,qi,{configurable:!0,value:Zo(null)});var Di=function(t){Bi[qi][t]=!0},nr="Array Iterator",Ds=ot.set,Ws=ot.getterFor(nr),Cn=Qo(Array,"Array",function(i,t){Ds(this,{type:nr,target:Je(i),index:0,kind:t})},function(){var i=Ws(this),t=i.target,e=i.kind,n=i.index++;return!t||n>=t.length?(i.target=void 0,{value:void 0,done:!0}):e=="keys"?{value:n,done:!1}:e=="values"?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values");Ht.Arguments=Ht.Array,Di("keys"),Di("values"),Di("entries");var Wi=Fe("iterator"),ir=Fe("toStringTag"),Oi=Cn.values;for(var zi in tr){var or=C[zi],at=or&&or.prototype;if(at){if(at[Wi]!==Oi)try{O(at,Wi,Oi)}catch(i){at[Wi]=Oi}if(at[ir]||O(at,ir,zi),tr[zi]){for(var Vt in Cn)if(at[Vt]!==Cn[Vt])try{O(at,Vt,Cn[Vt])}catch(i){at[Vt]=Cn[Vt]}}}}var st=C.Promise,rr=Fe("species"),ft=function(t){if(typeof t!="function")throw TypeError(String(t)+" is not a function");return t},Os=Fe("iterator"),zs=Array.prototype,ar=function(t,e,n){if(ft(t),e===void 0)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(o){return t.call(e,o)};case 2:return function(o,r){return t.call(e,o,r)};case 3:return function(o,r,a){return t.call(e,o,r,a)}}return function(){return t.apply(e,arguments)}},Fs=Fe("iterator"),Ms=function(t,e,n,o){try{return o?e(ze(n)[0],n[1]):e(n)}catch(a){var r=t.return;throw r!==void 0&&ze(r.call(t)),a}},Fi=E(function(i){var t=function(n,o){this.stopped=n,this.result=o};(i.exports=function(e,n,o,r,a){var l,u,d,h,v,D,L,k,q=ar(n,o,r?2:1);if(a)l=e;else{if(typeof(u=function(ne){if(ne!=null)return ne[Fs]||ne["@@iterator"]||Ht[Mo(ne)]}(e))!="function")throw TypeError("Target is not iterable");if((k=u)!==void 0&&(Ht.Array===k||zs[Os]===k)){for(d=0,h=Io(e.length);h>d;d++)if((v=r?q(ze(L=e[d])[0],L[1]):q(e[d]))&&v instanceof t)return v;return new t(!1)}l=u.call(e)}for(D=l.next;!(L=D.call(l)).done;)if(ue(v=Ms(l,q,L.value,r))=="object"&&v&&v instanceof t)return v;return new t(!1)}).stop=function(e){return new t(!0,e)}}),sr=Fe("iterator"),lr=!1;try{var Ns=0,ur={next:function(){return{done:!!Ns++}},return:function(){lr=!0}};ur[sr]=function(){return this},Array.from(ur,function(){throw 2})}catch(i){}var Gt,cr,Mi,As=Fe("species"),dr=function(t,e){var n,o=ze(t).constructor;return o===void 0||(n=ze(o)[As])==null?e:ft(n)},Qn=ht("navigator","userAgent")||"",hr=/(iphone|ipod|ipad).*applewebkit/i.test(Qn),Ni=C.location,Ai=C.setImmediate,Ui=C.clearImmediate,fr=C.process,vr=C.MessageChannel,ji=C.Dispatch,Ji=0,kn={},Us="onreadystatechange",Hi=function(t){if(kn.hasOwnProperty(t)){var e=kn[t];delete kn[t],e()}},Vi=function(t){return function(){Hi(t)}},gr=function(t){Hi(t.data)},mr=function(t){C.postMessage(t+"",Ni.protocol+"//"+Ni.host)};Ai&&Ui||(Ai=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return kn[++Ji]=function(){(typeof t=="function"?t:Function(t)).apply(void 0,e)},Gt(Ji),Ji},Ui=function(t){delete kn[t]},De(fr)=="process"?Gt=function(t){fr.nextTick(Vi(t))}:ji&&ji.now?Gt=function(t){ji.now(Vi(t))}:vr&&!hr?(Mi=(cr=new vr).port2,cr.port1.onmessage=gr,Gt=ar(Mi.postMessage,Mi,1)):!C.addEventListener||typeof postMessage!="function"||C.importScripts||B(mr)||Ni.protocol==="file:"?Gt=Us in Mt("script")?function(i){Ei.appendChild(Mt("script")).onreadystatechange=function(){Ei.removeChild(this),Hi(i)}}:function(i){setTimeout(Vi(i),0)}:(Gt=mr,C.addEventListener("message",gr,!1)));var _n,Pt,Sn,Zt,Gi,Zi,Ki,yr,pr={set:Ai,clear:Ui},js=vn.f,Js=pr.set,wr=C.MutationObserver||C.WebKitMutationObserver,Xi=C.process,Yi=C.Promise,br=De(Xi)=="process",Cr=js(C,"queueMicrotask"),kr=Cr&&Cr.value;kr||(_n=function(){var t,e;for(br&&(t=Xi.domain)&&t.exit();Pt;){e=Pt.fn,Pt=Pt.next;try{e()}catch(n){throw Pt?Zt():Sn=void 0,n}}Sn=void 0,t&&t.enter()},br?Zt=function(){Xi.nextTick(_n)}:wr&&!hr?(Gi=!0,Zi=document.createTextNode(""),new wr(_n).observe(Zi,{characterData:!0}),Zt=function(){Zi.data=Gi=!Gi}):Yi&&Yi.resolve?(Ki=Yi.resolve(void 0),yr=Ki.then,Zt=function(){yr.call(Ki,_n)}):Zt=function(){Js.call(C,_n)});var Kt,ei,_r=kr||function(i){var t={fn:i,next:void 0};Sn&&(Sn.next=t),Pt||(Pt=t,Zt()),Sn=t},Hs=function(t){var e,n;this.promise=new t(function(o,r){if(e!==void 0||n!==void 0)throw TypeError("Bad Promise constructor");e=o,n=r}),this.resolve=ft(e),this.reject=ft(n)},ti={f:function(t){return new Hs(t)}},ni=function(t,e){if(ze(t),Se(e)&&e.constructor===t)return e;var n=ti.f(t);return(0,n.resolve)(e),n.promise},ii=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},Sr=C.process,Pr=Sr&&Sr.versions,Rr=Pr&&Pr.v8;Rr?ei=(Kt=Rr.split("."))[0]+Kt[1]:Qn&&(!(Kt=Qn.match(/Edge\/(\d+)/))||Kt[1]>=74)&&(Kt=Qn.match(/Chrome\/(\d+)/))&&(ei=Kt[1]);var $i,Tr,Er,Ir,Lr=ei&&+ei,xr=pr.set,Vs=Fe("species"),$e="Promise",qr=ot.get,Gs=ot.set,Zs=ot.getterFor($e),Me=st,Br=C.TypeError,Qi=C.document,oi=C.process,Dr=ht("fetch"),Xt=ti.f,Ks=Xt,Pn=De(oi)=="process",Xs=!!(Qi&&Qi.createEvent&&C.dispatchEvent),Wr="unhandledrejection",Rn=Bo($e,function(){if(Le(Me)===String(Me)&&(Lr===66||!Pn&&typeof PromiseRejectionEvent!="function"))return!0;if(Lr>=51&&/native code/.test(Me))return!1;var i=Me.resolve(1),t=function(n){n(function(){},function(){})};return(i.constructor={})[Vs]=t,!(i.then(function(){})instanceof t)}),Ys=Rn||!function(i,t){if(!t&&!lr)return!1;var e=!1;try{var n={};n[sr]=function(){return{next:function(){return{done:e=!0}}}},i(n)}catch(o){}return e}(function(i){Me.all(i).catch(function(){})}),Or=function(t){var e;return!(!Se(t)||typeof(e=t.then)!="function")&&e},eo=function(t,e,n){if(!e.notified){e.notified=!0;var o=e.reactions;_r(function(){for(var r=e.value,a=e.state==1,l=0;o.length>l;){var u,d,h,v=o[l++],D=a?v.ok:v.fail,L=v.resolve,k=v.reject,q=v.domain;try{D?(a||(e.rejection===2&&Qs(t,e),e.rejection=1),D===!0?u=r:(q&&q.enter(),u=D(r),q&&(q.exit(),h=!0)),u===v.promise?k(Br("Promise-chain cycle")):(d=Or(u))?d.call(u,L,k):L(u)):k(r)}catch(ne){q&&!h&&q.exit(),k(ne)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&$s(t,e)})}},zr=function(t,e,n){var o,r;Xs?((o=Qi.createEvent("Event")).promise=e,o.reason=n,o.initEvent(t,!1,!0),C.dispatchEvent(o)):o={promise:e,reason:n},(r=C["on"+t])?r(o):t===Wr&&function(a,l){var u=C.console;u&&u.error&&(arguments.length===1?u.error(a):u.error(a,l))}("Unhandled promise rejection",n)},$s=function(t,e){xr.call(C,function(){var n,o=e.value;if(Fr(e)&&(n=ii(function(){Pn?oi.emit("unhandledRejection",o,t):zr(Wr,t,o)}),e.rejection=Pn||Fr(e)?2:1,n.error))throw n.value})},Fr=function(t){return t.rejection!==1&&!t.parent},Qs=function(t,e){xr.call(C,function(){Pn?oi.emit("rejectionHandled",t):zr("rejectionhandled",t,e.value)})},Yt=function(t,e,n,o){return function(r){t(e,n,r,o)}},$t=function(t,e,n,o){e.done||(e.done=!0,o&&(e=o),e.value=n,e.state=2,eo(t,e,!0))},Mr=function i(t,e,n,o){if(!e.done){e.done=!0,o&&(e=o);try{if(t===n)throw Br("Promise can't be resolved itself");var r=Or(n);r?_r(function(){var a={done:!1};try{r.call(n,Yt(i,t,a,e),Yt($t,t,a,e))}catch(l){$t(t,a,l,e)}}):(e.value=n,e.state=1,eo(t,e,!1))}catch(a){$t(t,{done:!1},a,e)}}};Rn&&(Me=function(t){(function(n,o,r){if(!(n instanceof o))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")})(this,Me,$e),ft(t),$i.call(this);var e=qr(this);try{t(Yt(Mr,this,e),Yt($t,this,e))}catch(n){$t(this,e,n)}},($i=function(t){Gs(this,{type:$e,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(i,t,e){for(var n in t)Ut(i,n,t[n],e);return i}(Me.prototype,{then:function(t,e){var n=Zs(this),o=Xt(dr(this,Me));return o.ok=typeof t!="function"||t,o.fail=typeof e=="function"&&e,o.domain=Pn?oi.domain:void 0,n.parent=!0,n.reactions.push(o),n.state!=0&&eo(this,n,!1),o.promise},catch:function(t){return this.then(void 0,t)}}),Tr=function(){var t=new $i,e=qr(t);this.promise=t,this.resolve=Yt(Mr,t,e),this.reject=Yt($t,t,e)},ti.f=Xt=function(t){return t===Me||t===Er?new Tr(t):Ks(t)},typeof st=="function"&&(Ir=st.prototype.then,Ut(st.prototype,"then",function(i,t){var e=this;return new Me(function(n,o){Ir.call(e,n,o)}).then(i,t)},{unsafe:!0}),typeof Dr=="function"&&rt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return ni(Me,Dr.apply(C,arguments))}}))),rt({global:!0,wrap:!0,forced:Rn},{Promise:Me}),Li(Me,$e,!1),function(i){var t=ht(i),e=de.f;p&&t&&!t[rr]&&e(t,rr,{configurable:!0,get:function(){return this}})}($e),Er=ht($e),rt({target:$e,stat:!0,forced:Rn},{reject:function(t){var e=Xt(this);return e.reject.call(void 0,t),e.promise}}),rt({target:$e,stat:!0,forced:Rn},{resolve:function(t){return ni(this,t)}}),rt({target:$e,stat:!0,forced:Ys},{all:function(t){var e=this,n=Xt(e),o=n.resolve,r=n.reject,a=ii(function(){var l=ft(e.resolve),u=[],d=0,h=1;Fi(t,function(v){var D=d++,L=!1;u.push(void 0),h++,l.call(e,v).then(function(k){L||(L=!0,u[D]=k,--h||o(u))},r)}),--h||o(u)});return a.error&&r(a.value),n.promise},race:function(t){var e=this,n=Xt(e),o=n.reject,r=ii(function(){var a=ft(e.resolve);Fi(t,function(l){a.call(e,l).then(n.resolve,o)})});return r.error&&o(r.value),n.promise}}),rt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=ti.f(e),o=n.resolve,r=n.reject,a=ii(function(){var l=ft(e.resolve),u=[],d=0,h=1;Fi(t,function(v){var D=d++,L=!1;u.push(void 0),h++,l.call(e,v).then(function(k){L||(L=!0,u[D]={status:"fulfilled",value:k},--h||o(u))},function(k){L||(L=!0,u[D]={status:"rejected",reason:k},--h||o(u))})}),--h||o(u)});return a.error&&r(a.value),n.promise}});var el=!!st&&B(function(){st.prototype.finally.call({then:function(){}},function(){})});rt({target:"Promise",proto:!0,real:!0,forced:el},{finally:function(t){var e=dr(this,ht("Promise")),n=typeof t=="function";return this.then(n?function(o){return ni(e,t()).then(function(){return o})}:t,n?function(o){return ni(e,t()).then(function(){throw o})}:t)}}),typeof st!="function"||st.prototype.finally||Ut(st.prototype,"finally",ht("Promise").prototype.finally),yn.Promise;var Nr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),tl=new Uint8Array(16);function nl(){if(!Nr)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nr(tl)}var il=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ol(i){return typeof i=="string"&&il.test(i)}for(var qe=[],to=0;to<256;++to)qe.push((to+256).toString(16).substr(1));function vt(i,t,e){var n=(i=i||{}).random||(i.rng||nl)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=n[o];return t}return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(qe[r[a+0]]+qe[r[a+1]]+qe[r[a+2]]+qe[r[a+3]]+"-"+qe[r[a+4]]+qe[r[a+5]]+"-"+qe[r[a+6]]+qe[r[a+7]]+"-"+qe[r[a+8]]+qe[r[a+9]]+"-"+qe[r[a+10]]+qe[r[a+11]]+qe[r[a+12]]+qe[r[a+13]]+qe[r[a+14]]+qe[r[a+15]]).toLowerCase();if(!ol(l))throw TypeError("Stringified UUID is invalid");return l}(n)}var no,io,rl="3.4.5",al=typeof atob=="function",sl=typeof btoa=="function",Qt=typeof tt=="function",Tn=function(i){if(Array.isArray(i))return w(i)}(no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")||function(i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i))return Array.from(i)}(no)||function(i,t){if(i){if(typeof i=="string")return w(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?w(i,t):void 0}}(no)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(),ri=(io={},Tn.forEach(function(i,t){return io[i]=t}),io),ll=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ai=String.fromCharCode.bind(String),Ar=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(e){return e};return new Uint8Array(Array.prototype.slice.call(i,0).map(t))},Ur=function(t){return t.replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=+$/m,"")},jr=function(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")},Jr=function(t){for(var e,n,o,r,a="",l=t.length%3,u=0;u<t.length;){if((n=t.charCodeAt(u++))>255||(o=t.charCodeAt(u++))>255||(r=t.charCodeAt(u++))>255)throw new TypeError("invalid character found");a+=Tn[(e=n<<16|o<<8|r)>>18&63]+Tn[e>>12&63]+Tn[e>>6&63]+Tn[63&e]}return l?a.slice(0,l-3)+"===".substring(l):a},oo=sl?function(i){return btoa(i)}:Qt?function(i){return tt.from(i,"binary").toString("base64")}:Jr,Hr=Qt?function(i){return tt.from(i).toString("base64")}:function(i){for(var t=[],e=0,n=i.length;e<n;e+=4096)t.push(ai.apply(null,i.subarray(e,e+4096)));return oo(t.join(""))},si=function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return e?Ur(Hr(t)):Hr(t)},Vr=function(t){return unescape(encodeURIComponent(t))},Gr=Qt?function(i){return tt.from(i,"utf8").toString("base64")}:function(i){return oo(Vr(i))},en=function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return e?Ur(Gr(t)):Gr(t)},Zr=function(t){return en(t,!0)},Kr=function(t){return decodeURIComponent(escape(t))},Xr=function(t){if(t=t.replace(/\s+/g,""),!ll.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));for(var e,n,o,r="",a=0;a<t.length;)e=ri[t.charAt(a++)]<<18|ri[t.charAt(a++)]<<12|(n=ri[t.charAt(a++)])<<6|(o=ri[t.charAt(a++)]),r+=n===64?ai(e>>16&255):o===64?ai(e>>16&255,e>>8&255):ai(e>>16&255,e>>8&255,255&e);return r},ro=al?function(i){return atob(jr(i))}:Qt?function(i){return tt.from(i,"base64").toString("binary")}:Xr,ul=Qt?function(i){return tt.from(i,"base64").toString("utf8")}:function(i){return Kr(ro(i))},ao=function(t){return jr(t.replace(/[-_]/g,function(e){return e=="-"?"+":"/"}))},so=function(t){return ul(ao(t))},Yr=Qt?function(i){return Ar(tt.from(ao(i),"base64"))}:function(i){return Ar(ro(ao(i)),function(t){return t.charCodeAt(0)})},$r=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}},Qr=function(){var t=function(n,o){return Object.defineProperty(String.prototype,n,$r(o))};t("fromBase64",function(){return so(this)}),t("toBase64",function(e){return en(this,e)}),t("toBase64URI",function(){return en(this,!0)}),t("toBase64URL",function(){return en(this,!0)}),t("toUint8Array",function(){return Yr(this)})},ea=function(){var t=function(n,o){return Object.defineProperty(Uint8Array.prototype,n,$r(o))};t("toBase64",function(e){return si(this,e)}),t("toBase64URI",function(){return si(this,!0)}),t("toBase64URL",function(){return si(this,!0)})},cl={version:rl,VERSION:"3.4.5",atob:ro,atobPolyfill:Xr,btoa:oo,btoaPolyfill:Jr,fromBase64:so,toBase64:en,encode:en,encodeURI:Zr,encodeURL:Zr,utob:Vr,btou:Kr,decode:so,fromUint8Array:si,toUint8Array:Yr,extendString:Qr,extendUint8Array:ea,extendBuiltins:function(){Qr(),ea()}},j=new(function(){function i(){b(this,i),this.oBase64=cl}return c(i,[{key:"browser",value:function(){var e=navigator.userAgent.toLowerCase(),n=/(edge)[/]([\w.]+)/.exec(e)||/(chrome)[/]([\w.]+)/.exec(e)||/(safari)[/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[/]([\w.]+)/.exec(e)||/(trident.*rv:)([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||["unknow","0"];n.length>0&&n[1].indexOf("trident")>-1&&(n[1]="msie");var o={};return o[n[1]]=!0,o.version=n[2],o}},{key:"getCreateWndMode",value:function(){var e=navigator.userAgent,n=navigator.platform,o=n==="Win64"||n==="Win32"||n==="Windows",r=this.browser(),a=!0;return window.top!==window?a=!1:o?(e.indexOf("Windows NT 10.0")>-1&&r.mozilla&&(a=!1),r.edge&&(a=!1)):a=!1,a}},{key:"getWndPostion",value:function(e,n,o){var r=0,a=0,l=e.getBoundingClientRect(),u=e.ownerDocument.defaultView,d=l.top+u.pageYOffset,h=l.left+u.pageXOffset,v=this.getDevicePixelRatio(),D=window.getComputedStyle(e),L=parseInt(D["border-left-width"].slice(0,-2),10),k=parseInt(D["border-top-width"].slice(0,-2),10);if(n)if(this.browser().msie){var q=window,ne=q.outerWidth-q.innerWidth-(q.screenLeft-q.screenX);r=h+(q.screenLeft-q.screenX)+L-ne,a=d+(q.screenTop-q.screenY)+k}else{var Z=0,te=0,M=Math.round((window.outerWidth-window.innerWidth)/2);this.isWindows()&&this.browser().chrome&&(M===-8||window.screen.height-window.outerHeight==0?M===-8&&(Z=8,te=8):M===8?Z=-5:M===0&&(te=8)),this.browser().mozilla&&(M===7||M===6?Z=-6:M===8&&(Z=-8)),r=h+M+L+Z,a=d+(window.outerHeight-window.innerHeight-M)+k+te}else{var A=window.top,z=0,$=0,K=0,V=0;try{z=A.outerWidth-A.innerWidth,$=A.outerHeight-A.innerHeight,K=A.screenLeft-A.screenX,V=A.screenTop-A.screenY}catch(we){z=o.outerWidth-o.innerWidth,$=o.outerHeight-o.innerHeight,K=o.screenLeft-o.screenX,V=o.screenTop-o.screenY}if(this.browser().msie)r=h+K+L-0,a=d+V+k;else{var ie=z/2;r=h+ie+L,a=d+($-ie)+k,this.browser().chrome&&ie===0&&(r+=8,a+=8)}}this.isWindows()&&(this.browser().chrome||this.browser().safari)&&(r=h+L,a=d+k);var ye=0,X=0;return(!this.browser().msie||this.browser().msie&&this.browser().version==="11.0")&&(ye=window.scrollX||window.pageXOffset,X=window.scrollY||window.pageYOffset),{left:r=Math.round((r-ye)*v),top:a=Math.round((a-X)*v)}}},{key:"detectPort",value:function(e,n,o){var r="HikCentralWebControlPort:".concat(e,"-").concat(n),a=this,l=0,u=!1,d=null;sessionStorage&&(d=sessionStorage.getItem(r))!==null&&(d=parseInt(d,10));for(var h=[],v=e;v<=n;v++)v!==d&&h.push(v);d!==null&&h.unshift(d);for(var D=[],L=function(){l>0&&clearTimeout(l)},k=function(){for(var z=0,$=D.length;z<$;z++)delete D[z]},q=0,ne=new Date().getTime(),Z=function(z,$){setTimeout(function(){D.push(a.createImageHttp(h[$],{timeStamp:ne+$,success:function(V){(function(ie){sessionStorage&&sessionStorage.setItem(r,ie),!u&&o.success&&(L(),k(),o.success(ie))})(V)},error:function(){q++,h.length===q&&!u&&o.error&&(L(),k(),o.error())}}))},100)},te=0,M=h.length;te<M;te++)Z(0,te);l=setTimeout(function(){u=!0,o.error&&(k(),o.error())},6e4)}},{key:"createImageHttp",value:function(e,n){var o=new Image;return o.onload=function(){n.success&&n.success(e)},o.onerror=function(){n.error&&n.error()},o.onabort=function(){n.abort&&n.abort()},o.src="http://127.0.0.1:".concat(e,"/imghttp/local?update=").concat(n.timeStamp),o}},{key:"utf8to16",value:function(e){for(var n,o,r,a="",l=0,u=e.length;l<u;)switch((n=e.charCodeAt(l++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=e.charAt(l-1);break;case 12:case 13:o=e.charCodeAt(l++),a+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=e.charCodeAt(l++),r=e.charCodeAt(l++),a+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&r)<<0)}return a}},{key:"createEventScript",value:function(e,n,o){var r=document.createElement("script");r.htmlFor=e,r.event=n,r.innerHTML=o,document.getElementById(e).appendChild(r)}},{key:"isMacOS",value:function(){return navigator.platform==="MacIntel"}},{key:"isWindows",value:function(){return navigator.platform.indexOf("Win")>-1}},{key:"getDevicePixelRatio",value:function(){var e=1;return this.isMacOS()||(e=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),e}},{key:"Base64",value:function(){return this.oBase64||{}}}]),i}()),lo=function(){function i(t){b(this,i),this.oOptions=Object.assign({iPort:-1,cbConnectSuccess:null,cbConnectError:null,cbConnectClose:null},t),this.oWebSocket=null,this.szUUID="",this.szVersion="",this.oRequestList={},this.bNormalClose=!1,this.oWindowControlCallback={},this.oSadpCallback={},this.oSliceCallback={},this.oSerialCallback={},this.oUIControlCallback={},this.oUpgradeCallback={},this.init()}return c(i,[{key:"init",value:function(){var e=this,n=function(){e.oOptions.cbConnectClose&&e.oOptions.cbConnectClose(e.bNormalClose),e.bNormalClose=!1};e.oWebSocket=new WebSocket("ws://127.0.0.1:".concat(e.oOptions.iPort)),e.oWebSocket.onerror=function(){},e.oWebSocket.onopen=function(){var o={sequence:vt(),cmd:"system.connect"},r=JSON.stringify(o);e.oWebSocket.send(r)},e.oWebSocket.onmessage=function(o){var r=o.data,a=JSON.parse(r),l=a.sequence;l===void 0&&a.cmd===void 0?(e.szUUID=a.uuid,e.szVersion=a.version,e.oOptions.cbConnectSuccess&&e.oOptions.cbConnectSuccess()):a.cmd!==void 0?e.parseCmd(a):e.oRequestList[l]!==void 0&&(a.errorModule===0&&a.errorCode===0?e.oRequestList[l].resolve(a):e.oRequestList[l].reject(a),delete e.oRequestList[l])},e.oWebSocket.onclose=function(){e.oWebSocket=null,j.browser().mozilla?setTimeout(function(){n()},100):n()}}},{key:"setWindowControlCallback",value:function(e){this.oWindowControlCallback=e}},{key:"setSadpCallback",value:function(e){this.oSadpCallback=e}},{key:"setSliceCallback",value:function(e){this.oSliceCallback=e}},{key:"setSerialCallback",value:function(e){this.oSerialCallback=e}},{key:"setUIControlCallback",value:function(e){this.oUIControlCallback=e}},{key:"setUpgradeCallback",value:function(e){this.oUpgradeCallback=e}},{key:"getServiceVersion",value:function(){return this.szVersion}},{key:"getRequestUUID",value:function(){return this.szUUID}},{key:"disconnect",value:function(){this.bNormalClose=!0,this.oWebSocket&&WebSocket.OPEN===this.oWebSocket.readyState&&(this.oWebSocket.close(),delete this.oWebSocket)}},{key:"sendRequest",value:function(e){var n=this;return new Promise(function(o,r){var a=vt();e.sequence=a,n.oRequestList[a]={resolve:o,reject:r},e.uuid=n.szUUID,e.timestamp="".concat(new Date().getTime());var l=JSON.stringify(e);n.oWebSocket&&WebSocket.OPEN===n.oWebSocket.readyState?n.oWebSocket.send(l):r()})}},{key:"parseCmd",value:function(e){var n=e.cmd.split("."),o=n[1].replace(/^[a-z]{1}/g,function(r){return r.toUpperCase()});n[0]==="window"||n[0]==="play"?this.oWindowControlCallback["cb".concat(o)]&&this.oWindowControlCallback["cb".concat(o)](e):n[0]==="sadp"?this.oSadpCallback["cb".concat(o)]&&this.oSadpCallback["cb".concat(o)](e):n[0]==="serial"?this.oSerialCallback["cb".concat(o)]&&this.oSerialCallback["cb".concat(o)](e):n[0]==="slice"?this.oSliceCallback["cb".concat(o)]&&this.oSliceCallback["cb".concat(o)](e):n[0]==="ui"?this.oUIControlCallback["cb".concat(o)]&&this.oUIControlCallback["cb".concat(o)](e):n[0]==="upgrade"&&this.oUpgradeCallback["cb".concat(o)]&&this.oUpgradeCallback["cb".concat(o)](e)}}]),i}(),ee=E(function(i,t){var e=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function n(a,l){return Object.prototype.hasOwnProperty.call(a,l)}t.assign=function(a){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var u=l.shift();if(u){if(ue(u)!=="object")throw new TypeError(u+"must be non-object");for(var d in u)n(u,d)&&(a[d]=u[d])}}return a},t.shrinkBuf=function(a,l){return a.length===l?a:a.subarray?a.subarray(0,l):(a.length=l,a)};var o={arraySet:function(l,u,d,h,v){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),v);else for(var D=0;D<h;D++)l[v+D]=u[d+D]},flattenChunks:function(l){var u,d,h,v,D,L;for(h=0,u=0,d=l.length;u<d;u++)h+=l[u].length;for(L=new Uint8Array(h),v=0,u=0,d=l.length;u<d;u++)D=l[u],L.set(D,v),v+=D.length;return L}},r={arraySet:function(l,u,d,h,v){for(var D=0;D<h;D++)l[v+D]=u[d+D]},flattenChunks:function(l){return[].concat.apply([],l)}};t.setTyped=function(a){a?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(e)});function tn(i){for(var t=i.length;--t>=0;)i[t]=0}var uo=256,ta=286,En=30,In=15,co=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],li=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],dl=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],na=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],lt=new Array(576);tn(lt);var Ln=new Array(60);tn(Ln);var xn=new Array(512);tn(xn);var qn=new Array(256);tn(qn);var ho=new Array(29);tn(ho);var ia,oa,ra,ui=new Array(En);function fo(i,t,e,n,o){this.static_tree=i,this.extra_bits=t,this.extra_base=e,this.elems=n,this.max_length=o,this.has_stree=i&&i.length}function vo(i,t){this.dyn_tree=i,this.max_code=0,this.stat_desc=t}function aa(i){return i<256?xn[i]:xn[256+(i>>>7)]}function Bn(i,t){i.pending_buf[i.pending++]=255&t,i.pending_buf[i.pending++]=t>>>8&255}function Ne(i,t,e){i.bi_valid>16-e?(i.bi_buf|=t<<i.bi_valid&65535,Bn(i,i.bi_buf),i.bi_buf=t>>16-i.bi_valid,i.bi_valid+=e-16):(i.bi_buf|=t<<i.bi_valid&65535,i.bi_valid+=e)}function Qe(i,t,e){Ne(i,e[2*t],e[2*t+1])}function sa(i,t){var e=0;do e|=1&i,i>>>=1,e<<=1;while(--t>0);return e>>>1}function la(i,t,e){var n,o,r=new Array(16),a=0;for(n=1;n<=In;n++)r[n]=a=a+e[n-1]<<1;for(o=0;o<=t;o++){var l=i[2*o+1];l!==0&&(i[2*o]=sa(r[l]++,l))}}function ua(i){var t;for(t=0;t<ta;t++)i.dyn_ltree[2*t]=0;for(t=0;t<En;t++)i.dyn_dtree[2*t]=0;for(t=0;t<19;t++)i.bl_tree[2*t]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function ca(i){i.bi_valid>8?Bn(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function da(i,t,e,n){var o=2*t,r=2*e;return i[o]<i[r]||i[o]===i[r]&&n[t]<=n[e]}function go(i,t,e){for(var n=i.heap[e],o=e<<1;o<=i.heap_len&&(o<i.heap_len&&da(t,i.heap[o+1],i.heap[o],i.depth)&&o++,!da(t,n,i.heap[o],i.depth));)i.heap[e]=i.heap[o],e=o,o<<=1;i.heap[e]=n}function ha(i,t,e){var n,o,r,a,l=0;if(i.last_lit!==0)do n=i.pending_buf[i.d_buf+2*l]<<8|i.pending_buf[i.d_buf+2*l+1],o=i.pending_buf[i.l_buf+l],l++,n===0?Qe(i,o,t):(Qe(i,(r=qn[o])+uo+1,t),(a=co[r])!==0&&Ne(i,o-=ho[r],a),Qe(i,r=aa(--n),e),(a=li[r])!==0&&Ne(i,n-=ui[r],a));while(l<i.last_lit);Qe(i,256,t)}function mo(i,t){var e,n,o,r=t.dyn_tree,a=t.stat_desc.static_tree,l=t.stat_desc.has_stree,u=t.stat_desc.elems,d=-1;for(i.heap_len=0,i.heap_max=573,e=0;e<u;e++)r[2*e]!==0?(i.heap[++i.heap_len]=d=e,i.depth[e]=0):r[2*e+1]=0;for(;i.heap_len<2;)r[2*(o=i.heap[++i.heap_len]=d<2?++d:0)]=1,i.depth[o]=0,i.opt_len--,l&&(i.static_len-=a[2*o+1]);for(t.max_code=d,e=i.heap_len>>1;e>=1;e--)go(i,r,e);o=u;do e=i.heap[1],i.heap[1]=i.heap[i.heap_len--],go(i,r,1),n=i.heap[1],i.heap[--i.heap_max]=e,i.heap[--i.heap_max]=n,r[2*o]=r[2*e]+r[2*n],i.depth[o]=(i.depth[e]>=i.depth[n]?i.depth[e]:i.depth[n])+1,r[2*e+1]=r[2*n+1]=o,i.heap[1]=o++,go(i,r,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(h,v){var D,L,k,q,ne,Z,te=v.dyn_tree,M=v.max_code,A=v.stat_desc.static_tree,z=v.stat_desc.has_stree,$=v.stat_desc.extra_bits,K=v.stat_desc.extra_base,V=v.stat_desc.max_length,ie=0;for(q=0;q<=In;q++)h.bl_count[q]=0;for(te[2*h.heap[h.heap_max]+1]=0,D=h.heap_max+1;D<573;D++)(q=te[2*te[2*(L=h.heap[D])+1]+1]+1)>V&&(q=V,ie++),te[2*L+1]=q,L>M||(h.bl_count[q]++,ne=0,L>=K&&(ne=$[L-K]),Z=te[2*L],h.opt_len+=Z*(q+ne),z&&(h.static_len+=Z*(A[2*L+1]+ne)));if(ie!==0){do{for(q=V-1;h.bl_count[q]===0;)q--;h.bl_count[q]--,h.bl_count[q+1]+=2,h.bl_count[V]--,ie-=2}while(ie>0);for(q=V;q!==0;q--)for(L=h.bl_count[q];L!==0;)(k=h.heap[--D])>M||(te[2*k+1]!==q&&(h.opt_len+=(q-te[2*k+1])*te[2*k],te[2*k+1]=q),L--)}}(i,t),la(r,d,i.bl_count)}function fa(i,t,e){var n,o,r=-1,a=t[1],l=0,u=7,d=4;for(a===0&&(u=138,d=3),t[2*(e+1)+1]=65535,n=0;n<=e;n++)o=a,a=t[2*(n+1)+1],++l<u&&o===a||(l<d?i.bl_tree[2*o]+=l:o!==0?(o!==r&&i.bl_tree[2*o]++,i.bl_tree[32]++):l<=10?i.bl_tree[34]++:i.bl_tree[36]++,l=0,r=o,a===0?(u=138,d=3):o===a?(u=6,d=3):(u=7,d=4))}function va(i,t,e){var n,o,r=-1,a=t[1],l=0,u=7,d=4;for(a===0&&(u=138,d=3),n=0;n<=e;n++)if(o=a,a=t[2*(n+1)+1],!(++l<u&&o===a)){if(l<d)do Qe(i,o,i.bl_tree);while(--l!=0);else o!==0?(o!==r&&(Qe(i,o,i.bl_tree),l--),Qe(i,16,i.bl_tree),Ne(i,l-3,2)):l<=10?(Qe(i,17,i.bl_tree),Ne(i,l-3,3)):(Qe(i,18,i.bl_tree),Ne(i,l-11,7));l=0,r=o,a===0?(u=138,d=3):o===a?(u=6,d=3):(u=7,d=4)}}tn(ui);var ga=!1;function ma(i,t,e,n){Ne(i,0+(n?1:0),3),function(o,r,a,l){ca(o),l&&(Bn(o,a),Bn(o,~a)),ee.arraySet(o.pending_buf,o.window,r,a,o.pending),o.pending+=a}(i,t,e,!0)}var Ve={_tr_init:function(t){ga||(function(){var e,n,o,r,a,l=new Array(16);for(o=0,r=0;r<28;r++)for(ho[r]=o,e=0;e<1<<co[r];e++)qn[o++]=r;for(qn[o-1]=r,a=0,r=0;r<16;r++)for(ui[r]=a,e=0;e<1<<li[r];e++)xn[a++]=r;for(a>>=7;r<En;r++)for(ui[r]=a<<7,e=0;e<1<<li[r]-7;e++)xn[256+a++]=r;for(n=0;n<=In;n++)l[n]=0;for(e=0;e<=143;)lt[2*e+1]=8,e++,l[8]++;for(;e<=255;)lt[2*e+1]=9,e++,l[9]++;for(;e<=279;)lt[2*e+1]=7,e++,l[7]++;for(;e<=287;)lt[2*e+1]=8,e++,l[8]++;for(la(lt,287,l),e=0;e<En;e++)Ln[2*e+1]=5,Ln[2*e]=sa(e,5);ia=new fo(lt,co,257,ta,In),oa=new fo(Ln,li,0,En,In),ra=new fo(new Array(0),dl,0,19,7)}(),ga=!0),t.l_desc=new vo(t.dyn_ltree,ia),t.d_desc=new vo(t.dyn_dtree,oa),t.bl_desc=new vo(t.bl_tree,ra),t.bi_buf=0,t.bi_valid=0,ua(t)},_tr_stored_block:ma,_tr_flush_block:function(t,e,n,o){var r,a,l=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=function(u){var d,h=4093624447;for(d=0;d<=31;d++,h>>>=1)if(1&h&&u.dyn_ltree[2*d]!==0)return 0;if(u.dyn_ltree[18]!==0||u.dyn_ltree[20]!==0||u.dyn_ltree[26]!==0)return 1;for(d=32;d<uo;d++)if(u.dyn_ltree[2*d]!==0)return 1;return 0}(t)),mo(t,t.l_desc),mo(t,t.d_desc),l=function(u){var d;for(fa(u,u.dyn_ltree,u.l_desc.max_code),fa(u,u.dyn_dtree,u.d_desc.max_code),mo(u,u.bl_desc),d=18;d>=3&&u.bl_tree[2*na[d]+1]===0;d--);return u.opt_len+=3*(d+1)+5+5+4,d}(t),r=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=r&&(r=a)):r=a=n+5,n+4<=r&&e!==-1?ma(t,e,n,o):t.strategy===4||a===r?(Ne(t,2+(o?1:0),3),ha(t,lt,Ln)):(Ne(t,4+(o?1:0),3),function(u,d,h,v){var D;for(Ne(u,d-257,5),Ne(u,h-1,5),Ne(u,v-4,4),D=0;D<v;D++)Ne(u,u.bl_tree[2*na[D]+1],3);va(u,u.dyn_ltree,d-1),va(u,u.dyn_dtree,h-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),ha(t,t.dyn_ltree,t.dyn_dtree)),ua(t),o&&ca(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,e===0?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(qn[n]+uo+1)]++,t.dyn_dtree[2*aa(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){Ne(t,2,3),Qe(t,256,lt),function(e){e.bi_valid===16?(Bn(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(t)}},Dn=function(t,e,n,o){for(var r=65535&t|0,a=t>>>16&65535|0,l=0;n!==0;){n-=l=n>2e3?2e3:n;do a=a+(r=r+e[o++]|0)|0;while(--l);r%=65521,a%=65521}return r|a<<16|0},hl=function(){for(var i,t=[],e=0;e<256;e++){i=e;for(var n=0;n<8;n++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}return t}(),nn,xe=function(t,e,n,o){var r=hl,a=o+n;t^=-1;for(var l=o;l<a;l++)t=t>>>8^r[255&(t^e[l])];return-1^t},Rt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ge=-2,Tt=258,Xe=262,ci=103,Et=113,Wn=666;function gt(i,t){return i.msg=Rt[t],t}function ya(i){return(i<<1)-(i>4?9:0)}function mt(i){for(var t=i.length;--t>=0;)i[t]=0}function yt(i){var t=i.state,e=t.pending;e>i.avail_out&&(e=i.avail_out),e!==0&&(ee.arraySet(i.output,t.pending_buf,t.pending_out,e,i.next_out),i.next_out+=e,t.pending_out+=e,i.total_out+=e,i.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))}function Be(i,t){Ve._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,t),i.block_start=i.strstart,yt(i.strm)}function ge(i,t){i.pending_buf[i.pending++]=t}function On(i,t){i.pending_buf[i.pending++]=t>>>8&255,i.pending_buf[i.pending++]=255&t}function pa(i,t){var e,n,o=i.max_chain_length,r=i.strstart,a=i.prev_length,l=i.nice_match,u=i.strstart>i.w_size-Xe?i.strstart-(i.w_size-Xe):0,d=i.window,h=i.w_mask,v=i.prev,D=i.strstart+Tt,L=d[r+a-1],k=d[r+a];i.prev_length>=i.good_match&&(o>>=2),l>i.lookahead&&(l=i.lookahead);do if(d[(e=t)+a]===k&&d[e+a-1]===L&&d[e]===d[r]&&d[++e]===d[r+1]){r+=2,e++;do;while(d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&d[++r]===d[++e]&&r<D);if(n=Tt-(D-r),r=D-Tt,n>a){if(i.match_start=t,a=n,n>=l)break;L=d[r+a-1],k=d[r+a]}}while((t=v[t&h])>u&&--o!=0);return a<=i.lookahead?a:i.lookahead}function It(i){var t,e,n,o,r,a,l,u,d,h,v=i.w_size;do{if(o=i.window_size-i.lookahead-i.strstart,i.strstart>=v+(v-Xe)){ee.arraySet(i.window,i.window,v,v,0),i.match_start-=v,i.strstart-=v,i.block_start-=v,t=e=i.hash_size;do n=i.head[--t],i.head[t]=n>=v?n-v:0;while(--e);t=e=v;do n=i.prev[--t],i.prev[t]=n>=v?n-v:0;while(--e);o+=v}if(i.strm.avail_in===0)break;if(a=i.strm,l=i.window,u=i.strstart+i.lookahead,d=o,h=void 0,(h=a.avail_in)>d&&(h=d),e=h===0?0:(a.avail_in-=h,ee.arraySet(l,a.input,a.next_in,h,u),a.state.wrap===1?a.adler=Dn(a.adler,l,h,u):a.state.wrap===2&&(a.adler=xe(a.adler,l,h,u)),a.next_in+=h,a.total_in+=h,h),i.lookahead+=e,i.lookahead+i.insert>=3)for(r=i.strstart-i.insert,i.ins_h=i.window[r],i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+3-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<Xe&&i.strm.avail_in!==0)}function yo(i,t){for(var e,n;;){if(i.lookahead<Xe){if(It(i),i.lookahead<Xe&&t===0)return 1;if(i.lookahead===0)break}if(e=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),e!==0&&i.strstart-e<=i.w_size-Xe&&(i.match_length=pa(i,e)),i.match_length>=3)if(n=Ve._tr_tally(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!=0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else n=Ve._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(Be(i,!1),i.strm.avail_out===0))return 1}return i.insert=i.strstart<2?i.strstart:2,t===4?(Be(i,!0),i.strm.avail_out===0?3:4):i.last_lit&&(Be(i,!1),i.strm.avail_out===0)?1:2}function on(i,t){for(var e,n,o;;){if(i.lookahead<Xe){if(It(i),i.lookahead<Xe&&t===0)return 1;if(i.lookahead===0)break}if(e=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,e!==0&&i.prev_length<i.max_lazy_match&&i.strstart-e<=i.w_size-Xe&&(i.match_length=pa(i,e),i.match_length<=5&&(i.strategy===1||i.match_length===3&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){o=i.strstart+i.lookahead-3,n=Ve._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=o&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!=0);if(i.match_available=0,i.match_length=2,i.strstart++,n&&(Be(i,!1),i.strm.avail_out===0))return 1}else if(i.match_available){if((n=Ve._tr_tally(i,0,i.window[i.strstart-1]))&&Be(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=Ve._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,t===4?(Be(i,!0),i.strm.avail_out===0?3:4):i.last_lit&&(Be(i,!1),i.strm.avail_out===0)?1:2}function et(i,t,e,n,o){this.good_length=i,this.max_lazy=t,this.nice_length=e,this.max_chain=n,this.func=o}function fl(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ee.Buf16(1146),this.dyn_dtree=new ee.Buf16(122),this.bl_tree=new ee.Buf16(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ee.Buf16(16),this.heap=new ee.Buf16(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ee.Buf16(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function wa(i){var t;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=2,(t=i.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:Et,i.adler=t.wrap===2?0:1,t.last_flush=0,Ve._tr_init(t),0):gt(i,Ge)}function ba(i){var t,e=wa(i);return e===0&&((t=i.state).window_size=2*t.w_size,mt(t.head),t.max_lazy_match=nn[t.level].max_lazy,t.good_match=nn[t.level].good_length,t.nice_match=nn[t.level].nice_length,t.max_chain_length=nn[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),e}function Ca(i,t,e,n,o,r){if(!i)return Ge;var a=1;if(t===-1&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>9||e!==8||n<8||n>15||t<0||t>9||r<0||r>4)return gt(i,Ge);n===8&&(n=9);var l=new fl;return i.state=l,l.strm=i,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new ee.Buf8(2*l.w_size),l.head=new ee.Buf16(l.hash_size),l.prev=new ee.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new ee.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=r,l.method=e,ba(i)}nn=[new et(0,0,0,0,function(i,t){var e=65535;for(e>i.pending_buf_size-5&&(e=i.pending_buf_size-5);;){if(i.lookahead<=1){if(It(i),i.lookahead===0&&t===0)return 1;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var n=i.block_start+e;if((i.strstart===0||i.strstart>=n)&&(i.lookahead=i.strstart-n,i.strstart=n,Be(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-Xe&&(Be(i,!1),i.strm.avail_out===0))return 1}return i.insert=0,t===4?(Be(i,!0),i.strm.avail_out===0?3:4):(i.strstart>i.block_start&&(Be(i,!1),i.strm.avail_out),1)}),new et(4,4,8,4,yo),new et(4,5,16,8,yo),new et(4,6,32,32,yo),new et(4,4,16,16,on),new et(8,16,32,32,on),new et(8,16,128,128,on),new et(8,32,128,256,on),new et(32,128,258,1024,on),new et(32,258,258,4096,on)];var zn={deflateInit:function(t,e){return Ca(t,e,8,15,8,0)},deflateInit2:Ca,deflateReset:ba,deflateResetKeep:wa,deflateSetHeader:function(t,e){return t&&t.state?t.state.wrap!==2?Ge:(t.state.gzhead=e,0):Ge},deflate:function(t,e){var n,o,r,a;if(!t||!t.state||e>5||e<0)return t?gt(t,Ge):Ge;if(o=t.state,!t.output||!t.input&&t.avail_in!==0||o.status===Wn&&e!==4)return gt(t,t.avail_out===0?-5:Ge);if(o.strm=t,n=o.last_flush,o.last_flush=e,o.status===42)if(o.wrap===2)t.adler=0,ge(o,31),ge(o,139),ge(o,8),o.gzhead?(ge(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),ge(o,255&o.gzhead.time),ge(o,o.gzhead.time>>8&255),ge(o,o.gzhead.time>>16&255),ge(o,o.gzhead.time>>24&255),ge(o,o.level===9?2:o.strategy>=2||o.level<2?4:0),ge(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(ge(o,255&o.gzhead.extra.length),ge(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=xe(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(ge(o,0),ge(o,0),ge(o,0),ge(o,0),ge(o,0),ge(o,o.level===9?2:o.strategy>=2||o.level<2?4:0),ge(o,3),o.status=Et);else{var l=8+(o.w_bits-8<<4)<<8;l|=(o.strategy>=2||o.level<2?0:o.level<6?1:o.level===6?2:3)<<6,o.strstart!==0&&(l|=32),l+=31-l%31,o.status=Et,On(o,l),o.strstart!==0&&(On(o,t.adler>>>16),On(o,65535&t.adler)),t.adler=1}if(o.status===69)if(o.gzhead.extra){for(r=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>r&&(t.adler=xe(t.adler,o.pending_buf,o.pending-r,r)),yt(t),r=o.pending,o.pending!==o.pending_buf_size));)ge(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>r&&(t.adler=xe(t.adler,o.pending_buf,o.pending-r,r)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(o.status===73)if(o.gzhead.name){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(t.adler=xe(t.adler,o.pending_buf,o.pending-r,r)),yt(t),r=o.pending,o.pending===o.pending_buf_size)){a=1;break}a=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,ge(o,a)}while(a!==0);o.gzhead.hcrc&&o.pending>r&&(t.adler=xe(t.adler,o.pending_buf,o.pending-r,r)),a===0&&(o.gzindex=0,o.status=91)}else o.status=91;if(o.status===91)if(o.gzhead.comment){r=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>r&&(t.adler=xe(t.adler,o.pending_buf,o.pending-r,r)),yt(t),r=o.pending,o.pending===o.pending_buf_size)){a=1;break}a=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,ge(o,a)}while(a!==0);o.gzhead.hcrc&&o.pending>r&&(t.adler=xe(t.adler,o.pending_buf,o.pending-r,r)),a===0&&(o.status=ci)}else o.status=ci;if(o.status===ci&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&yt(t),o.pending+2<=o.pending_buf_size&&(ge(o,255&t.adler),ge(o,t.adler>>8&255),t.adler=0,o.status=Et)):o.status=Et),o.pending!==0){if(yt(t),t.avail_out===0)return o.last_flush=-1,0}else if(t.avail_in===0&&ya(e)<=ya(n)&&e!==4)return gt(t,-5);if(o.status===Wn&&t.avail_in!==0)return gt(t,-5);if(t.avail_in!==0||o.lookahead!==0||e!==0&&o.status!==Wn){var u=o.strategy===2?function(d,h){for(var v;;){if(d.lookahead===0&&(It(d),d.lookahead===0)){if(h===0)return 1;break}if(d.match_length=0,v=Ve._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,v&&(Be(d,!1),d.strm.avail_out===0))return 1}return d.insert=0,h===4?(Be(d,!0),d.strm.avail_out===0?3:4):d.last_lit&&(Be(d,!1),d.strm.avail_out===0)?1:2}(o,e):o.strategy===3?function(d,h){for(var v,D,L,k,q=d.window;;){if(d.lookahead<=Tt){if(It(d),d.lookahead<=Tt&&h===0)return 1;if(d.lookahead===0)break}if(d.match_length=0,d.lookahead>=3&&d.strstart>0&&(D=q[L=d.strstart-1])===q[++L]&&D===q[++L]&&D===q[++L]){k=d.strstart+Tt;do;while(D===q[++L]&&D===q[++L]&&D===q[++L]&&D===q[++L]&&D===q[++L]&&D===q[++L]&&D===q[++L]&&D===q[++L]&&L<k);d.match_length=Tt-(k-L),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=3?(v=Ve._tr_tally(d,1,d.match_length-3),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(v=Ve._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),v&&(Be(d,!1),d.strm.avail_out===0))return 1}return d.insert=0,h===4?(Be(d,!0),d.strm.avail_out===0?3:4):d.last_lit&&(Be(d,!1),d.strm.avail_out===0)?1:2}(o,e):nn[o.level].func(o,e);if(u!==3&&u!==4||(o.status=Wn),u===1||u===3)return t.avail_out===0&&(o.last_flush=-1),0;if(u===2&&(e===1?Ve._tr_align(o):e!==5&&(Ve._tr_stored_block(o,0,0,!1),e===3&&(mt(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),yt(t),t.avail_out===0))return o.last_flush=-1,0}return e!==4?0:o.wrap<=0?1:(o.wrap===2?(ge(o,255&t.adler),ge(o,t.adler>>8&255),ge(o,t.adler>>16&255),ge(o,t.adler>>24&255),ge(o,255&t.total_in),ge(o,t.total_in>>8&255),ge(o,t.total_in>>16&255),ge(o,t.total_in>>24&255)):(On(o,t.adler>>>16),On(o,65535&t.adler)),yt(t),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?0:1)},deflateEnd:function(t){var e;return t&&t.state?(e=t.state.status)!==42&&e!==69&&e!==73&&e!==91&&e!==ci&&e!==Et&&e!==Wn?gt(t,Ge):(t.state=null,e===Et?gt(t,-3):0):Ge},deflateSetDictionary:function(t,e){var n,o,r,a,l,u,d,h,v=e.length;if(!t||!t.state||(a=(n=t.state).wrap)===2||a===1&&n.status!==42||n.lookahead)return Ge;for(a===1&&(t.adler=Dn(t.adler,e,v,0)),n.wrap=0,v>=n.w_size&&(a===0&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new ee.Buf8(n.w_size),ee.arraySet(h,e,v-n.w_size,n.w_size,0),e=h,v=n.w_size),l=t.avail_in,u=t.next_in,d=t.input,t.avail_in=v,t.next_in=0,t.input=e,It(n);n.lookahead>=3;){o=n.strstart,r=n.lookahead-2;do n.ins_h=(n.ins_h<<n.hash_shift^n.window[o+3-1])&n.hash_mask,n.prev[o&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=o,o++;while(--r);n.strstart=o,n.lookahead=2,It(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=u,t.input=d,t.avail_in=l,n.wrap=a,0},deflateInfo:"pako deflate (from Nodeca project)"},ka=!0,_a=!0;try{String.fromCharCode.apply(null,[0])}catch(i){ka=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(i){_a=!1}for(var Fn=new ee.Buf8(256),pt=0;pt<256;pt++)Fn[pt]=pt>=252?6:pt>=248?5:pt>=240?4:pt>=224?3:pt>=192?2:1;Fn[254]=Fn[254]=1;function Sa(i,t){if(t<65534&&(i.subarray&&_a||!i.subarray&&ka))return String.fromCharCode.apply(null,ee.shrinkBuf(i,t));for(var e="",n=0;n<t;n++)e+=String.fromCharCode(i[n]);return e}var po=function(t){var e,n,o,r,a,l=t.length,u=0;for(r=0;r<l;r++)(64512&(n=t.charCodeAt(r)))==55296&&r+1<l&&(64512&(o=t.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(o-56320),r++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new ee.Buf8(u),a=0,r=0;a<u;r++)(64512&(n=t.charCodeAt(r)))==55296&&r+1<l&&(64512&(o=t.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(o-56320),r++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},vl=function(t){return Sa(t,t.length)},gl=function(t){for(var e=new ee.Buf8(t.length),n=0,o=e.length;n<o;n++)e[n]=t.charCodeAt(n);return e},ml=function(t,e){var n,o,r,a,l=e||t.length,u=new Array(2*l);for(o=0,n=0;n<l;)if((r=t[n++])<128)u[o++]=r;else if((a=Fn[r])>4)u[o++]=65533,n+=a-1;else{for(r&=a===2?31:a===3?15:7;a>1&&n<l;)r=r<<6|63&t[n++],a--;a>1?u[o++]=65533:r<65536?u[o++]=r:(r-=65536,u[o++]=55296|r>>10&1023,u[o++]=56320|1023&r)}return Sa(u,o)},yl=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&(192&t[n])==128;)n--;return n<0||n===0?e:n+Fn[t[n]]>e?n:e},Pa=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ra=Object.prototype.toString;function Lt(i){if(!(this instanceof Lt))return new Lt(i);this.options=ee.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},i||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pa,this.strm.avail_out=0;var e=zn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==0)throw new Error(Rt[e]);if(t.header&&zn.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n=typeof t.dictionary=="string"?po(t.dictionary):Ra.call(t.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t.dictionary):t.dictionary,(e=zn.deflateSetDictionary(this.strm,n))!==0)throw new Error(Rt[e]);this._dict_set=!0}}function wo(i,t){var e=new Lt(t);if(e.push(i,!0),e.err)throw e.msg||Rt[e.err];return e.result}Lt.prototype.push=function(i,t){var e,n,o=this.strm,r=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:t===!0?4:0,typeof i=="string"?o.input=po(i):Ra.call(i)==="[object ArrayBuffer]"?o.input=new Uint8Array(i):o.input=i,o.next_in=0,o.avail_in=o.input.length;do{if(o.avail_out===0&&(o.output=new ee.Buf8(r),o.next_out=0,o.avail_out=r),(e=zn.deflate(o,n))!==1&&e!==0)return this.onEnd(e),this.ended=!0,!1;o.avail_out!==0&&(o.avail_in!==0||n!==4&&n!==2)||(this.options.to==="string"?this.onData(vl(ee.shrinkBuf(o.output,o.next_out))):this.onData(ee.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||o.avail_out===0)&&e!==1);return n===4?(e=zn.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===0):n!==2||(this.onEnd(0),o.avail_out=0,!0)},Lt.prototype.onData=function(i){this.chunks.push(i)},Lt.prototype.onEnd=function(i){i===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ee.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var pl={Deflate:Lt,deflate:wo,deflateRaw:function(t,e){return(e=e||{}).raw=!0,wo(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,wo(t,e)}},wl=function(t,e){var n,o,r,a,l,u,d,h,v,D,L,k,q,ne,Z,te,M,A,z,$,K,V,ie,ye,X;n=t.state,o=t.next_in,ye=t.input,r=o+(t.avail_in-5),a=t.next_out,X=t.output,l=a-(e-t.avail_out),u=a+(t.avail_out-257),d=n.dmax,h=n.wsize,v=n.whave,D=n.wnext,L=n.window,k=n.hold,q=n.bits,ne=n.lencode,Z=n.distcode,te=(1<<n.lenbits)-1,M=(1<<n.distbits)-1;e:do{q<15&&(k+=ye[o++]<<q,q+=8,k+=ye[o++]<<q,q+=8),A=ne[k&te];t:for(;;){if(k>>>=z=A>>>24,q-=z,(z=A>>>16&255)===0)X[a++]=65535&A;else{if(!(16&z)){if(!(64&z)){A=ne[(65535&A)+(k&(1<<z)-1)];continue t}if(32&z){n.mode=12;break e}t.msg="invalid literal/length code",n.mode=30;break e}$=65535&A,(z&=15)&&(q<z&&(k+=ye[o++]<<q,q+=8),$+=k&(1<<z)-1,k>>>=z,q-=z),q<15&&(k+=ye[o++]<<q,q+=8,k+=ye[o++]<<q,q+=8),A=Z[k&M];n:for(;;){if(k>>>=z=A>>>24,q-=z,!(16&(z=A>>>16&255))){if(!(64&z)){A=Z[(65535&A)+(k&(1<<z)-1)];continue n}t.msg="invalid distance code",n.mode=30;break e}if(K=65535&A,q<(z&=15)&&(k+=ye[o++]<<q,(q+=8)<z&&(k+=ye[o++]<<q,q+=8)),(K+=k&(1<<z)-1)>d){t.msg="invalid distance too far back",n.mode=30;break e}if(k>>>=z,q-=z,K>(z=a-l)){if((z=K-z)>v&&n.sane){t.msg="invalid distance too far back",n.mode=30;break e}if(V=0,ie=L,D===0){if(V+=h-z,z<$){$-=z;do X[a++]=L[V++];while(--z);V=a-K,ie=X}}else if(D<z){if(V+=h+D-z,(z-=D)<$){$-=z;do X[a++]=L[V++];while(--z);if(V=0,D<$){$-=z=D;do X[a++]=L[V++];while(--z);V=a-K,ie=X}}}else if(V+=D-z,z<$){$-=z;do X[a++]=L[V++];while(--z);V=a-K,ie=X}for(;$>2;)X[a++]=ie[V++],X[a++]=ie[V++],X[a++]=ie[V++],$-=3;$&&(X[a++]=ie[V++],$>1&&(X[a++]=ie[V++]))}else{V=a-K;do X[a++]=X[V++],X[a++]=X[V++],X[a++]=X[V++],$-=3;while($>2);$&&(X[a++]=X[V++],$>1&&(X[a++]=X[V++]))}break}}break}}while(o<r&&a<u);o-=$=q>>3,k&=(1<<(q-=$<<3))-1,t.next_in=o,t.next_out=a,t.avail_in=o<r?r-o+5:5-(o-r),t.avail_out=a<u?u-a+257:257-(a-u),n.hold=k,n.bits=q},di=15,bl=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Cl=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],kl=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Mn=function(t,e,n,o,r,a,l,u){var d,h,v,D,L,k,q,ne,Z,te=u.bits,M=0,A=0,z=0,$=0,K=0,V=0,ie=0,ye=0,X=0,we=0,qt=null,Oa=0,wt=new ee.Buf16(16),hi=new ee.Buf16(16),fi=null,za=0;for(M=0;M<=di;M++)wt[M]=0;for(A=0;A<o;A++)wt[e[n+A]]++;for(K=te,$=di;$>=1&&wt[$]===0;$--);if(K>$&&(K=$),$===0)return r[a++]=20971520,r[a++]=20971520,u.bits=1,0;for(z=1;z<$&&wt[z]===0;z++);for(K<z&&(K=z),ye=1,M=1;M<=di;M++)if(ye<<=1,(ye-=wt[M])<0)return-1;if(ye>0&&(t===0||$!==1))return-1;for(hi[1]=0,M=1;M<di;M++)hi[M+1]=hi[M]+wt[M];for(A=0;A<o;A++)e[n+A]!==0&&(l[hi[e[n+A]]++]=A);if(t===0?(qt=fi=l,k=19):t===1?(qt=bl,Oa-=257,fi=Cl,za-=257,k=256):(qt=kl,fi=_l,k=-1),we=0,A=0,M=z,L=a,V=K,ie=0,v=-1,D=(X=1<<K)-1,t===1&&X>852||t===2&&X>592)return 1;for(;;){q=M-ie,l[A]<k?(ne=0,Z=l[A]):l[A]>k?(ne=fi[za+l[A]],Z=qt[Oa+l[A]]):(ne=96,Z=0),d=1<<M-ie,z=h=1<<V;do r[L+(we>>ie)+(h-=d)]=q<<24|ne<<16|Z|0;while(h!==0);for(d=1<<M-1;we&d;)d>>=1;if(d!==0?(we&=d-1,we+=d):we=0,A++,--wt[M]==0){if(M===$)break;M=e[n+l[A]]}if(M>K&&(we&D)!==v){for(ie===0&&(ie=K),L+=z,ye=1<<(V=M-ie);V+ie<$&&!((ye-=wt[V+ie])<=0);)V++,ye<<=1;if(X+=1<<V,t===1&&X>852||t===2&&X>592)return 1;r[v=we&D]=K<<24|V<<16|L-a|0}}return we!==0&&(r[L+we]=M-ie<<24|64<<16|0),u.bits=K,0},Ze=-2,ut=12,ke=30;function Ta(i){return(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24)}function Sl(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ee.Buf16(320),this.work=new ee.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ea(i){var t;return i&&i.state?(t=i.state,i.total_in=i.total_out=t.total=0,i.msg="",t.wrap&&(i.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new ee.Buf32(852),t.distcode=t.distdyn=new ee.Buf32(592),t.sane=1,t.back=-1,0):Ze}function Ia(i){var t;return i&&i.state?((t=i.state).wsize=0,t.whave=0,t.wnext=0,Ea(i)):Ze}function La(i,t){var e,n;return i&&i.state?(n=i.state,t<0?(e=0,t=-t):(e=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ze:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,Ia(i))):Ze}function xa(i,t){var e,n;return i?(n=new Sl,i.state=n,n.window=null,(e=La(i,t))!==0&&(i.state=null),e):Ze}var bo,Co,qa=!0;function Pl(i){if(qa){var t;for(bo=new ee.Buf32(512),Co=new ee.Buf32(32),t=0;t<144;)i.lens[t++]=8;for(;t<256;)i.lens[t++]=9;for(;t<280;)i.lens[t++]=7;for(;t<288;)i.lens[t++]=8;for(Mn(1,i.lens,0,288,bo,0,i.work,{bits:9}),t=0;t<32;)i.lens[t++]=5;Mn(2,i.lens,0,32,Co,0,i.work,{bits:5}),qa=!1}i.lencode=bo,i.lenbits=9,i.distcode=Co,i.distbits=5}function Ba(i,t,e,n){var o,r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new ee.Buf8(r.wsize)),n>=r.wsize?(ee.arraySet(r.window,t,e-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((o=r.wsize-r.wnext)>n&&(o=n),ee.arraySet(r.window,t,e-n,o,r.wnext),(n-=o)?(ee.arraySet(r.window,t,e-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}var rn={inflateReset:Ia,inflateReset2:La,inflateResetKeep:Ea,inflateInit:function(t){return xa(t,15)},inflateInit2:xa,inflate:function(t,e){var n,o,r,a,l,u,d,h,v,D,L,k,q,ne,Z,te,M,A,z,$,K,V,ie,ye,X=0,we=new ee.Buf8(4),qt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Ze;(n=t.state).mode===ut&&(n.mode=13),l=t.next_out,r=t.output,d=t.avail_out,a=t.next_in,o=t.input,u=t.avail_in,h=n.hold,v=n.bits,D=u,L=d,V=0;e:for(;;)switch(n.mode){case 1:if(n.wrap===0){n.mode=13;break}for(;v<16;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(2&n.wrap&&h===35615){n.check=0,we[0]=255&h,we[1]=h>>>8&255,n.check=xe(n.check,we,2,0),h=0,v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=ke;break}if((15&h)!=8){t.msg="unknown compression method",n.mode=ke;break}if(v-=4,K=8+(15&(h>>>=4)),n.wbits===0)n.wbits=K;else if(K>n.wbits){t.msg="invalid window size",n.mode=ke;break}n.dmax=1<<K,t.adler=n.check=1,n.mode=512&h?10:ut,h=0,v=0;break;case 2:for(;v<16;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(n.flags=h,(255&n.flags)!=8){t.msg="unknown compression method",n.mode=ke;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=ke;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(we[0]=255&h,we[1]=h>>>8&255,n.check=xe(n.check,we,2,0)),h=0,v=0,n.mode=3;case 3:for(;v<32;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}n.head&&(n.head.time=h),512&n.flags&&(we[0]=255&h,we[1]=h>>>8&255,we[2]=h>>>16&255,we[3]=h>>>24&255,n.check=xe(n.check,we,4,0)),h=0,v=0,n.mode=4;case 4:for(;v<16;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(we[0]=255&h,we[1]=h>>>8&255,n.check=xe(n.check,we,2,0)),h=0,v=0,n.mode=5;case 5:if(1024&n.flags){for(;v<16;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(we[0]=255&h,we[1]=h>>>8&255,n.check=xe(n.check,we,2,0)),h=0,v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((k=n.length)>u&&(k=u),k&&(n.head&&(K=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),ee.arraySet(n.head.extra,o,a,k,K)),512&n.flags&&(n.check=xe(n.check,o,k,a)),u-=k,a+=k,n.length-=k),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(u===0)break e;k=0;do K=o[a+k++],n.head&&K&&n.length<65536&&(n.head.name+=String.fromCharCode(K));while(K&&k<u);if(512&n.flags&&(n.check=xe(n.check,o,k,a)),u-=k,a+=k,K)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(u===0)break e;k=0;do K=o[a+k++],n.head&&K&&n.length<65536&&(n.head.comment+=String.fromCharCode(K));while(K&&k<u);if(512&n.flags&&(n.check=xe(n.check,o,k,a)),u-=k,a+=k,K)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;v<16;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(h!==(65535&n.check)){t.msg="header crc mismatch",n.mode=ke;break}h=0,v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ut;break;case 10:for(;v<32;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}t.adler=n.check=Ta(h),h=0,v=0,n.mode=11;case 11:if(n.havedict===0)return t.next_out=l,t.avail_out=d,t.next_in=a,t.avail_in=u,n.hold=h,n.bits=v,2;t.adler=n.check=1,n.mode=ut;case ut:if(e===5||e===6)break e;case 13:if(n.last){h>>>=7&v,v-=7&v,n.mode=27;break}for(;v<3;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}switch(n.last=1&h,v-=1,3&(h>>>=1)){case 0:n.mode=14;break;case 1:if(Pl(n),n.mode=20,e===6){h>>>=2,v-=2;break e}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=ke}h>>>=2,v-=2;break;case 14:for(h>>>=7&v,v-=7&v;v<32;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=ke;break}if(n.length=65535&h,h=0,v=0,n.mode=15,e===6)break e;case 15:n.mode=16;case 16:if(k=n.length){if(k>u&&(k=u),k>d&&(k=d),k===0)break e;ee.arraySet(r,o,a,k,l),u-=k,a+=k,d-=k,l+=k,n.length-=k;break}n.mode=ut;break;case 17:for(;v<14;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(n.nlen=257+(31&h),h>>>=5,v-=5,n.ndist=1+(31&h),h>>>=5,v-=5,n.ncode=4+(15&h),h>>>=4,v-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=ke;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;v<3;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}n.lens[qt[n.have++]]=7&h,h>>>=3,v-=3}for(;n.have<19;)n.lens[qt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,ie={bits:n.lenbits},V=Mn(0,n.lens,0,19,n.lencode,0,n.work,ie),n.lenbits=ie.bits,V){t.msg="invalid code lengths set",n.mode=ke;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;te=(X=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,M=65535&X,!((Z=X>>>24)<=v);){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(M<16)h>>>=Z,v-=Z,n.lens[n.have++]=M;else{if(M===16){for(ye=Z+2;v<ye;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(h>>>=Z,v-=Z,n.have===0){t.msg="invalid bit length repeat",n.mode=ke;break}K=n.lens[n.have-1],k=3+(3&h),h>>>=2,v-=2}else if(M===17){for(ye=Z+3;v<ye;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}v-=Z,K=0,k=3+(7&(h>>>=Z)),h>>>=3,v-=3}else{for(ye=Z+7;v<ye;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}v-=Z,K=0,k=11+(127&(h>>>=Z)),h>>>=7,v-=7}if(n.have+k>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=ke;break}for(;k--;)n.lens[n.have++]=K}}if(n.mode===ke)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=ke;break}if(n.lenbits=9,ie={bits:n.lenbits},V=Mn(1,n.lens,0,n.nlen,n.lencode,0,n.work,ie),n.lenbits=ie.bits,V){t.msg="invalid literal/lengths set",n.mode=ke;break}if(n.distbits=6,n.distcode=n.distdyn,ie={bits:n.distbits},V=Mn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,ie),n.distbits=ie.bits,V){t.msg="invalid distances set",n.mode=ke;break}if(n.mode=20,e===6)break e;case 20:n.mode=21;case 21:if(u>=6&&d>=258){t.next_out=l,t.avail_out=d,t.next_in=a,t.avail_in=u,n.hold=h,n.bits=v,wl(t,L),l=t.next_out,r=t.output,d=t.avail_out,a=t.next_in,o=t.input,u=t.avail_in,h=n.hold,v=n.bits,n.mode===ut&&(n.back=-1);break}for(n.back=0;te=(X=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,M=65535&X,!((Z=X>>>24)<=v);){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(te&&!(240&te)){for(A=Z,z=te,$=M;te=(X=n.lencode[$+((h&(1<<A+z)-1)>>A)])>>>16&255,M=65535&X,!(A+(Z=X>>>24)<=v);){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}h>>>=A,v-=A,n.back+=A}if(h>>>=Z,v-=Z,n.back+=Z,n.length=M,te===0){n.mode=26;break}if(32&te){n.back=-1,n.mode=ut;break}if(64&te){t.msg="invalid literal/length code",n.mode=ke;break}n.extra=15&te,n.mode=22;case 22:if(n.extra){for(ye=n.extra;v<ye;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,v-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;te=(X=n.distcode[h&(1<<n.distbits)-1])>>>16&255,M=65535&X,!((Z=X>>>24)<=v);){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(!(240&te)){for(A=Z,z=te,$=M;te=(X=n.distcode[$+((h&(1<<A+z)-1)>>A)])>>>16&255,M=65535&X,!(A+(Z=X>>>24)<=v);){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}h>>>=A,v-=A,n.back+=A}if(h>>>=Z,v-=Z,n.back+=Z,64&te){t.msg="invalid distance code",n.mode=ke;break}n.offset=M,n.extra=15&te,n.mode=24;case 24:if(n.extra){for(ye=n.extra;v<ye;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,v-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=ke;break}n.mode=25;case 25:if(d===0)break e;if(k=L-d,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=ke;break}k>n.wnext?(k-=n.wnext,q=n.wsize-k):q=n.wnext-k,k>n.length&&(k=n.length),ne=n.window}else ne=r,q=l-n.offset,k=n.length;k>d&&(k=d),d-=k,n.length-=k;do r[l++]=ne[q++];while(--k);n.length===0&&(n.mode=21);break;case 26:if(d===0)break e;r[l++]=n.length,d--,n.mode=21;break;case 27:if(n.wrap){for(;v<32;){if(u===0)break e;u--,h|=o[a++]<<v,v+=8}if(L-=d,t.total_out+=L,n.total+=L,L&&(t.adler=n.check=n.flags?xe(n.check,r,L,l-L):Dn(n.check,r,L,l-L)),L=d,(n.flags?h:Ta(h))!==n.check){t.msg="incorrect data check",n.mode=ke;break}h=0,v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;v<32;){if(u===0)break e;u--,h+=o[a++]<<v,v+=8}if(h!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=ke;break}h=0,v=0}n.mode=29;case 29:V=1;break e;case ke:V=-3;break e;case 31:return-4;case 32:default:return Ze}return t.next_out=l,t.avail_out=d,t.next_in=a,t.avail_in=u,n.hold=h,n.bits=v,(n.wsize||L!==t.avail_out&&n.mode<ke&&(n.mode<27||e!==4))&&Ba(t,t.output,t.next_out,L-t.avail_out),D-=t.avail_in,L-=t.avail_out,t.total_in+=D,t.total_out+=L,n.total+=L,n.wrap&&L&&(t.adler=n.check=n.flags?xe(n.check,r,L,t.next_out-L):Dn(n.check,r,L,t.next_out-L)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ut?128:0)+(n.mode===20||n.mode===15?256:0),(D===0&&L===0||e===4)&&V===0&&(V=-5),V},inflateEnd:function(t){if(!t||!t.state)return Ze;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var n;return t&&t.state&&2&(n=t.state).wrap?(n.head=e,e.done=!1,0):Ze},inflateSetDictionary:function(t,e){var n,o=e.length;return t&&t.state?(n=t.state).wrap!==0&&n.mode!==11?Ze:n.mode===11&&Dn(1,e,o,0)!==n.check?-3:Ba(t,e,o,o)?(n.mode=31,-4):(n.havedict=1,0):Ze},inflateInfo:"pako inflate (from Nodeca project)"},Re={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Rl=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Da=Object.prototype.toString;function xt(i){if(!(this instanceof xt))return new xt(i);this.options=ee.assign({chunkSize:16384,windowBits:0,to:""},i||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||i&&i.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pa,this.strm.avail_out=0;var e=rn.inflateInit2(this.strm,t.windowBits);if(e!==Re.Z_OK)throw new Error(Rt[e]);if(this.header=new Rl,rn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=po(t.dictionary):Da.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=rn.inflateSetDictionary(this.strm,t.dictionary))!==Re.Z_OK))throw new Error(Rt[e])}function ko(i,t){var e=new xt(t);if(e.push(i,!0),e.err)throw e.msg||Rt[e.err];return e.result}xt.prototype.push=function(i,t){var e,n,o,r,a,l=this.strm,u=this.options.chunkSize,d=this.options.dictionary,h=!1;if(this.ended)return!1;n=t===~~t?t:t===!0?Re.Z_FINISH:Re.Z_NO_FLUSH,typeof i=="string"?l.input=gl(i):Da.call(i)==="[object ArrayBuffer]"?l.input=new Uint8Array(i):l.input=i,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new ee.Buf8(u),l.next_out=0,l.avail_out=u),(e=rn.inflate(l,Re.Z_NO_FLUSH))===Re.Z_NEED_DICT&&d&&(e=rn.inflateSetDictionary(this.strm,d)),e===Re.Z_BUF_ERROR&&h===!0&&(e=Re.Z_OK,h=!1),e!==Re.Z_STREAM_END&&e!==Re.Z_OK)return this.onEnd(e),this.ended=!0,!1;l.next_out&&(l.avail_out!==0&&e!==Re.Z_STREAM_END&&(l.avail_in!==0||n!==Re.Z_FINISH&&n!==Re.Z_SYNC_FLUSH)||(this.options.to==="string"?(o=yl(l.output,l.next_out),r=l.next_out-o,a=ml(l.output,o),l.next_out=r,l.avail_out=u-r,r&&ee.arraySet(l.output,l.output,o,r,0),this.onData(a)):this.onData(ee.shrinkBuf(l.output,l.next_out)))),l.avail_in===0&&l.avail_out===0&&(h=!0)}while((l.avail_in>0||l.avail_out===0)&&e!==Re.Z_STREAM_END);return e===Re.Z_STREAM_END&&(n=Re.Z_FINISH),n===Re.Z_FINISH?(e=rn.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===Re.Z_OK):n!==Re.Z_SYNC_FLUSH||(this.onEnd(Re.Z_OK),l.avail_out=0,!0)},xt.prototype.onData=function(i){this.chunks.push(i)},xt.prototype.onEnd=function(i){i===Re.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ee.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var Tl={Inflate:xt,inflate:ko,inflateRaw:function(t,e){return(e=e||{}).raw=!0,ko(t,e)},ungzip:ko},Wa={};(0,ee.assign)(Wa,pl,Tl,Re);var an,El=Wa,_o=function(){function i(t){b(this,i),this.oOptions=Object.assign({iPort:-1,cbConnectSuccess:null,cbConnectError:null,cbConnectClose:null},t),this.szHost="http://127.0.0.1",this.szUUID="",this.szVersion="",this.bNormalClose=!1,this.bConnected=!1,this.bInitConnect=!0,this.iGetErrorCount=0,this.oWindowControlCallback={},this.oSadpCallback={},this.oSliceCallback={},this.oSerialCallback={},this.oUIControlCallback={},this.oUpgradeCallback={},this.init()}return c(i,[{key:"init",value:function(){var e=this,n=vt(),o={sequence:n,cmd:"system.connect"},r=JSON.stringify(o);e.sendImageHttp("".concat(e.szHost,":").concat(e.oOptions.iPort,"/imghttp/local"),r,n,{success:function(l){var u=JSON.parse(l);e.szUUID=u.uuid,e.szVersion=u.version,e.bConnected=!0,e.bInitConnect=!1,setTimeout(function(){e.imageHttpPolling()},100),e.oOptions.cbConnectSuccess&&e.oOptions.cbConnectSuccess()},error:function(){}})}},{key:"sendImageHttp",value:function(e,n,o,r){var a=this;r=Object.assign({success:null,error:null,abort:null},r);var l=El.deflate(n);new Uint8Array().toString()!==""&&(j.isMacOS()||j.browser().msie)&&(l=Array.prototype.slice.call(l));for(var u=encodeURIComponent(btoa(l)),d=this.splitStr(u),h=[],v="",D=0,L=d.length;D<L;D++)v=D===L-1?"update=".concat(new Date().getTime(),"&isLast=true&data=").concat(d[D],"&sequence=").concat(o):"update=".concat(new Date().getTime(),"&isLast=false&data=").concat(d[D],"&sequence=").concat(o),h.push(v);h.length>0&&function k(){a.imageHttp("".concat(e,"?").concat(h[0]),{success:function(ne){h.shift(),h.length>0?(a.bInitConnect||a.bConnected)&&k():r.success&&r.success(ne)},error:function(){r.error&&r.error()},abort:function(){r.abort&&r.abort()}})}()}},{key:"splitStr",value:function(e){for(var n=this.getByteLen(e),o=[],r=1500,a=0,l=Math.ceil(n/r);a<l;a++)o[a]=e.slice(r*a,r*(a+1));return o}},{key:"getByteLen",value:function(e){for(var n=0,o="",r=0,a=e.length;r<a;r++)o=e.charAt(r),/[^\x00-\xff]/.test(o)?n+=2:n+=1;return n}},{key:"imageHttp",value:function(e,n){n=Object.assign({success:null,error:null,abort:null},n);var o=new Image;o.onload=function(){if(n.success){var r=document.createElement("canvas"),a=r.getContext("2d"),l=o.width,u=o.height;r.width=l,r.height=u;try{a.drawImage(o,0,0);for(var d=a.getImageData(0,0,l,u).data,h="",v=-1,D=u-1;D>=0;D--)for(var L=0;L<4*l&&d[v=D*l*4+L]!==0;L++)d[v]!==255&&(h+=String.fromCharCode(d[v]));n.success(j.utf8to16(h))}catch(k){n.error&&n.error()}}},o.onerror=function(){n.error&&n.error()},o.onabort=function(){n.abort&&n.abort()},o.crossOrigin="anonymous",o.src=e}},{key:"setWindowControlCallback",value:function(e){this.oWindowControlCallback=e}},{key:"setSadpCallback",value:function(e){this.oSadpCallback=e}},{key:"setSliceCallback",value:function(e){this.oSliceCallback=e}},{key:"setSerialCallback",value:function(e){this.oSerialCallback=e}},{key:"setUIControlCallback",value:function(e){this.oUIControlCallback=e}},{key:"setUpgradeCallback",value:function(e){this.oUpgradeCallback=e}},{key:"getServiceVersion",value:function(){return this.szVersion}},{key:"getRequestUUID",value:function(){return this.szUUID}},{key:"disconnect",value:function(){var e=this,n=vt(),o={sequence:n,uuid:e.szUUID,cmd:"system.disconnect"},r=JSON.stringify(o);e.bConnected&&e.sendImageHttp("".concat(e.szHost,":").concat(e.oOptions.iPort,"/imghttp/local"),r,n,{success:function(){e.bNormalClose=!0,e.bConnected=!1,e.oOptions.cbConnectClose&&e.oOptions.cbConnectClose(e.bNormalClose)},error:function(){e.bConnected=!1}})}},{key:"imageHttpPolling",value:function(){var e=this,n=vt(),o={sequence:n,uuid:e.szUUID,cmd:"system.get"},r=JSON.stringify(o);e.bConnected&&e.sendImageHttp("".concat(e.szHost,":").concat(e.oOptions.iPort,"/imghttp/local"),r,n,{success:function(l){if(e.iGetErrorCount=0,l==="timeout")setTimeout(function(){e.imageHttpPolling()},100);else if(l==="invalid")e.bConnected=!1,e.oOptions.cbConnectError&&e.oOptions.cbConnectError();else if(l==="closed")console.log("connected is disconnected");else{var u=JSON.parse(l);u.cmd!==void 0?e.parseCmd(u):console.log("[jsWebControl]imgHttpPolling push message error:".concat(l)),setTimeout(function(){e.imageHttpPolling()},100)}},error:function(){e.iGetErrorCount===5?(console.log("[jsWebControl]imageHttpPolling get polling finished"),e.bNormalClose=!1,e.bConnected=!1,e.oOptions.cbConnectClose&&e.oOptions.cbConnectClose(e.bNormalClose)):setTimeout(function(){console.log("[jsWebControl]imgHttpPolling get polling failed"),e.iGetErrorCount++,e.imageHttpPolling()},100)}})}},{key:"sendRequest",value:function(e){var n=this;return new Promise(function(o,r){var a=e.cmd.split("."),l="";a.length>1?l=a[0]==="laputa"?"laputa":"local":r();var u=vt();e.sequence=u,e.uuid=n.szUUID,e.timestamp="".concat(new Date().getTime());var d=JSON.stringify(e);n.bConnected?n.sendImageHttp("".concat(n.szHost,":").concat(n.oOptions.iPort,"/imghttp/").concat(l),d,u,{success:function(v){var D=JSON.parse(v);D.errorModule===0&&D.errorCode===0?o(D):r(D)},error:function(){r()}}):r()})}},{key:"parseCmd",value:function(e){var n=e.cmd.split("."),o=n[1].replace(/^[a-z]{1}/g,function(r){return r.toUpperCase()});n[0]==="window"||n[0]==="play"?this.oWindowControlCallback["cb".concat(o)]&&this.oWindowControlCallback["cb".concat(o)](e):n[0]==="sadp"?this.oSadpCallback["cb".concat(o)]&&this.oSadpCallback["cb".concat(o)](e):n[0]==="serial"?this.oSerialCallback["cb".concat(o)]&&this.oSerialCallback["cb".concat(o)](e):n[0]==="slice"?this.oSliceCallback["cb".concat(o)]&&this.oSliceCallback["cb".concat(o)](e):n[0]==="ui"?this.oUIControlCallback["cb".concat(o)]&&this.oUIControlCallback["cb".concat(o)](e):n[0]==="upgrade"&&this.oUpgradeCallback["cb".concat(o)]&&this.oUpgradeCallback["cb".concat(o)](e)}}]),i}(),Il=function(){function i(t){b(this,i),this.oOptions=Object.assign({szPluginContainer:"",iPort:-1,cbConnectSuccess:null,cbConnectError:null,cbConnectClose:null,szClassId:""},t),this.oPlugin=null,this.szPluginId="",this.szUUID="",this.szVersion="",this.oRequestList={},this.bNormalClose=!1,this.aMessage=[],this.oWindowControlCallback={},this.oSadpCallback={},this.oSliceCallback={},this.oSerialCallback={},this.oUIControlCallback={},this.oUpgradeCallback={},this.init()}return c(i,[{key:"init",value:function(){var e=this;e.initPlugin(),e.oPlugin.object&&e.oPlugin.createSocket("ws://127.0.0.1:".concat(e.oOptions.iPort))}},{key:"initPlugin",value:function(){var e=this;this.szPluginId="webActiveX_".concat(new Date().getTime());var n="<object id='".concat(this.szPluginId,"' classid='clsid:").concat(e.oOptions.szClassId,"' codebase='' standby='Waiting...' width='100%' height='100%' align='center' ></object>"),o=e.oOptions.szPluginContainer;if(o===""){o="".concat(this.szPluginId,"_div");var r=document.createElement("div");r.id=o,document.body.parentNode.appendChild(r)}document.getElementById(o).innerHTML=n,e.oPlugin=document.getElementById(this.szPluginId),window.onConnectMessage=function(a,l){l?(e.aMessage.push(a),e.onConnectMessage(e.aMessage.join("")),e.aMessage.length=0):e.aMessage.push(a)},window.onConnectClose=function(){e.onConnectClose()},window.onConnectError=function(){e.onConnectError()},window.onConnectCloseException=function(){e.onConnectCloseException()},window.onConnectOpen=function(){e.onConnectOpen()},j.createEventScript(this.szPluginId,"onConnectMessage(szData, bLast)","onConnectMessage(szData, bLast);"),j.createEventScript(this.szPluginId,"onConnectClose()","onConnectClose();"),j.createEventScript(this.szPluginId,"onConnectError()","onConnectError();"),j.createEventScript(this.szPluginId,"onConnectCloseException()","onConnectCloseException();"),j.createEventScript(this.szPluginId,"onConnectOpen()","onConnectOpen();")}},{key:"onConnectMessage",value:function(e){var n=this;if(e){var o=JSON.parse(e),r=o.sequence;r===void 0&&o.cmd===void 0?(n.szUUID=o.uuid,n.szVersion=o.version,n.oOptions.cbConnectSuccess&&n.oOptions.cbConnectSuccess()):o.cmd!==void 0?n.parseCmd(o):n.oRequestList[r]!==void 0&&(o.errorModule===0&&o.errorCode===0?n.oRequestList[r].resolve(o):n.oRequestList[r].reject(o),delete n.oRequestList[r])}}},{key:"onConnectClose",value:function(){if(this.oPlugin=null,this.szPluginId!==""){var e=document.getElementById(this.szPluginId);e.parentNode.removeChild(e);var n=document.getElementById("".concat(this.szPluginId,"_div"));n!==null&&n.parentNode.removeChild(n)}this.oOptions.cbConnectClose&&this.oOptions.cbConnectClose(this.bNormalClose)}},{key:"onConnectCloseException",value:function(){var e=this;setTimeout(function(){e.oPlugin.object&&e.oPlugin.closeSocket()},1e3)}},{key:"onConnectOpen",value:function(){var e={sequence:vt(),cmd:"system.connect"},n=JSON.stringify(e);this.oPlugin.object&&this.oPlugin.sendRequest(n)}},{key:"onConnectError",value:function(){}},{key:"setWindowControlCallback",value:function(e){this.oWindowControlCallback=e}},{key:"setSadpCallback",value:function(e){this.oSadpCallback=e}},{key:"setSliceCallback",value:function(e){this.oSliceCallback=e}},{key:"setSerialCallback",value:function(e){this.oSerialCallback=e}},{key:"setUIControlCallback",value:function(e){this.oUIControlCallback=e}},{key:"setUpgradeCallback",value:function(e){this.oUpgradeCallback=e}},{key:"getServiceVersion",value:function(){return this.szVersion}},{key:"getRequestUUID",value:function(){return this.szUUID}},{key:"disconnect",value:function(){this.bNormalClose=!0,this.oPlugin&&this.oPlugin.object&&this.oPlugin.closeSocket()}},{key:"sendRequest",value:function(e){var n=this;return e.cmd==="window.hideWnd"?n.oPlugin&&n.oPlugin.object&&(n.oPlugin.style.visibility="hidden"):e.cmd==="window.showWnd"&&n.oPlugin&&n.oPlugin.object&&(n.oPlugin.style.visibility="visible"),new Promise(function(o,r){var a=vt();e.sequence=a,n.oRequestList[a]={resolve:o,reject:r},e.uuid=n.szUUID,e.timestamp="".concat(new Date().getTime());var l=JSON.stringify(e);n.oPlugin&&n.oPlugin.object?n.oPlugin.sendRequest(l):r()})}},{key:"parseCmd",value:function(e){var n=e.cmd.split("."),o=n[1].replace(/^[a-z]{1}/g,function(r){return r.toUpperCase()});n[0]==="window"||n[0]==="play"?this.oWindowControlCallback["cb".concat(o)]&&this.oWindowControlCallback["cb".concat(o)](e):n[0]==="sadp"?this.oSadpCallback["cb".concat(o)]&&this.oSadpCallback["cb".concat(o)](e):n[0]==="serial"?this.oSerialCallback["cb".concat(o)]&&this.oSerialCallback["cb".concat(o)](e):n[0]==="slice"?this.oSliceCallback["cb".concat(o)]&&this.oSliceCallback["cb".concat(o)](e):n[0]==="ui"?this.oUIControlCallback["cb".concat(o)]&&this.oUIControlCallback["cb".concat(o)](e):n[0]==="upgrade"&&this.oUpgradeCallback["cb".concat(o)]&&this.oUpgradeCallback["cb".concat(o)](e)}}]),i}(),Ll=function(){function i(t){b(this,i),this.oOptions=Object.assign({szPluginContainer:"",cbConnectSuccess:null,cbConnectError:null,cbConnectClose:null,iServicePortStart:-1,iServicePortEnd:-1,szClassId:""},t),this.iPort=-1,this.oRequest=null,this.bInit=!1,this.oCallbacks={},this.init()}return c(i,[{key:"init",value:function(){var e=this;j.detectPort(e.oOptions.iServicePortStart,e.oOptions.iServicePortEnd,{success:function(o){if(e.iPort=o,j.browser().msie)j.browser().version==="11.0"?window.location.protocol==="https:"?e.oRequest=new _o({iPort:e.iPort,cbConnectSuccess:e.oOptions.cbConnectSuccess,cbConnectError:e.oOptions.cbConnectError,cbConnectClose:e.oOptions.cbConnectClose}):e.oRequest=new lo({iPort:e.iPort,cbConnectSuccess:e.oOptions.cbConnectSuccess,cbConnectError:e.oOptions.cbConnectError,cbConnectClose:e.oOptions.cbConnectClose}):e.oRequest=new Il({szPluginContainer:e.oOptions.szPluginContainer,iPort:e.iPort,cbConnectSuccess:e.oOptions.cbConnectSuccess,cbConnectError:e.oOptions.cbConnectError,cbConnectClose:e.oOptions.cbConnectClose,szClassId:e.oOptions.szClassId});else if(window.location.protocol==="https:")if(j.browser().chrome)try{e.oRequest=new lo({iPort:e.iPort,cbConnectSuccess:e.oOptions.cbConnectSuccess,cbConnectError:e.oOptions.cbConnectError,cbConnectClose:e.oOptions.cbConnectClose})}catch(a){e.oRequest=new _o({iPort:e.iPort,cbConnectSuccess:e.oOptions.cbConnectSuccess,cbConnectError:e.oOptions.cbConnectError,cbConnectClose:e.oOptions.cbConnectClose})}else e.oRequest=new _o({iPort:e.iPort,cbConnectSuccess:e.oOptions.cbConnectSuccess,cbConnectError:e.oOptions.cbConnectError,cbConnectClose:e.oOptions.cbConnectClose});else"WebSocket"in window&&(e.oRequest=new lo({iPort:e.iPort,cbConnectSuccess:e.oOptions.cbConnectSuccess,cbConnectError:e.oOptions.cbConnectError,cbConnectClose:e.oOptions.cbConnectClose}));for(var r in e.bInit=!0,e.oCallbacks)e.oRequest[r](e.oCallbacks[r])},error:function(){e.oOptions.cbConnectError&&e.oOptions.cbConnectError()}})}},{key:"setWindowControlCallback",value:function(e){this.bInit?this.oRequest.setWindowControlCallback(e):this.oCallbacks.setWindowControlCallback=e}},{key:"setSadpCallback",value:function(e){this.bInit?this.oRequest.setSadpCallback(e):this.oCallbacks.setSadpCallback=e}},{key:"setSliceCallback",value:function(e){this.bInit?this.oRequest.setSliceCallback(e):this.oCallbacks.setSliceCallback=e}},{key:"setSerialCallback",value:function(e){this.bInit?this.oRequest.setSerialCallback(e):this.oCallbacks.setSerialCallback=e}},{key:"setUIControlCallback",value:function(e){this.bInit?this.oRequest.setUIControlCallback(e):this.oCallbacks.setUIControlCallback=e}},{key:"setUpgradeCallback",value:function(e){this.bInit?this.oRequest.setUpgradeCallback(e):this.oCallbacks.setUpgradeCallback=e}},{key:"getServiceVersion",value:function(){return this.oRequest.getServiceVersion()}},{key:"getRequestUUID",value:function(){return this.oRequest.getRequestUUID()}},{key:"startService",value:function(e,n){var o={cmd:"system.startService",type:e};return n!==void 0&&(o.options=n),this.oRequest.sendRequest(o)}},{key:"stopService",value:function(e){var n=this;return new Promise(function(o,r){n.oRequest!==null?n.oRequest.sendRequest({cmd:"system.stopService",type:e}).then(function(a){o(a)},function(a){r(a)}):r()})}},{key:"disconnect",value:function(){var e=this;return new Promise(function(n,o){e.oRequest!==null?(e.oRequest.disconnect(),n("cbConnectClose callback is really success")):o()})}},{key:"openDirectory",value:function(e){return this.oRequest.sendRequest({cmd:"system.openDirectory",path:e})}},{key:"openFile",value:function(e,n,o){return this.oRequest.sendRequest({cmd:"system.openFile",path:e,relative:n,version:o})}},{key:"selectDirectory",value:function(e,n){var o=this;return new Promise(function(r,a){o.oRequest!==null?o.oRequest.sendRequest({cmd:"system.selectDirectory",caption:e!==void 0&&e!==""?j.Base64().encode(e):"",dir:n!==void 0&&n!==""?j.Base64().encode(n):""}).then(function(l){l.path!==""&&(l.path=j.Base64().decode(l.path)),r(l)},function(l){a(l)}):a()})}},{key:"selectFile",value:function(e,n,o){var r=this;return new Promise(function(a,l){r.oRequest!==null?r.oRequest.sendRequest({cmd:"system.selectFile",caption:e!==""?j.Base64().encode(e):"",dir:n!==""?j.Base64().encode(n):"",filter:o}).then(function(u){u.path!==""&&(u.path=j.Base64().decode(u.path)),a(u)},function(u){l(u)}):l()})}},{key:"getLocalConfig",value:function(e){return this.oRequest.sendRequest({cmd:"system.getLocalConfig",default:e})}},{key:"setLocalConfig",value:function(e){return e.cmd="system.setLocalConfig",this.oRequest.sendRequest(e)}},{key:"createWnd",value:function(e,n,o,r,a,l,u){return this.oRequest.sendRequest({cmd:"window.createWnd",rect:{left:e,top:n,width:o,height:r},className:a,embed:l,activeXParentWnd:u})}},{key:"showWnd",value:function(){return this.oRequest.sendRequest({cmd:"window.showWnd"})}},{key:"hideWnd",value:function(){return this.oRequest.sendRequest({cmd:"window.hideWnd"})}},{key:"destroyWnd",value:function(){var e=this;return new Promise(function(n,o){e.oRequest!==null?e.oRequest.sendRequest({cmd:"window.destroyWnd"}).then(function(r){n(r)},function(r){o(r)}):o()})}},{key:"setWndGeometry",value:function(e,n,o,r){return this.oRequest.sendRequest({cmd:"window.setWndGeometry",rect:{left:e,top:n,width:o,height:r}})}},{key:"setWndCover",value:function(e,n){var o=this;return new Promise(function(r,a){o.oRequest!==null?o.oRequest.sendRequest({cmd:"window.setWndCover",position:e,size:n}).then(function(l){r(l)},function(l){a(l)}):a()})}},{key:"cuttingPartWindow",value:function(e,n,o,r,a){var l=this;return new Promise(function(u,d){l.oRequest!==null?l.oRequest.sendRequest({cmd:"window.cuttingPartWindow",rect:{left:e,top:n,width:o,height:r},round:a}).then(function(h){u(h)},function(h){d(h)}):d()})}},{key:"repairPartWindow",value:function(e,n,o,r,a){var l=this;return new Promise(function(u,d){l.oRequest!==null?l.oRequest.sendRequest({cmd:"window.repairPartWindow",rect:{left:e,top:n,width:o,height:r},round:a}).then(function(h){u(h)},function(h){d(h)}):d()})}},{key:"setWndZOrder",value:function(e){return this.oRequest.sendRequest({cmd:"window.setWndZOrder",flag:e})}},{key:"changePlayMode",value:function(e){return this.oRequest.sendRequest({cmd:"window.changePlayMode",type:e})}},{key:"setLanguageType",value:function(e){return this.oRequest.sendRequest({cmd:"window.setLanguageType",type:e})}},{key:"initLoginInfo",value:function(e){return this.oRequest.sendRequest({cmd:"window.initLoginInfo",vsmAddress:e.vsmAddress,vsmPort:e.vsmPort,sessionID:e.sessionID,loginModel:e.loginModel,userType:e.userType,networkType:e.networkType})}},{key:"setTranslateFile",value:function(e){return this.oRequest.sendRequest({cmd:"window.setTranslateFile",url:e})}},{key:"switchToSimple",value:function(e){return this.oRequest.sendRequest({cmd:"window.switchToSimple",simple:e})}},{key:"setVsmToken",value:function(e){return this.oRequest.sendRequest({cmd:"play.setVsmToken",token:e})}},{key:"startPlay",value:function(e,n,o,r,a,l,u,d,h){var v={cmd:"play.startPlay",url:e,username:n,password:o,siteID:r,areaName:j.Base64().encode(a),cameraName:j.Base64().encode(l),permission:u,wndIndex:d};return h!==void 0&&(v.options=h,v.options.siteName!==void 0&&(v.options.siteName=j.Base64().encode(v.options.siteName))),this.oRequest.sendRequest(v)}},{key:"setPreview3DPosition",value:function(e){return this.oRequest.sendRequest({cmd:"play.setPreview3DPosition",open:e})}},{key:"stopTotal",value:function(){var e=this;return new Promise(function(n,o){e.oRequest!==null?e.oRequest.sendRequest({cmd:"play.stopTotal"}).then(function(r){n(r)},function(r){o(r)}):o()})}},{key:"setDragMode",value:function(e){return this.oRequest.sendRequest({cmd:"play.setDragMode",drag:e})}},{key:"showErrorInfoInFullScreen",value:function(e){return this.oRequest.sendRequest({cmd:"play.showErrorInfoInFullScreen",error:j.Base64().encode(e)})}},{key:"setNumberOfWindows",value:function(e){return this.oRequest.sendRequest({cmd:"play.setNumberOfWindows",number:e})}},{key:"initCardReader",value:function(e){return this.oRequest.sendRequest({cmd:"serial.ACSInitCardReader",param:e})}},{key:"unInitCardReader",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSUnInitCardReader"})}},{key:"startAutoMode",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSStartAutoMode"})}},{key:"stopAutoMode",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSStopAutoMode"})}},{key:"initFingerprint",value:function(e){return this.oRequest.sendRequest({cmd:"serial.ACSInitFingerprint",param:e})}},{key:"unInitFingerprint",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSUnInitFingerprint"})}},{key:"startCollectFingerprint",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSStartCollectFingerprint"})}},{key:"stopCollectFingerprint",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSStopCollectFingerprint"})}},{key:"isCollectingFingerprint",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSIsCollectingFingerprint"})}},{key:"initVideocapture",value:function(e){return e.majorTitle=j.Base64().encode(e.majorTitle),e.tip=j.Base64().encode(e.tip),e.captureBtnTxt=j.Base64().encode(e.captureBtnTxt),e.USBRemovedTip=j.Base64().encode(e.USBRemovedTip),this.oRequest.sendRequest({cmd:"serial.ACSStartCollectImage",param:e})}},{key:"unInitVideocapture",value:function(){return this.oRequest.sendRequest({cmd:"serial.ACSStopCollectImage"})}},{key:"registerDeviceType",value:function(e){return this.oRequest.sendRequest({cmd:"sadp.registDeviceType",deviceType:e})}},{key:"activeOnlineDevice",value:function(e,n){return this.oRequest.sendRequest({cmd:"sadp.activeDevice",serialNumber:e,password:n})}},{key:"refreshDeviceList",value:function(){return this.oRequest.sendRequest({cmd:"sadp.refreshDeviceList"})}},{key:"modifyDeviceNetParam",value:function(e,n,o,r,a,l,u){return this.oRequest.sendRequest({cmd:"sadp.modifyDeviceParam",macAddress:e,password:n,ipv4Address:o,ipv4Gateway:r,ipv4SubnetMask:a,port:l,httpPort:u})}},{key:"exportKeyFile",value:function(e){return this.oRequest.sendRequest({cmd:"sadp.exportKeyFile",serialNumber:e})}},{key:"importKeyFile",value:function(){return this.oRequest.sendRequest({cmd:"sadp.importKeyFile"})}},{key:"resetPassword",value:function(e,n,o,r){return this.oRequest.sendRequest({cmd:"sadp.resetPassword",serialNumber:e,password:n,importFileData:o,szCode:r})}},{key:"uploadPicture",value:function(e){return this.oRequest.sendRequest({cmd:"slice.uploadPicture",path:j.Base64().encode(e)})}},{key:"showSelectMenu",value:function(e,n,o,r,a){return this.oRequest.sendRequest({cmd:"ui.showSelectMenu",items:a,rect:{left:e,top:n,width:o,height:r}})}},{key:"hideSelectMenu",value:function(){return this.oRequest.sendRequest({cmd:"ui.hideSelectMenu"})}},{key:"destroySelectMenu",value:function(){var e=this;return new Promise(function(n,o){e.oRequest!==null?e.oRequest.sendRequest({cmd:"ui.destroySelectMenu"}).then(function(r){n(r)},function(r){o(r)}):o()})}},{key:"deviceConfig",value:function(e){return this.oRequest.sendRequest({cmd:"laputa.encodingDevice",param:e})}},{key:"cloudStorageConfig",value:function(e){return this.oRequest.sendRequest({cmd:"laputa.cloudStorage",param:e})}},{key:"ezvizRemoteConfig",value:function(e){return this.oRequest.sendRequest({cmd:"laputa.ezvizRemote",param:e})}},{key:"showAlarmInfoInFullScreen",value:function(e,n,o){return this.oRequest.sendRequest({cmd:"window.showAlarmInfoInFullScreen",alarmTitle:e,alarmMessage:n,alarmId:o})}},{key:"updateParentWnd",value:function(){return this.oRequest.sendRequest({cmd:"window.updateParentWnd"})}},{key:"restoreWnd",value:function(){return this.oRequest.sendRequest({cmd:"window.restoreWnd"})}},{key:"setImmediatePlaybackTime",value:function(e){return this.oRequest.sendRequest({cmd:"play.setImmediatePlaybackTime",specifyTime:e})}},{key:"setDrawStatus",value:function(e){return this.oRequest.sendRequest({cmd:"draw.setDrawStatus",enable:e})}},{key:"clearRegion",value:function(){return this.oRequest.sendRequest({cmd:"draw.clearRegion"})}},{key:"setDrawShapeInfo",value:function(e,n){return this.oRequest.sendRequest({cmd:"draw.setDrawShapeInfo",drawType:e,drawInfo:n})}},{key:"setGridInfo",value:function(e){return this.oRequest.sendRequest({cmd:"draw.setGridInfo",gridInfo:e})}},{key:"getGridInfo",value:function(){return this.oRequest.sendRequest({cmd:"draw.getGridInfo"})}},{key:"setPolygonInfo",value:function(e){return this.oRequest.sendRequest({cmd:"draw.setPolygonInfo",polygonInfo:e})}},{key:"getPolygonInfo",value:function(){return this.oRequest.sendRequest({cmd:"draw.getPolygonInfo"})}},{key:"setLineInfo",value:function(e){return this.oRequest.sendRequest({cmd:"draw.setLineInfo",lineInfo:e})}},{key:"getLineInfo",value:function(){return this.oRequest.sendRequest({cmd:"draw.getLineInfo"})}},{key:"setRectInfo",value:function(e){return this.oRequest.sendRequest({cmd:"draw.setRectInfo",rectInfo:e})}},{key:"getRectInfo",value:function(){return this.oRequest.sendRequest({cmd:"draw.getRectInfo"})}},{key:"clearShapeByType",value:function(e){return this.oRequest.sendRequest({cmd:"draw.clearShapeByType",type:e})}},{key:"sensitiveEncrypt",value:function(e,n,o){var r={cmd:"laputa.sensitiveEncrypt",encryptType:e,encryptField:n};return o!==void 0&&(r.options=o),this.oRequest.sendRequest(r)}},{key:"sendRequest",value:function(e){return this.oRequest.sendRequest(e)}},{key:"requestInterface",value:function(e){var n={cmd:"window.requestInterface"};return n.requestParams=e,this.oRequest.sendRequest(n)}},{key:"stopPlay",value:function(e){return e===void 0&&(e=-1),this.oRequest.sendRequest({cmd:"play.stopPlay",wndIndex:e})}},{key:"showRemoteConfig",value:function(e){var n=this;return e.cmd="config.showRemoteConfig",new Promise(function(o,r){n.oRequest!==null?n.oRequest.sendRequest(e).then(function(a){o(a)},function(a){r(a)}):r()})}},{key:"video2Picture",value:function(){var e={cmd:"window.video2Picture"};return this.oRequest.sendRequest(e)}},{key:"picture2Video",value:function(){var e={cmd:"window.picture2Video"};return this.oRequest.sendRequest(e)}},{key:"ptzControl",value:function(e){return this.oRequest.sendRequest({cmd:"laputa.ptzControl",param:e})}},{key:"simMouseClickEvent",value:function(e,n){return this.oRequest.sendRequest({cmd:"window.simMouseClickEvent",pointX:e,pointY:n})}},{key:"us_SetMaxJobCount",value:function(e){return this.oRequest.sendRequest({cmd:"upgrade.setMaxJobCount",xml:e})}},{key:"us_GetMaxJobCount",value:function(){return this.oRequest.sendRequest({cmd:"upgrade.getMaxJobCount"})}},{key:"us_AddSchedule",value:function(e){return this.oRequest.sendRequest({cmd:"upgrade.addSchedule",xml:j.Base64().encode(e)})}},{key:"us_DelSchedule",value:function(e){return this.oRequest.sendRequest({cmd:"upgrade.delSchedule",scheduleId:e})}},{key:"us_GetScheduleList",value:function(e){var n=this;return new Promise(function(o,r){n.oRequest!==null?n.oRequest.sendRequest({cmd:"upgrade.getScheduleList",xml:e}).then(function(a){a.xml!==""&&(a.xml=j.Base64().decode(a.xml)),o(a)},function(a){r(a)}):r()})}},{key:"us_GetSchedule",value:function(e,n){var o=this;return new Promise(function(r,a){o.oRequest!==null?o.oRequest.sendRequest({cmd:"upgrade.getSchedule",xml:n,scheduleId:e}).then(function(l){l.xml!==""&&(l.xml=j.Base64().decode(l.xml)),r(l)},function(l){a(l)}):a()})}},{key:"us_UpgradeAction",value:function(e,n){return this.oRequest.sendRequest({cmd:"upgrade.upgradeAction",xml:n,scheduleId:e})}},{key:"us_CheckUpgradeableDevice",value:function(e){return this.oRequest.sendRequest({cmd:"upgrade.checkUpgradeableDevice",param:e})}},{key:"us_CheckUpgradeableDeviceList",value:function(e){return this.oRequest.sendRequest({cmd:"upgrade.checkUpgradeableDeviceList",param:e})}},{key:"us_IsRunningAsyCheckUpgradeable",value:function(){return this.oRequest.sendRequest({cmd:"upgrade.isRunningAsyCheckUpgradeable"})}},{key:"us_StopAsyCheckUpgradeable",value:function(){return this.oRequest.sendRequest({cmd:"upgrade.stopAsyCheckUpgradeable"})}},{key:"getFishEyePTZPreset",value:function(e){return this.oRequest.sendRequest({cmd:"play.getFishEyePTZPreset",wndIndex:e})}},{key:"setFishEyePTZPreset",value:function(e,n,o){return this.oRequest.sendRequest({cmd:"play.setFishEyePTZPreset",wndIndex:e,command:n,presetInfo:o})}},{key:"controlFishEyePTZ",value:function(e,n,o,r){return this.oRequest.sendRequest({cmd:"play.controlFishEyePTZ",wndIndex:e,command:n,stop:o,speed:r})}},{key:"controlFishEyeParol",value:function(e,n,o){return this.oRequest.sendRequest({cmd:"play.controlFishEyeParol",wndIndex:e,command:n,cruisePointList:o})}},{key:"setFirstDayOfWeek",value:function(e){return this.oRequest.sendRequest({cmd:"window.setFirstDayOfWeek",firstDay:e})}},{key:"setEhomePlayInfo",value:function(e,n,o,r,a,l){return this.oRequest.sendRequest({cmd:"play.setEhomePlayInfo",guid:e,protocal:n,session:o,token:r,ip:a,port:l})}},{key:"startPlayPatch",value:function(e){if(e.length>0)for(var n=0,o=e.length;n<o;n++)e[n].areaName=j.Base64().encode(e[n].areaName),e[n].cameraName=j.Base64().encode(e[n].cameraName);return this.oRequest.sendRequest({cmd:"play.startPlayPatch",params:e})}},{key:"grabOpen",value:function(){var e=this;return new Promise(function(n,o){e.oRequest!==null?e.oRequest.sendRequest({cmd:"window.grabOpen"}).then(function(r){n(r)},function(r){o(r)}):o()})}},{key:"setWndAutoPanState",value:function(e,n){return this.oRequest.sendRequest({cmd:"play.setWndAutoPanState",wndIndex:e,open:n})}},{key:"enablePrivileges",value:function(){return this.oRequest.sendRequest({cmd:"system.enablePrivileges"})}}]),i}();return an="\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000",function(){function i(t){b(this,i);var e=this;this.oOptions=Object.assign({szPluginContainer:"",cbConnectSuccess:null,cbConnectError:null,cbConnectClose:null,iServicePortStart:16960,iServicePortEnd:16969,szClassId:"55A7329E-FAAD-439a-87BC-75BAB3332E7C"},t),this.bFreeze=!1,this.bFocus=!0,this.bEmbed=j.getCreateWndMode(),this.szWndId="",this.iCreateWndTimer=-1,this.iUpdateParentWndTimer=-1,this.bDevTool=!1,this.iVCTimeStart=-1,this.iVCTimeEnd=-1,this.oWndCover={left:0,top:0,right:0,bottom:0},this.oDocOffset={left:0,top:0},this.szTitle="",this.oWindowAttr={outerWidth:0,innerWidth:0,outerHeight:0,innerHeight:0,screenTop:0,screenLeft:0,screenX:0,screenY:0},this.iFixedResizeTimer=-1,this.fVisibilityChange=function(){if(j.isMacOS())document.hidden?e.fHideWnd():e.fShowWnd();else if(document.hidden)e.iVCTimeStart=new Date().getTime(),e.fHideWnd();else{e.iVCTimeEnd=new Date().getTime();var n=j.browser();n.chrome||n.mozilla?(e.iUpdateParentWndTimer>0&&(clearTimeout(e.iUpdateParentWndTimer),e.iUpdateParentWndTimer=-1),e.iVCTimeEnd-e.iVCTimeStart<100?e.iUpdateParentWndTimer=setTimeout(function(){e.oRequest.updateParentWnd().then(function(){e.bFreeze||e.bDevTool||e.fShowWnd()},function(){})},100):e.bFreeze||e.bDevTool||e.fShowWnd()):e.bFreeze||e.bDevTool||e.fShowWnd()}},this.fHideWnd=function(){e.oRequest.hideWnd().then(function(){},function(){})},this.fShowWnd=function(){e.oRequest.showWnd().then(function(){},function(){})},this.fFocus=function(){e.bFocus=!0,setTimeout(function(){e.removeGrabImage(),document.hidden||e.bFreeze||e.bDevTool||e.fShowWnd()},200)},this.fBlur=function(){e.bFocus=!1},this.removeGrabImage=function(){if(!j.isMacOS()){var n=null;if(e.szWndId!==""&&(n=document.getElementById(e.szWndId))){var o=n.querySelectorAll('[data-name="wc-grab-open-image"]');Array.prototype.slice.call(o).forEach(function(r){r.parentNode.removeChild(r)})}}},this.oRequest=new Ll({szPluginContainer:this.oOptions.szPluginContainer,cbConnectSuccess:this.oOptions.cbConnectSuccess,cbConnectError:this.oOptions.cbConnectError,cbConnectClose:function(o){e.iCreateWndTimer>0&&(clearTimeout(e.iCreateWndTimer),e.iCreateWndTimer=-1),e.removeGrabImage(),e.oOptions.cbConnectClose&&e.oOptions.cbConnectClose(o)},iServicePortStart:this.oOptions.iServicePortStart,iServicePortEnd:this.oOptions.iServicePortEnd,szClassId:this.oOptions.szClassId})}return c(i,[{key:"JS_SetWindowControlCallback",value:function(e){var n=this,o={cbSelectWnd:function(a){e.cbSelectWnd&&e.cbSelectWnd(parseInt(a.wndIndex,10),a.cameraID,a.siteID,a.opendFisheye)},cbTogglePTZ:function(a){e.cbTogglePTZ&&e.cbTogglePTZ(a.cameraID,a.siteID)},cbUpdateCameraIcon:function(a){e.cbUpdateCameraIcon&&e.cbUpdateCameraIcon(a.cameraID,parseInt(a.playing,10),a.siteID)},cbGetLastError:function(a){e.cbGetLastError&&e.cbGetLastError(a.error,parseInt(a.type,10))},cbTalkUrlEmpty:function(a){e.cbTalkUrlEmpty&&e.cbTalkUrlEmpty(a.cameraID)},cbGotoPlayback:function(a){e.cbGotoPlayback&&e.cbGotoPlayback(a.cameraID,a.siteID)},cbShowDisplayInfo:function(a){e.cbShowDisplayInfo&&e.cbShowDisplayInfo(parseInt(a.videoWidth,10),parseInt(a.videoHeight,10),parseInt(a.frameRate,10))},cbPreviewWnd3DPostion:function(a){e.cbPreviewWnd3DPostion&&e.cbPreviewWnd3DPostion(parseInt(a.startX,10),parseInt(a.startY,10),parseInt(a.endX,10),parseInt(a.endY,10))},cbStopPlayAll:function(){e.cbStopPlayAll&&e.cbStopPlayAll()},cbWheelEvent:function(a){e.cbWheelEvent&&e.cbWheelEvent(parseInt(a.delta,10))},cbAlarmDetail:function(a){e.cbAlarmDetail&&e.cbAlarmDetail(a.alarmId)},cbQuitedFullScreen:function(){setTimeout(function(){n.fShowWnd()},100)},cbManuallyClose:function(a){e.cbManuallyClose&&e.cbManuallyClose(a.cameraID,a.siteID,parseInt(a.wndIndex,10))},cbIntegrationCallBack:function(a){e.cbIntegrationCallBack&&e.cbIntegrationCallBack(a)},cbChangeStorage:function(a){e.cbChangeStorage&&e.cbChangeStorage(parseInt(a.storageType,10),a.cameraID,a.siteID)},cbFisheyeExpandChanged:function(a){e.cbFisheyeExpandChanged&&e.cbFisheyeExpandChanged(a.cameraID,a.siteID,parseInt(a.wndIndex,10),a.open)},cbGetEhomePlayInfo:function(a){e.cbGetEhomePlayInfo&&e.cbGetEhomePlayInfo(a.siteID,a.guid)},cbWndPtzControl:function(a){e.cbWndPtzControl&&e.cbWndPtzControl(parseInt(a.wndIndex,10),a.cameraID,a.command,a.speed,a.stop)},cbMessageCallBack:function(a){(a=a.data).type==="menuOpen"?n.szWndId!==""&&(document.getElementById(n.szWndId).innerHTML="<img data-name='wc-grab-open-image' src='data:image/png;base64,".concat(a.message.image,"' width='100%' height='100%' />")):a.type==="changeTitle"?document.title.indexOf(n.oRequest.getRequestUUID())===-1&&(n.szTitle=document.title,document.title=n.szTitle+an+n.oRequest.getRequestUUID(),setTimeout(function(){a.message==="updateParentWnd"?n.oRequest.updateParentWnd():a.message==="restoreWnd"&&n.oRequest.restoreWnd()},300)):a.type==="changeTitleDone"?n.szTitle!==""&&(document.title=document.title.replace(an+n.oRequest.getRequestUUID(),"")):a.type==="splitChange"?e.cbSplitChange&&e.cbSplitChange(a.message.splitType):a.type==="showMaximized"&&e.cbShowMaximized&&e.cbShowMaximized(a.message.showMax)}};this.oRequest.setWindowControlCallback(o)}},{key:"JS_SetSadpCallback",value:function(e){var n={cbDeviceFind:null};Object.assign(n,e),this.oRequest.setSadpCallback(n)}},{key:"JS_SetSliceCallback",value:function(e){var n={cbImageSliced:function(r){e.cbImageSliced&&(r.picName!==""&&(r.picName=j.Base64().decode(r.picName)),e.cbImageSliced(r))}};this.oRequest.setSliceCallback(n)}},{key:"JS_SetSerialCallback",value:function(e){var n={cbCardFind:function(r){e.cbCardFind&&e.cbCardFind(r)},cbFingerFind:function(r){e.cbFingerFind&&e.cbFingerFind(r.fingerPrint,r.fingerQuality)},cbImageFind:function(r){e.cbImageFind&&e.cbImageFind(r.image)},cbImageErrorFind:function(r){e.cbImageErrorFind&&e.cbImageErrorFind(r.errorModule,r.errorCode)},cbImageWndVisibleFind:function(r){e.cbImageWndVisibleFind&&e.cbImageWndVisibleFind(r.visible)}};this.oRequest.setSerialCallback(n)}},{key:"JS_SetUIControlCallback",value:function(e){var n={cbClickMenuItem:function(r){e.cbClickMenuItem&&e.cbClickMenuItem(r.itemIndex)},cbMenuMouseIn:function(){e.cbMenuMouseIn&&e.cbMenuMouseIn()},cbMenuMouseOut:function(){e.cbMenuMouseOut&&e.cbMenuMouseOut()}};this.oRequest.setUIControlCallback(n)}},{key:"JS_SetUpgradeCallback",value:function(e){var n={cbCheckUpgrade:function(r){e.cbCheckUpgrade&&e.cbCheckUpgrade(r)}};this.oRequest.setUpgradeCallback(n)}},{key:"JS_CheckVersion",value:function(e){var n=this.oRequest.getServiceVersion(),o=[],r=[];n!==""&&(o=(n=n.replace(/,[\s]*/g,".")).split(".")),e!==""&&(r=(e=e.replace(/,[\s]*/g,".")).split("."));var a=!1;if(r.length===o.length){for(var l=0,u=o.length;l<u;l++)if(parseInt(r[l],10)!==parseInt(o[l],10)){if(parseInt(r[l],10)>parseInt(o[l],10)){a=!0;break}break}}return a}},{key:"JS_StartService",value:function(e,n){return this.oRequest.startService(e,n)}},{key:"JS_StopService",value:function(e){return this.oRequest.stopService(e)}},{key:"JS_Disconnect",value:function(){return this.oRequest.disconnect()}},{key:"JS_OpenDirectory",value:function(e){return this.oRequest.openDirectory(e)}},{key:"JS_OpenFile",value:function(e,n,o){return this.oRequest.openFile(e,n,o)}},{key:"JS_SelectDirectory",value:function(e,n){return this.oRequest.selectDirectory(e,n)}},{key:"JS_SelectFile",value:function(e,n,o){return this.oRequest.selectFile(e,n,o)}},{key:"JS_GetLocalConfig",value:function(e){return this.oRequest.getLocalConfig(e)}},{key:"JS_SetLocalConfig",value:function(e){return this.oRequest.setLocalConfig(e)}},{key:"JS_SetDocOffset",value:function(e){return e&&(this.oDocOffset=e),!0}},{key:"JS_SetWindowAttr",value:function(e){return e&&(this.oWindowAttr=e),!0}},{key:"JS_CreateWnd",value:function(e,n,o,r){var a=this;this.szWndId=e,(r=r||{}).bEmbed!==void 0&&(this.bEmbed=r.bEmbed);var l=!0;return r.bActiveXParentWnd!==void 0&&(l=r.bActiveXParentWnd),new Promise(function(u,d){var h=document.getElementById(e);if(h){var v=null,D="",L=a.oRequest.getRequestUUID();r.cbSetDocTitle===void 0?(v=window.top,D=v.document.title,v.document.title=D+an+L):r.cbSetDocTitle(L),a.iCreateWndTimer=setTimeout(function(){var k="";if(j.browser().msie?k="IEFrame":j.browser().chrome?k="Chrome":j.browser().safari&&(k=D),!a.bDevTool){var q=j.getDevicePixelRatio(),ne=j.getWndPostion(h,a.bEmbed,a.oWindowAttr);ne.left+=Math.round(a.oDocOffset.left*q),ne.top+=Math.round(a.oDocOffset.top*q),n=Math.round(n*q),o=Math.round(o*q),a.oRequest.createWnd(ne.left,ne.top,n,o,k,a.bEmbed,l).then(function(){r.cbSetDocTitle===void 0&&(v.document.title=v.document.title.replace(an+L,"")),u()},function(Z){r.cbSetDocTitle===void 0&&(v.document.title=v.document.title.replace(an+L,"")),Z.errorCode===5001?(document.hidden||a.bFreeze||!a.bFocus||a.fShowWnd(),u()):d(Z)})}},300),document.addEventListener("visibilitychange",a.fVisibilityChange,!1),window.addEventListener("focus",a.fFocus),window.addEventListener("blur",a.fBlur)}else d()})}},{key:"JS_ShowWnd",value:function(){this.bFreeze=!1,document.hidden||this.bDevTool||this.fShowWnd()}},{key:"JS_HideWnd",value:function(){this.bFreeze=!0,this.fHideWnd()}},{key:"JS_DestroyWnd",value:function(){return document.removeEventListener("visibilitychange",this.fVisibilityChange,!1),window.removeEventListener("focus",this.fFocus),window.removeEventListener("blur",this.fBlur),this.oRequest.destroyWnd()}},{key:"JS_Resize",value:function(e,n,o){var r=this,a=null,l=e,u=n;if(this.szWndId!==""&&(a=document.getElementById(this.szWndId)),a){var d=j.getWndPostion(a,this.bEmbed,this.oWindowAttr),h=j.getDevicePixelRatio();d.left+=Math.round(this.oDocOffset.left*h),d.top+=Math.round(this.oDocOffset.top*h),(!j.browser().msie||j.browser().msie&&j.browser().version==="11.0")&&(this.oWndCover.left>0&&(d.left+=Math.round(this.oWndCover.left*h),e-=this.oWndCover.left),this.oWndCover.top>0&&(d.top+=Math.round(this.oWndCover.top*h),n-=this.oWndCover.top),this.oWndCover.right>0&&(e-=this.oWndCover.right),this.oWndCover.bottom>0&&(n-=this.oWndCover.bottom)),e=Math.round(e*h),n=Math.round(n*h),this.oRequest.setWndGeometry(d.left,d.top,e,n),(j.browser().msie&&j.browser().version==="11.0"||!j.isWindows())&&(o&&o.bFixed?this.iFixedResizeTimer=-1:(this.iFixedResizeTimer>-1&&(clearTimeout(this.iFixedResizeTimer),this.iFixedResizeTimer=-1),this.iFixedResizeTimer=setTimeout(function(){r.JS_Resize(l,u,{bFixed:!0})},300)))}}},{key:"JS_SetWndCover",value:function(e,n){var o=j.getDevicePixelRatio();return(!j.browser().msie||j.browser().msie&&j.browser().version==="11.0")&&(e==="left"?this.oWndCover.left=n:e==="top"?this.oWndCover.top=n:e==="right"?this.oWndCover.right=n:e==="bottom"&&(this.oWndCover.bottom=n)),n=Math.round(n*o),this.oRequest.setWndCover(e,n)}},{key:"JS_CuttingPartWindow",value:function(e,n,o,r,a){var l=j.getDevicePixelRatio();return e=Math.round(e*l),n=Math.round(n*l),o=Math.round(o*l),r=Math.round(r*l),a=Math.round(a*l),this.oRequest.cuttingPartWindow(e,n,o,r,a)}},{key:"JS_RepairPartWindow",value:function(e,n,o,r,a){var l=j.getDevicePixelRatio();return e=Math.round(e*l),n=Math.round(n*l),o=Math.round(o*l),r=Math.round(r*l),a=Math.round(a*l),this.oRequest.repairPartWindow(e,n,o,r,a)}},{key:"JS_ChangePlayMode",value:function(e){return this.oRequest.changePlayMode(e)}},{key:"JS_SetLanguageType",value:function(e){return this.oRequest.setLanguageType(e)}},{key:"JS_InitLoginInfo",value:function(e){return this.oRequest.initLoginInfo(e)}},{key:"JS_SetTranslateFile",value:function(e){return this.oRequest.setTranslateFile(e)}},{key:"JS_SwitchToSimple",value:function(e){return this.oRequest.switchToSimple(e)}},{key:"JS_SetVsmToken",value:function(e){return this.oRequest.setVsmToken(e)}},{key:"JS_Play",value:function(e,n,o,r,a,l,u,d,h){return this.oRequest.startPlay(e,n,o,r,a,l,u,d,h)}},{key:"JS_Enable3DZoom",value:function(e){return this.oRequest.setPreview3DPosition(e)}},{key:"JS_StopTotal",value:function(){return this.oRequest.stopTotal()}},{key:"JS_SetDragMode",value:function(e){return this.oRequest.setDragMode(e)}},{key:"JS_ShowErrorInfoInFullScreen",value:function(e){return this.oRequest.showErrorInfoInFullScreen(e)}},{key:"JS_SetNumberOfWindows",value:function(e){return this.oRequest.setNumberOfWindows(e)}},{key:"JS_InitCardReader",value:function(e){return this.oRequest.initCardReader(e)}},{key:"JS_UnInitCardReader",value:function(){return this.oRequest.unInitCardReader()}},{key:"JS_StartAutoMode",value:function(){return this.oRequest.startAutoMode()}},{key:"JS_StopAutoMode",value:function(){return this.oRequest.stopAutoMode()}},{key:"JS_InitFingerprint",value:function(e){return this.oRequest.initFingerprint(e)}},{key:"JS_UnInitFingerprint",value:function(){return this.oRequest.unInitFingerprint()}},{key:"JS_StartCollectFingerprint",value:function(){return this.oRequest.startCollectFingerprint()}},{key:"JS_StopCollectFingerprint",value:function(){return this.oRequest.stopCollectFingerprint()}},{key:"JS_IsCollectingFingerprint",value:function(){return this.oRequest.isCollectingFingerprint()}},{key:"JS_InitVideocapture",value:function(e){return this.oRequest.initVideocapture(e)}},{key:"JS_UnInitVideocapture",value:function(){return this.oRequest.unInitVideocapture()}},{key:"JS_RegisterDeviceType",value:function(e){return this.oRequest.registerDeviceType(e)}},{key:"JS_ActiveOnlineDevice",value:function(e,n){return this.oRequest.activeOnlineDevice(e,n)}},{key:"JS_RefreshDeviceList",value:function(){return this.oRequest.refreshDeviceList()}},{key:"JS_ModifyDeviceNetParam",value:function(e,n,o,r,a,l,u){return this.oRequest.modifyDeviceNetParam(e,n,o,r,a,l,u)}},{key:"JS_ExportKeyFile",value:function(e){return this.oRequest.exportKeyFile(e)}},{key:"JS_ImportKeyFile",value:function(){return this.oRequest.importKeyFile()}},{key:"JS_ResetPassword",value:function(e,n,o,r){return this.oRequest.resetPassword(e,n,o,r)}},{key:"JS_UploadPicture",value:function(e){return this.oRequest.uploadPicture(e)}},{key:"JS_ShowSelectMenu",value:function(e,n,o,r,a){var l=document.getElementById(e);if(l){var u=j.getWndPostion(l,!1,this.oWindowAttr);a==="center"?u.left-=Math.round((n-l.offsetWidth)/2):a==="right"&&(u.left-=Math.round(n-l.offsetWidth));var d=j.getDevicePixelRatio();n=Math.round(n*d),o=Math.round(o*d);var h=1*window.getComputedStyle(l).height.slice(0,-2),v=Math.round(h*d);this.oRequest.showSelectMenu(u.left,u.top+v,n,o,r)}}},{key:"JS_HideSelectMenu",value:function(){this.oRequest.hideSelectMenu()}},{key:"JS_DestroySelectMenu",value:function(){return this.oRequest.destroySelectMenu()}},{key:"JS_DeviceConfig",value:function(e){return this.oRequest.deviceConfig(e)}},{key:"JS_CloudStorageConfig",value:function(e){return this.oRequest.cloudStorageConfig(e)}},{key:"JS_EzvizRemoteConfig",value:function(e){return this.oRequest.ezvizRemoteConfig(e)}},{key:"JS_ShowAlarmInfoInFullScreen",value:function(e,n,o){return this.oRequest.showAlarmInfoInFullScreen(e,n,o)}},{key:"JS_SetImmediatePlaybackTime",value:function(e){return this.oRequest.setImmediatePlaybackTime(e)}},{key:"JS_SetDrawStatus",value:function(e){return this.oRequest.setDrawStatus(e)}},{key:"JS_ClearRegion",value:function(){return this.oRequest.clearRegion()}},{key:"JS_SetDrawShapeInfo",value:function(e,n){return this.oRequest.setDrawShapeInfo(e,n)}},{key:"JS_SetGridInfo",value:function(e){return this.oRequest.setGridInfo(e)}},{key:"JS_GetGridInfo",value:function(){return this.oRequest.getGridInfo()}},{key:"JS_SetPolygonInfo",value:function(e){return this.oRequest.setPolygonInfo(e)}},{key:"JS_GetPolygonInfo",value:function(){return this.oRequest.getPolygonInfo()}},{key:"JS_SetLineInfo",value:function(e){return this.oRequest.setLineInfo(e)}},{key:"JS_GetLineInfo",value:function(){return this.oRequest.getLineInfo()}},{key:"JS_SetRectInfo",value:function(e){return this.oRequest.setRectInfo(e)}},{key:"JS_GetRectInfo",value:function(){return this.oRequest.getRectInfo()}},{key:"JS_ClearShapeByType",value:function(e){return this.oRequest.clearShapeByType(e)}},{key:"JS_SensitiveEncrypt",value:function(e,n,o){return this.oRequest.sensitiveEncrypt(e,n,o)}},{key:"JS_SendRequest",value:function(e){return this.oRequest.sendRequest(e)}},{key:"JS_RequestInterface",value:function(e){return this.oRequest.requestInterface(e)}},{key:"JS_StopPlay",value:function(e){return this.oRequest.stopPlay(e)}},{key:"JS_ShowRemoteConfig",value:function(e){return this.oRequest.showRemoteConfig(e)}},{key:"JS_Video2Picture",value:function(){return this.oRequest.video2Picture()}},{key:"JS_Picture2Video",value:function(){return this.oRequest.picture2Video()}},{key:"JS_PtzControl",value:function(e){return this.oRequest.ptzControl(e)}},{key:"JS_SimMouseClickEvent",value:function(e,n){return this.oRequest.simMouseClickEvent(e,n)}},{key:"JS_US_SetMaxJobCount",value:function(e){return this.oRequest.us_SetMaxJobCount(e)}},{key:"JS_US_GetMaxJobCount",value:function(){return this.oRequest.us_GetMaxJobCount()}},{key:"JS_US_AddSchedule",value:function(e){return this.oRequest.us_AddSchedule(e)}},{key:"JS_US_DelSchedule",value:function(e){return this.oRequest.us_DelSchedule(e)}},{key:"JS_US_GetScheduleList",value:function(e){return this.oRequest.us_GetScheduleList(e)}},{key:"JS_US_GetSchedule",value:function(e,n){return this.oRequest.us_GetSchedule(e,n)}},{key:"JS_US_UpgradeAction",value:function(e,n){return this.oRequest.us_UpgradeAction(e,n)}},{key:"JS_US_CheckUpgradeableDevice",value:function(e){return this.oRequest.us_CheckUpgradeableDevice(e)}},{key:"JS_US_CheckUpgradeableDeviceList",value:function(e){return this.oRequest.us_CheckUpgradeableDeviceList(e)}},{key:"JS_US_IsRunningAsyCheckUpgradeable",value:function(){return this.oRequest.us_IsRunningAsyCheckUpgradeable()}},{key:"JS_US_StopAsyCheckUpgradeable",value:function(){return this.oRequest.us_StopAsyCheckUpgradeable()}},{key:"JS_GetFishEyePTZPreset",value:function(e){return this.oRequest.getFishEyePTZPreset(e)}},{key:"JS_SetFishEyePTZPreset",value:function(e,n,o){return this.oRequest.setFishEyePTZPreset(e,n,o)}},{key:"JS_ControlFishEyePTZ",value:function(e,n,o,r){return this.oRequest.controlFishEyePTZ(e,n,o,r)}},{key:"JS_ControlFishEyeParol",value:function(e,n,o){return this.oRequest.controlFishEyeParol(e,n,o)}},{key:"JS_SetFirstDayOfWeek",value:function(e){return this.oRequest.setFirstDayOfWeek(e)}},{key:"JS_SetEhomePlayInfo",value:function(e,n,o,r,a,l){return this.oRequest.setEhomePlayInfo(e,n,o,r,a,l)}},{key:"JS_PlayPatch",value:function(e){return this.oRequest.startPlayPatch(e)}},{key:"JS_SetWndAutoPanState",value:function(e,n){return this.oRequest.setWndAutoPanState(e,n)}},{key:"JS_EnablePrivileges",value:function(){return this.oRequest.enablePrivileges()}}],[{key:"JS_WakeUp",value:function(e){var n=document.createElement("iframe");n.style.display="none",n.src=e,document.body.appendChild(n),setTimeout(function(){document.body.removeChild(n)},3e3)}}]),i}()}(),ln=An,Un=function(){function ue(b){var y;Ot()(this,ue),fe()(this,"_player",void 0),fe()(this,"_container",void 0),fe()(this,"_showHikCallbackInfo",void 0),fe()(this,"_options",void 0),fe()(this,"_count",0),fe()(this,"_playMode",0),fe()(this,"_downloadUrl",void 0),fe()(this,"_defaultUrl","http://".concat(window.location.hostname,":31909/player/VideoWebPlugin.exe")),this._options=b.platformInfo,this._container=b.container,this._playMode=b.playMode||0,this._showHikCallbackInfo=b.showCallback||!1,this._downloadUrl=(y=b==null?void 0:b.downloadUrl)!==null&&y!==void 0?y:""}return zt()(ue,[{key:"init",value:function(y){this._initPlugin(y)}},{key:"_debounce",value:function(y,c){var w;return function(){w&&clearTimeout(w),w=setTimeout(function(){y()},c)}}},{key:"_initPlugin",value:function(y){var c=this;this._player=new ln({szPluginContainer:this._container,iServicePortStart:15900,iServicePortEnd:15900,szClassId:"23BF3B0A-2C56-4D97-9C03-0CB103AA8F11",cbConnectClose:function(P){P||c._onError()},cbConnectError:function(P){console.log("\u6D77\u5EB7\u63D2\u4EF6\u8FDE\u63A5\u9519\u8BEF\u4FE1\u606F",P),c._onError()},cbConnectSuccess:function(P){console.log("\u6D77\u5EB7\u63D2\u4EF6\u8FDE\u63A5\u6210\u529F",P),c._startService(y),window.addEventListener("resize",function(){c._debounce(c._resize(),500)}),window.addEventListener("scroll",function(){c._debounce(c.scrollWnd(),500)})}})}},{key:"_startService",value:function(y){var c=this;this._player.JS_StartService("window",{dllPath:"./VideoPluginConnect.dll"}).then(function(){console.log("\u6D77\u5EB7\u63D2\u4EF6\u670D\u52A1\u542F\u52A8\u6210\u529F"),c._player.JS_SetWindowControlCallback({cbIntegrationCallBack:c._cbIntegrationCallBack}),c._createPlayWnd(y)})}},{key:"_createPlayWnd",value:function(y){var c=this;this._player.JS_CreateWnd(this._container).then(function(){var w;(w=c._player)===null||w===void 0||w.JS_HideWnd(),c._initPlayArgument(y)}).catch(function(w){console.log("\u7A97\u53E3\u6253\u5F00\u5931\u8D25",w)})}},{key:"_initPlayArgument",value:function(y){var c=this;this._player.JS_RequestInterface({funcName:"init",argument:JSON.stringify({appkey:c._options.appkey,secret:c._options.appsecret,ip:c._options.host,playMode:c._playMode,port:c._options.port,snapDir:"D:\\SnapDir",videoDir:"D:\\VideoDir",layout:c._options.layout||"1x1",enableHTTPS:1,language:"zh_CN",reconnectDuration:5,reconnectTimes:5,showToolbar:1})}).then(function(){c._resize(),y==null||y(c._player)})}},{key:"_onError",value:function(){var y,c,w=this;this._player=null,(y=(c=ln).JS_WakeUp)===null||y===void 0||y.call(c,"VideoWebPlugin://"),this._count+=1;var P=document.getElementById(this._container);P.innerHTML=`
			<div style="width: 100%; height: 100%; display: flex; justify-content: flex-start;
				align-items: flex-start;padding: 10px; box-sizing: border-box;">
				<div style="font-size: 16px;">\u63D2\u4EF6\u672A\u542F\u52A8\uFF0C\u6B63\u5728\u5C1D\u8BD5\u542F\u52A8\uFF0C\u8BF7\u7A0D\u5019...</div>
			</div>`,this._count<2?setTimeout(function(){w._initPlugin()},2e3):P.innerHTML=`
				<div style="width: 100%; height: 100%; display: flex; justify-content: flex-start;
					align-items: flex-start;padding: 10px; box-sizing: border-box;">
					<div style="font-size: 16px;">
						<span>\u63D2\u4EF6\u542F\u52A8\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u63D2\u4EF6\u662F\u5426\u5B89\u88C5!\u672A\u5B89\u88C5\u8BF7</span>
						<a href=`.concat(this._downloadUrl?this._downloadUrl:this._defaultUrl,`>\u70B9\u51FB\u4E0B\u8F7D\u63D2\u4EF6</a>
						<span>\u6216\u91CD\u65B0\u6253\u5F00\u5C1D\u8BD5\u542F\u52A8\uFF01</span>
					</div>
				</div>
			`)}},{key:"_cbIntegrationCallBack",value:function(y){console.log("\u6D77\u5EB7\u63D2\u4EF6\u56DE\u8C03\u4FE1\u606F",y)}},{key:"_resize",value:function(){if(this._player){var y=document.getElementById(this._container).parentElement,c=y.clientHeight,w=y.clientWidth;this.resizeWnd(w,c)}}},{key:"getPlayer",value:function(){return this._player}},{key:"getInitOptions",value:function(){return this._options}},{key:"resizeWnd",value:function(y,c,w){if(this._player){this._player.JS_Resize(y,c),w==null||w({status:0,data:"\u63D2\u4EF6\u53D8\u66F4\u5C3A\u5BF8"});return}w==null||w({status:-1,data:"\u63D2\u4EF6\u5B9E\u4F8B\u65E0\u6548, \u8BF7\u68C0\u67E5\u63D2\u4EF6\u662F\u5426\u6B63\u5E38\u5B9E\u4F8B\u5316\uFF01"})}},{key:"_setWndCover",value:function(){var y=window.innerWidth,c=window.innerHeight,w=document.querySelector("#".concat(this._container)),P=w.getBoundingClientRect(),E=P.left<0?Math.abs(P.left):0,T=P.top<0?Math.abs(P.top):0,C=P.right-y>0?Math.round(P.right-y):0,B=P.bottom-c>0?Math.round(P.bottom-c):0,p=w,I=p.clientHeight,U=p.clientWidth;E=E>U?U:E,T=T>I?I:T,C=C>U?U:C,B=B>I?I:B,this._player.JS_RepairPartWindow(0,0,U+1,I),E!==0&&this._player.JS_CuttingPartWindow(0,0,E,I),T!==0&&this._player.JS_CuttingPartWindow(0,0,U+1,T),C!==0&&this._player.JS_CuttingPartWindow(U-C,0,C,I),B!==0&&this._player.JS_CuttingPartWindow(0,I-B,U,B)}},{key:"scrollWnd",value:function(){this._player&&(this._resize(),this._setWndCover())}},{key:"hideWnd",value:function(y){if(this._player){this._player.JS_HideWnd(),y==null||y({status:0,data:"success"});return}y==null||y({status:-1,data:"\u63D2\u4EF6\u5B9E\u4F8B\u65E0\u6548, \u8BF7\u68C0\u67E5\u63D2\u4EF6\u662F\u5426\u6B63\u5E38\u5B9E\u4F8B\u5316\uFF01"})}},{key:"showWnd",value:function(y){if(this._player){this._player.JS_ShowWnd(),y==null||y({status:0,data:"success"});return}y==null||y({status:-1,data:"\u63D2\u4EF6\u5B9E\u4F8B\u65E0\u6548, \u8BF7\u68C0\u67E5\u63D2\u4EF6\u662F\u5426\u6B63\u5E38\u5B9E\u4F8B\u5316\uFF01"})}},{key:"destroyWnd",value:function(y){var c=this;if(this._player){this._player.JS_Disconnect().then(function(){y==null||y({status:0,data:"\u9500\u6BC1\u63D2\u4EF6\u7A97\u53E3\u6210\u529F"}),window.removeEventListener("resize",c._resize),window.removeEventListener("scroll",c.scrollWnd)},function(){y==null||y({status:-1,data:"\u9500\u6BC1\u63D2\u4EF6\u7A97\u53E3\u5931\u8D25"}),window.removeEventListener("resize",c._resize),window.removeEventListener("scroll",c.scrollWnd)});return}y==null||y({status:-1,data:"\u63D2\u4EF6\u5B9E\u4F8B\u65E0\u6548, \u8BF7\u68C0\u67E5\u63D2\u4EF6\u662F\u5426\u6B63\u5E38\u5B9E\u4F8B\u5316\uFF01"})}},{key:"play",value:function(y,c){if(this._player){var w;(w=this._player)===null||w===void 0||w.JS_RequestInterface({argument:y,funcName:"startPreview"}).then(function(){c==null||c({status:0,data:"\u5B9E\u65F6\u9884\u89C8\u6210\u529F"})},function(P){c==null||c(P)})}}},{key:"playMultiple",value:function(y,c){if(this._player){var w;(w=this._player)===null||w===void 0||w.JS_RequestInterface({argument:{list:y},funcName:"startMultiPreviewByCameraIndexCode"}).then(function(){c==null||c({status:0,data:"\u591A\u8DEF\u9884\u89C8\u6210\u529F"})},function(P){c==null||c(P)})}}},{key:"playback",value:function(y,c){if(this._player){var w;(w=this._player)===null||w===void 0||w.JS_RequestInterface({argument:y,funcName:"startPlayback"}).then(function(){c==null||c({status:0,data:"\u56DE\u653E\u6210\u529F"})},function(P){c==null||c(P)})}}},{key:"playbackMultiple",value:function(y,c){if(this._player){var w;(w=this._player)===null||w===void 0||w.JS_RequestInterface({argument:{list:y},funcName:"startMultiPlaybackByCameraIndexCode"}).then(function(){c==null||c({status:0,data:"\u591A\u8DEF\u9884\u89C8\u6210\u529F"})},function(P){c==null||c(P)})}}}]),ue}(),un=Un,cn=function(b){var y=b.platform,c=b.onInit,w=b.downloadUrl,P=b.onError,E="http://".concat(window.location.hostname,":31909/player/VideoWebPlugin.exe"),T=(0,N.jsxs)("div",{children:["\u8BE5\u63D2\u4EF6\u4EC5\u652F\u6301windows\uFF0C\u9700\u5148",(0,N.jsx)("a",{href:w||E,children:"\u4E0B\u8F7D\u63D2\u4EF6"}),"\u5B89\u88C5\u540E\u4F7F\u7528!"]}),C=(0,le.useRef)(),B=function(){var I=new un({container:"hikPluginPlayer",platformInfo:y});I.init(function(){C.current=I,c==null||c(I)})};return(0,le.useEffect)(function(){return document.getElementById("hikPluginPlayer").innerHTML="".concat(T),function(){if(C.current){var p,I;(p=C.current)===null||p===void 0||p.hideWnd(),(I=C.current)===null||I===void 0||I.destroyWnd()}C.current=null}},[]),(0,le.useEffect)(function(){y.host&&y.port&&y.appkey&&y.appsecret?(document.getElementById("hikPluginPlayer").innerHTML=`
				<div style="width: 100%; height: 100%; padding: 10px; box-sizing: border-box;">
					<div style="font-size: 16px;">
						<span>\u6D77\u5EB7\u63D2\u4EF6\u542F\u52A8\u4E2D\uFF0C\u8BF7\u7A0D\u7B49...</span>
					</div>
				</div>
			`,B()):P==null||P({status:-1,msg:"\u5E73\u53F0\u4FE1\u606F\u4E0D\u5B8C\u6574\uFF01"})},[y]),(0,N.jsx)("div",{className:"hik-plugin-player",children:(0,N.jsx)("div",{id:"hikPluginPlayer"})})},jn=cn,dn=jn,Jn=oe(70078),hn=function(){function ue(b){var y,c,w,P;Ot()(this,ue),fe()(this,"_container",void 0),fe()(this,"_options",void 0),fe()(this,"_player",void 0),fe()(this,"_directionApi",void 0),fe()(this,"_cameraApi",void 0),fe()(this,"_downloadUrl",void 0),fe()(this,"_defaultUrl","http://".concat(window.location.hostname,":31909/player/DHPlayerSetup.exe")),fe()(this,"_useRTSP",!1),fe()(this,"_handleRTSP",void 0),fe()(this,"_events",void 0),fe()(this,"_reloadCount",0),fe()(this,"_defaultNode",`
		<div style="padding: 10px;">
			<span>\u63D2\u4EF6\u91CD\u542F\u4E2D~, \u8BF7\u7A0D\u540E...</span>
		</div>
	`),this._container=b.container,this._options=b.platformInfo,this._cameraApi=(y=b==null?void 0:b.cameraApi)!==null&&y!==void 0?y:"",this._directionApi=(c=b==null?void 0:b.directionApi)!==null&&c!==void 0?c:"",this._downloadUrl=(w=b==null?void 0:b.downloadUrl)!==null&&w!==void 0?w:"",this._useRTSP=(P=b==null?void 0:b.useRTSP)!==null&&P!==void 0?P:!1,this._handleRTSP=this._useRTSP?b==null?void 0:b.handleRTSP:void 0,this._events={}}return zt()(ue,[{key:"on",value:function(y,c){this._events[y]||(this._events[y]=[]),this._events[y].push(c)}},{key:"emit",value:function(y,c){this._events[y]&&this._events[y].forEach(function(w){return w(c)})}},{key:"init",value:function(y,c){this._initPlugin(y,c)}},{key:"_initPlugin",value:function(y,c){var w,P=this,E=this;this._player=new VideoPlayer({videoId:E._container,windowType:0,usePluginLogin:!E._useRTSP||!0,pluginLoginInfo:{host:E._options.host,port:E._options.port,username:E._options.username,password:E._options.password},request:{real:E._useRTSP&&E._handleRTSP?E._handleRTSP():""},division:(w=E._options)!==null&&w!==void 0&&w.division?E._options.division:4,draggable:!1,showBar:!0,shieldClass:[],coverShieldClass:[],parentIframeShieldClass:[],isResetConnect:!0,createSuccess:function(C){console.log("create success",C,E._player),y==null||y(E._player)},createError:function(C){console.log("create error",C),c==null||c({status:-1,msg:"\u521B\u5EFA\u5931\u8D25",data:C}),document.getElementById("".concat(P._container)).innerHTML=E._defaultNode,C.code===1004&&P._reloadCount<4?(E._reloadCount=P._reloadCount+1,E._player.loginServer()):setTimeout(function(){document.getElementById("".concat(E._container)).innerHTML=`
							<div style="padding: 10px;">
								<div style="font-size: 16px; vertical-align: middle;">
									<span>\u63D2\u4EF6\u542F\u52A8\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u63D2\u4EF6\u662F\u5426\u5B89\u88C5!\u672A\u5B89\u88C5\u8BF7</span>
									<a class="ml-2" href=`.concat(E._downloadUrl?E._downloadUrl:E._defaultUrl,`>\u70B9\u51FB\u4E0B\u8F7D\u63D2\u4EF6</a>
									\u6216
									<a id="hanleTrigger">\u624B\u52A8\u89E6\u53D1</a>\u5C1D\u8BD5\u542F\u52A8\uFF0C\u5982\u82E5\u65E0\u6CD5\u542F\u52A8\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\uFF01
								</div>
							</div>
						`),document.getElementById("hanleTrigger").addEventListener("click",function(){E.triggerReload()})},2e3)},dhPlayerMessage:function(C,B){console.log("-----\u89E6\u53D1\u516C\u5171\u56DE\u8C03-----",C,B)},clickWindow:function(C,B){console.log("-----\u89E6\u53D1\u9F20\u6807\u5355\u51FB\u7A97\u53E3\u56DE\u8C03-----",C,B),P.emit("clickWindow",B),B!=null&&B.channelId},changeDivision:function(C){console.log("-----\u89E6\u53D1\u64AD\u653E\u5668\u7A97\u53E3\u7684\u6570\u91CF\u56DE\u8C03-----",C),P.emit("changeDivision",C)}})}},{key:"triggerReload",value:function(){document.getElementById("".concat(this._container)).innerHTML=this._defaultNode,this._initPlugin()}},{key:"play",value:function(y){var c;(c=this._player)===null||c===void 0||c.startReal(y)}},{key:"destroyWnd",value:function(){var y;(y=this._player)===null||y===void 0||y.destroy()}},{key:"showWnd",value:function(){var y;(y=this._player)===null||y===void 0||y.show()}},{key:"hideWnd",value:function(){var y;(y=this._player)===null||y===void 0||y.hide()}},{key:"setWndControlBtn",value:function(y,c){var w;(w=this._player)===null||w===void 0||w.setTabControlBtn(y,c)}},{key:"getPlayer",value:function(){return this._player}},{key:"getInitOptions",value:function(){return this._options}}]),ue}(),f=hn,s=function(b){var y=b.platform,c=b.onInit,w=b.downloadUrl,P=b.useRTSP,E=b.onError,T=b.onChangeDivision,C="http://".concat(window.location.hostname,":31909/player/DHPlayerSetup.exe"),B=(0,le.useRef)(),p="<div>\u8BE5\u63D2\u4EF6\u4EC5\u652F\u6301windows\uFF0C\u9700\u5148<a href=".concat(w||C,">\u4E0B\u8F7D\u63D2\u4EF6</a>\u5B89\u88C5\u540E\u4F7F\u7528!</div>"),I=function(ce){var Ce=B.current=new f({container:"dhPluginPlayer",platformInfo:y,downloadUrl:w,useRTSP:P});Ce.on("changeDivision",function(Pe){T==null||T(Pe)}),Ce.init(function(){ce==null||ce(Ce),c==null||c(Ce)},function(Pe){E==null||E(Pe)})};return(0,le.useEffect)(function(){y!=null&&y.host&&y!==null&&y!==void 0&&y.port&&y!==null&&y!==void 0&&y.username&&y!==null&&y!==void 0&&y.password?(document.getElementById("dhPluginPlayer").innerHTML=`
				<div style="width: 100%; height: 100%; padding: 10px; box-sizing: border-box;">
					<div style="font-size: 16px;">
						<span>\u5927\u534E\u63D2\u4EF6\u542F\u52A8\u4E2D\uFF0C\u8BF7\u7A0D\u7B49...</span>
					</div>
				</div>
			`,I()):E==null||E({status:-1,msg:"\u5E73\u53F0\u4FE1\u606F\u4E0D\u5B8C\u6574\uFF01"})},[y]),(0,le.useEffect)(function(){return document.getElementById("dhPluginPlayer").innerHTML="".concat(p),function(){if(B.current){var U,ce;(U=B.current)===null||U===void 0||U.hideWnd(),(ce=B.current)===null||ce===void 0||ce.destroyWnd()}B.current=null}},[]),(0,N.jsx)("div",{className:"dh-plugin-player",children:(0,N.jsx)("div",{id:"dhPluginPlayer"})})},m=s,g=m,_=function(b){var y=b.size,c=y===void 0?"medium":y,w=b.dot,P=b.children,E=b.haAnimated,T=b.count,C=b.text,B=b.color,p=b.style,I=b.shape,U=I===void 0?"circle":I,ce=(0,le.useRef)(null),Ce=(0,le.useMemo)(function(){return w?"":c==="large"?"lango-badge-large":c==="medium"?"lango-badge-medium":"lango-badge-small"},[c]),Pe=(0,le.useMemo)(function(){return T&&typeof T=="number"&&T>0?T>99?"99+":T:T&&bt()(T)==="object"?T:"0"},[T]);return(0,N.jsxs)("div",{ref:ce,className:"lango-badge",children:[!w&&P&&P,(0,N.jsxs)("div",{className:ct()("lango-badge-box",Ce,U==="rectangle"&&"lango-badge-rectangle",!P&&"lango-badge-block",w&&"lango-badge-dot",w&&C&&"lango-badge-text",w&&E&&"lango-badge-animate"),children:[(0,N.jsx)("span",{className:ct()("lango-badge-self"),style:Ee()(Ee()({},p),{},{backgroundColor:B}),children:!w&&(0,N.jsx)("i",{children:w?"":Pe})}),w&&C&&(0,N.jsx)("span",{className:"lango-badge-label",children:C})]})]})},R=_,S=R,F=function(b){var y=b.size,c=y===void 0?"medium":y,w=b.direction,P=w===void 0?"horizontal":w,E=b.wrap,T=b.style,C=b.children,B=(0,le.useMemo)(function(){return"lango-space-".concat(c==="large"?"large":c==="small"?"small":"medium")},[c]),p=(0,le.useMemo)(function(){return"lango-space-".concat(P==="vertical"?"vertical":"horizontal")},[P]),I=(0,le.useMemo)(function(){return"lango-space-".concat(E?"wrap":"nowrap")},[E]);return(0,N.jsx)("div",{className:ct()("lango-space",B,p,I),style:Ee()({},T),children:C})},J=F,H=J,G=oe(19632),x=oe.n(G),W=oe(20745),ae=function(b){var y,c,w=b.rowData,P=b.callback,E=function(B){var p=(B==null?void 0:B.children)||[];return(p==null?void 0:p.length)>0&&(p==null?void 0:p.some(function(I){return I.isChild}))},T=function(B,p){B.checked=!B.checked,P&&P(B,p)};return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"tal-search-filter-row",children:[(0,N.jsx)("div",{className:"tal-search-filter-row-title",children:w.title}),(0,N.jsx)("div",{className:"tal-search-filter-row-children",children:E(w)?(0,N.jsx)("div",{className:"tal-search-filter-row_list",children:w==null||(c=w.children)===null||c===void 0?void 0:c.map(function(C){return(0,N.jsx)("div",{className:"tal-search-filter-row_tag",children:(0,N.jsxs)("span",{className:"tal-search-filter-row_item",onClick:function(){return T(C,w)},children:[(0,N.jsx)("input",{type:"checkbox",checked:C.checked}),(0,N.jsx)("span",{children:C.title})]},C.code)})})},w.code):(y=w.children)===null||y===void 0?void 0:y.map(function(C){var B;return(0,N.jsx)("div",{className:"tal-search-filter-row_list",children:C==null||(B=C.children)===null||B===void 0?void 0:B.map(function(p){return(0,N.jsx)("div",{className:"tal-search-filter-row_tag",children:(0,N.jsxs)("span",{className:"tal-search-filter-row_item",onClick:function(){return T(p,C)},children:[(0,N.jsx)("input",{type:"checkbox",checked:p.checked}),(0,N.jsx)("span",{children:p.title})]},p.code)})})},C.code)})})]})})},ve=function(b){var y=b.data,c=b.delCallback,w=(0,le.useRef)(null),P=function(C){var B=C.target.querySelector(".tal-search-filter-condition_icon");B&&B.classList.remove("tal-search-filter-condition_none")},E=function(C){var B=C.target.querySelector(".tal-search-filter-condition_icon");B&&B.classList.add("tal-search-filter-condition_none")};return(0,le.useEffect)(function(){if(w.current){var T,C;(T=w.current)===null||T===void 0||T.addEventListener("mouseenter",P),(C=w.current)===null||C===void 0||C.addEventListener("mouseleave",E)}return function(){var B,p;(B=w.current)===null||B===void 0||B.removeEventListener("mouseenter",P),(p=w.current)===null||p===void 0||p.removeEventListener("mouseleave",E)}},[]),(0,N.jsx)("div",{className:"tal-search-filter-condition_tag",ref:w,children:(0,N.jsxs)("span",{className:"tal-search-filter-condition_li",children:[y.title,(0,N.jsx)("span",{className:"tal-search-filter-condition_icon tal-search-filter-condition_none",onClick:function(){return c(y)},children:(0,N.jsx)("span",{children:"x"})})]})})};function Ue(ue,b){var y;return function(){y&&clearTimeout(y),y=setTimeout(function(){ue()},b)}}var Ct=function(b){var y=b.filterList,c=b.checkTags,w=b.onChange,P=(0,le.useState)([]),E=re()(P,2),T=E[0],C=E[1],B=(0,le.useRef)(null),p=(0,le.useRef)([]),I=(0,le.useRef)(!1),U=(0,le.useRef)([]),ce=(0,le.useState)(!1),Ce=re()(ce,2),Pe=Ce[0],De=Ce[1],_t=function(O){O.stopPropagation(),O.preventDefault();var Q=O.target.parentElement.parentElement;O.target.innerText.includes("\u66F4\u591A")?(Q.style.height="100%",Q.style.transition="all 0.1s ease",O.target.innerHTML="- \u6536\u8D77",p.current=[].concat(x()(p.current),[O.target.parentElement.className])):(Q.style.height="32px",Q.style.transition="all 0.1s ease",O.target.innerHTML="+ \u66F4\u591A",p.current=p.current.filter(function(Y){return Y!==O.target.parentElement.className}))},Oe=function(){return(0,N.jsx)("div",{className:"tal-search-filter-more",onClick:_t,children:"+ \u66F4\u591A"})},Ke=function(O){var Q;O.stopPropagation(),O.preventDefault();var Y=(Q=B.current)===null||Q===void 0?void 0:Q.querySelector(".tal-search-filter-content");O.target.innerText.includes("\u5C55\u5F00")?(Y.style.height="100%",Y.style.transition="all 0.13s ease",O.target.innerHTML="- \u6536\u8D77",I.current=!0,De(!0)):(Y.style.height="38px",Y.style.transition="all 0.13s ease",O.target.innerHTML="+ \u5C55\u5F00",I.current=!1,De(!1))},Je=function(){return(0,N.jsx)("div",{className:"tal-search-filter-expand_text",onClick:Ke,children:"+ \u5C55\u5F00"})},Se=function de(O){var Q=[];if(O&&O.length>0)for(var Y in O){var he;if(O[Y].isChild&&O[Y].checked&&Q.push(O[Y]),O[Y].children&&(!((he=O[Y])===null||he===void 0||(he=he.children)===null||he===void 0)&&he.length)){var se;Q.push.apply(Q,x()(de((se=O[Y])===null||se===void 0?void 0:se.children)))}}return Q},nt=function de(O,Q){var Y=[];if(O&&(O==null?void 0:O.length)>0){var he=function(be){var pe;if(O[be].isChild){var Le=c?c==null?void 0:c.split(","):[];O[be]=Ee()(Ee()({},O[be]),{},{checked:Q?!1:c&&Le.some(function(We){return We===O[be].code})})}if(O!=null&&(pe=O[be])!==null&&pe!==void 0&&pe.children){var je;O[be]=Ee()(Ee()({},O[be]),{},{children:de((je=O[be])===null||je===void 0?void 0:je.children,Q)})}Y.push(O[be])};for(var se in O)he(se)}return Y},it=(0,le.useCallback)(Ue(function(){C(JSON.parse(JSON.stringify(U.current)))},500),[]),Ie=function(O){for(var Q=[],Y=0;Y<O.length;Y++){var he=O[Y].className;he.includes("tal-search-filter-row_more")&&Q.push(O[Y])}return Q.length>0},St=function(){var O,Q=(O=B.current)===null||O===void 0?void 0:O.querySelectorAll(".tal-search-filter-row_list");Q.forEach(function(Y,he){var se=Ie(Y.children),me=Y.querySelectorAll(".tal-search-filter-row_tag"),be=me.length*116;if(Y.offsetWidth<be&&!se){Y.style.height="32px",Y.style.overflow="hidden",Y.style.position="relative";var pe=document.createElement("div");pe.classList.add("tal-search-filter-row_more"),pe.classList.add("tal-expand-more_".concat(he)),Y.appendChild(pe),W.hydrateRoot(pe,(0,N.jsx)(Oe,{}))}else if(Y.offsetWidth>be&&se){var Le=Y.querySelector(".tal-search-filter-row_more");Y.removeChild(Le)}})},Ci=function(){var O,Q=(O=B.current)===null||O===void 0?void 0:O.querySelector(".tal-search-filter-content");if(Q.offsetHeight>38&&!I.current){Q.style.height="38px",Q.style.overflow="hidden",Q.style.position="relative";var Y=document.createElement("div");Y.className="tal-search-filter-expand_btn",Q.appendChild(Y),W.hydrateRoot(Y,(0,N.jsx)(Je,{}))}},Mt=function(O,Q){var Y=function se(me,be,pe,Le){var je=[];for(var We in me){var Nt,dt;if(me[We].isChild)me[We].code===be.code?me[We]=Ee()(Ee()({},me[We]),be):(pe==null?void 0:pe.code)===(Le==null?void 0:Le.code)&&!pe.multiple&&(me[We]=Ee()(Ee()({},me[We]),{},{checked:!1}));else if((Nt=me[We])!==null&&Nt!==void 0&&Nt.children&&(!((dt=me[We])===null||dt===void 0||(dt=dt.children)===null||dt===void 0)&&dt.length)){var gn;me[We].children=se((gn=me[We])===null||gn===void 0?void 0:gn.children,be,pe,me[We])}je.push(me[We])}return je},he=Y(T,O,Q,{});he.forEach(function(se){var me;O!=null&&(me=O.code)!==null&&me!==void 0&&me.includes("category")&&!(O!=null&&O.checked)&&(se.code.includes("type")||se.code.includes("workSpecialty")||se.code.includes("workExperience")||se.code.includes("resume")||se.code.includes("classification"))&&(se.children=[])}),U.current=he,w==null||w(Se(he)),C(he)},fn=(0,le.useCallback)(function(de){var O=JSON.parse(JSON.stringify(de));return(O.code.includes("type")||O.code.includes("classification")||O.code.includes("workSpecialty")||O.code.includes("workExperience")||O.code.includes("resume"))&&(O.children=[]),O},[]),Hn=function(){var O=nt(T,!0).map(function(Q){return fn(Q)});C(O),w==null||w(Se(O)),U.current=JSON.parse(JSON.stringify(O))},vn=function(O){var Q=function he(se,me){var be=[];if(se&&se.length>0)for(var pe in se){var Le;if(se[pe].isChild&&se[pe].code===me.code&&(se[pe]=Ee()(Ee()({},se[pe]),{},{checked:!1})),se[pe].children&&(!((Le=se[pe])===null||Le===void 0||(Le=Le.children)===null||Le===void 0)&&Le.length)){var je;se[pe].children=he((je=se[pe])===null||je===void 0?void 0:je.children,me)}be.push(se[pe])}return be},Y=Q(T,O).map(function(he){return O.code.includes("category")?fn(he):he});C(Y),w==null||w(Se(Y)),U.current=JSON.parse(JSON.stringify(Y))},ze=(0,le.useMemo)(function(){var de=function O(Q){var Y=0;if(Q&&Q.length>0)for(var he in Q){var se;if(Q[he].isChild)Q[he].checked&&(Y+=1);else if(Q[he].children&&(!((se=Q[he])===null||se===void 0||(se=se.children)===null||se===void 0)&&se.length)){var me=O(Q[he].children);me>0&&(Y+=1)}}return Y};return de(T)||0},[T]),He=(0,le.useMemo)(function(){return Se(T)},[T]);return(0,le.useEffect)(function(){var de=nt(y,!0);return C(de),U.current=de,window.removeEventListener("resize",it),window.addEventListener("resize",it),function(){p.current=[],I.current=!1,window.removeEventListener("resize",it)}},[]),(0,le.useEffect)(function(){T&&T.length>0&&(St(),Ci())},[T]),(0,N.jsx)("div",{className:"lango-filter",children:(0,N.jsxs)("div",{className:"tal-search-filter-container",children:[(0,N.jsxs)("div",{className:"tal-search-filter-wrap",ref:B,children:[(0,N.jsx)("div",{className:"tal-search-filter-tag",children:(0,N.jsx)(R,{size:"small",count:ze,children:(0,N.jsx)("span",{className:"tal-search-filter-tag_text",children:"\u6807\u7B7E"})})}),(0,N.jsx)("div",{className:"tal-search-filter-content",children:T.map(function(de){var O;return de.children&&!!(!(de==null||(O=de.children)===null||O===void 0)&&O.length)&&(0,N.jsx)(ae,{rowData:de,callback:Mt})})})]}),Pe&&(0,N.jsx)("div",{className:"tal-search-filter-line"}),Pe&&(0,N.jsxs)("div",{className:"tal-search-filter-conditions",children:[(0,N.jsx)("div",{className:"tal-search-filter-conditions_label",children:(0,N.jsx)("span",{children:"\u5DF2\u9009\u6807\u7B7E"})}),(0,N.jsx)("div",{className:"tal-search-filter-conditions_selected",children:(He==null?void 0:He.length)>0&&(He==null?void 0:He.map(function(de){return(0,N.jsx)(ve,{data:de,delCallback:vn})}))}),(He==null?void 0:He.length)>0&&(0,N.jsx)("div",{className:"tal-search-filter-condition_btn",children:(0,N.jsx)("span",{onClick:Hn,children:"\u6E05\u7A7A\u6761\u4EF6"})})]})]})})},Ft=Ct,wi=Ft,kt=function(){function ue(b){var y=this;Ot()(this,ue),fe()(this,"_token",""),fe()(this,"_containerId",""),fe()(this,"_center",[121.48,31.22]),fe()(this,"_zoom",14),fe()(this,"_mapController",void 0),fe()(this,"_scriptDom",null),fe()(this,"_overLayConlections",{}),fe()(this,"_onMapClick",void 0),fe()(this,"_onDrawCallback",void 0),this._token=b.tk,this._containerId=b.containerId,this._center=b.center,this._zoom=b.zoom,this._onMapClick=b.onMapClick,this._onDrawCallback=b.onDrawCallback,this._insertScript(function(c){var w;y._scriptDom=c,c&&(w=window)!==null&&w!==void 0&&w.T&&y._initMap(b.onLoad,b.onLoadError)})}return zt()(ue,[{key:"_insertScript",value:function(y){var c=document.createElement("script");c.src="http://api.tianditu.gov.cn/api?v=4.0&tk=".concat(this._token),c.type="text/javascript",c.async=!0,c.readyState?c.onreadystatechange=function(){(c.readyState==="loaded"||c.readyState==="complete")&&(c.onreadystatechange=null,y(c))}:c.onload=function(){c.onload=null,y(c)},document.body.appendChild(c)}},{key:"_initMap",value:function(y,c){var w=new window.T.Map(this._containerId,{center:new window.T.LngLat(this._center[0],this._center[1]),zoom:this._zoom});w?(this._mapController=w,y==null||y()):c==null||c({code:-1,msg:"\u521D\u59CB\u5316\u5931\u8D25\uFF01"})}},{key:"drawPoint",value:function(y,c,w){var P,E=this,T=window.T,C="";c!=null&&c.icon&&(C=new T.Icon({iconUrl:c.icon,iconSize:new T.Point(c.size||40,c.size||40)}));var B={icon:C||"",title:c!=null&&c.showTitle?c.title:"",zIndexOffset:(c==null?void 0:c.zIndex)||0,opacity:(c==null?void 0:c.opacity)||1},p=new T.Marker(y,B);(P=this._overLayConlections)!==null&&P!==void 0&&P[c.overlayName]?this._overLayConlections[c.overlayName].push(p):this._overLayConlections[c.overlayName]=[p],c!=null&&c.hover&&(p.addEventListener("mouseover",function(){var I=new T.InfoWindow(c.tip,{offset:new T.Point(0,6)});p==null||p.openInfoWindow(I)}),p.addEventListener("mouseout",function(){p==null||p.closeInfoWindow()})),p.addEventListener("click",function(){var I;if(c!=null&&c.showPopup){var U=E._overLayConlections[c.overlayName]||[];U.forEach(function(Ce){Ce==null||Ce.closeInfoWindow()});var ce=new T.InfoWindow(c.tip,{offset:new T.Point(0,6)});p==null||p.openInfoWindow(ce)}(I=E._onMapClick)===null||I===void 0||I.call(E,{node:p,name:c.overlayName,dataset:c.dataset,type:"point"})}),p&&(this._mapController.addOverLay(p),w==null||w(p))}},{key:"drawLabel",value:function(y,c,w){var P,E=this,T=window.T,C=-47-(c.text.length-4>0?(c.text.length-4)*6:0),B=[C,-46],p=new T.Label(c.text,c.offset?c.offset:B,new T.LngLat(y[0],y[1]));c.font&&p.setFontSize(c.font*72/96),c.fillColor&&p.setFontColor(c.fillColor),c.backgroundColor&&(p.setBackgroundColor(c.backgroundColor),p.setBorderColor(c.backgroundColor)),(P=this._overLayConlections)!==null&&P!==void 0&&P[c.overlayName]?this._overLayConlections[c.overlayName].push(p):this._overLayConlections[c.overlayName]=[p];var I=null;c!=null&&c.hover&&(p.addEventListener("mouseover",function(){var U;I=new T.InfoWindow,I.setLngLat(new T.LngLat(y[0],y[1])),I.setContent(c.tip),I.setOffset(new T.Point(0,6)),(U=E._mapController)===null||U===void 0||U.addOverLay(I)}),p.addEventListener("mouseout",function(){if(I){var U;(U=E._mapController)===null||U===void 0||U.removeOverLay(I)}})),p.addEventListener("click",function(){var U;if(I){var ce;(ce=E._mapController)===null||ce===void 0||ce.removeOverLay(I)}(U=E._onMapClick)===null||U===void 0||U.call(E,{node:p,name:c.overlayName,dataset:c.dataset,type:"label"})}),p&&(this._mapController.addOverLay(p),w==null||w(p))}},{key:"drawPolygon",value:function(y,c,w){var P,E,T=this,C=window.T,B=y.map(function(I){return new C.LngLat(I[0],I[1])}),p=(P=this._mapController)===null||P===void 0?void 0:P.Polygon(B,c);(E=this._overLayConlections)!==null&&E!==void 0&&E[c.overlayName]?this._overLayConlections[c.overlayName].push(p):this._overLayConlections[c.overlayName]=[p],c!=null&&c.hover&&(p.addEventListener("mouseover",function(){var I=new C.InfoWindow(c.tip,{offset:new C.Point(0,6)});p==null||p.openInfoWindow(I)}),p.addEventListener("mouseout",function(){p==null||p.closeInfoWindow()})),p.addEventListener("click",function(){var I;(I=T._onMapClick)===null||I===void 0||I.call(T,{node:p,name:c.overlayName,dataset:c.dataset,type:"area"})}),p&&(this._mapController.addOverLay(p),w==null||w(p))}},{key:"drawPolyline",value:function(y,c,w){var P,E,T=this,C=window.T,B=y.map(function(I){return new C.LngLat(I[0],I[1])}),p=(P=this._mapController)===null||P===void 0?void 0:P.Polyline(B,c);(E=this._overLayConlections)!==null&&E!==void 0&&E[c.overlayName]?this._overLayConlections[c.overlayName].push(p):this._overLayConlections[c.overlayName]=[p],c!=null&&c.hover&&(p.addEventListener("mouseover",function(){var I=new C.InfoWindow(c.tip,{offset:new C.Point(0,6)});p==null||p.openInfoWindow(I)}),p.addEventListener("mouseout",function(){p==null||p.closeInfoWindow()})),p.addEventListener("click",function(){var I;(I=T._onMapClick)===null||I===void 0||I.call(T,{node:p,name:c.overlayName,dataset:c.dataset,type:"polyline"})}),p&&(this._mapController.addOverLay(p),w==null||w(p))}},{key:"drawCircle",value:function(y,c,w,P){var E,T,C=this,B=window.T,p=new B.LngLat(y[0],y[1]),I=(E=this._mapController)===null||E===void 0?void 0:E.Circle(p,c,w);(T=this._overLayConlections)!==null&&T!==void 0&&T[w.overlayName]?this._overLayConlections[w.overlayName].push(I):this._overLayConlections[w.overlayName]=[I],w!=null&&w.hover&&(I.addEventListener("mouseover",function(){var U=new B.InfoWindow(w.tip,{offset:new B.Point(0,6)});I==null||I.openInfoWindow(U)}),I.addEventListener("mouseout",function(){I==null||I.closeInfoWindow()})),I.addEventListener("click",function(){var U;(U=C._onMapClick)===null||U===void 0||U.call(C,{node:I,name:w.overlayName,dataset:w.dataset,type:"circle"})}),I&&(this._mapController.addOverLay(I),P==null||P(I))}},{key:"drawRectangle",value:function(y,c,w){var P,E,T=this,C=window.T,B=new C.LngLatBounds(new C.LngLat(y.sw[0],y.sw[1]),new C.LngLat(y.ne[0],y.ne[1])),p=(P=this._mapController)===null||P===void 0?void 0:P.Rectangle(B,c);(E=this._overLayConlections)!==null&&E!==void 0&&E[c.overlayName]?this._overLayConlections[c.overlayName].push(p):this._overLayConlections[c.overlayName]=[p],c!=null&&c.hover&&(p.addEventListener("mouseover",function(){var I=new C.InfoWindow(c.tip,{offset:new C.Point(0,6)});p==null||p.openInfoWindow(I)}),p.addEventListener("mouseout",function(){p==null||p.closeInfoWindow()})),p.addEventListener("click",function(){var I;(I=T._onMapClick)===null||I===void 0||I.call(T,{node:p,name:c.overlayName,dataset:c.dataset,type:"rectangle"})}),p&&(this._mapController.addOverLay(p),w==null||w(p))}},{key:"drawMarkerTool",value:function(y,c){var w=this,P=window.T,E="";y!=null&&y.icon&&(E=new P.Icon({iconUrl:y.icon,iconSize:new P.Size(y.size,y.size)}));var T=new P.MarkTool(this._mapController,E&&{icon:E});T.addEventListener("mouseup",function(C){var B,p=C.target,I=C.currentLnglat,U=C.currentMarker,ce=C.allMarkers;(B=w._onDrawCallback)===null||B===void 0||B.call(w,{type:"markerTool",target:p,currentLnglat:I,currentMarker:U,allMarkers:ce})}),T.open(),T&&(c==null||c(T))}},{key:"drawPolygonTool",value:function(y,c){var w=this,P=window.T,E=new P.PolygonTool(this._mapController,y);E.addEventListener("draw",function(T){var C,B=T.target,p=T.currentLnglats,I=T.currentArea,U=T.currentPolygon,ce=T.allPolygons;(C=w._onDrawCallback)===null||C===void 0||C.call(w,{type:"polygonTool",target:B,currentLnglats:p,currentArea:I,currentPolygon:U,allPolygons:ce})}),E.open(),E&&(c==null||c(E))}},{key:"drawPolylineTool",value:function(y,c){var w=this,P=window.T,E=new P.PolylineTool(this._mapController,y);E.addEventListener("draw",function(T){var C,B=T.target,p=T.currentLnglats,I=T.currentDistance,U=T.currentPolyline,ce=T.allPolylines;(C=w._onDrawCallback)===null||C===void 0||C.call(w,{type:"polylineTool",target:B,currentLnglats:p,currentDistance:I,currentPolyline:U,allPolylines:ce})}),E.open(),E&&(c==null||c(E))}},{key:"drawCircleTool",value:function(y,c){var w=this,P=window.T,E=new P.CircleTool(this._mapController,y);E.addEventListener("drawend",function(T){var C,B=T.target,p=T.currentCenter,I=T.currentRadius,U=T.currentCircle,ce=T.allCircles;(C=w._onDrawCallback)===null||C===void 0||C.call(w,{type:"circleTool",target:B,currentCenter:p,currentRadius:I,currentCircle:U,allCircles:ce})}),E.open(),E&&(c==null||c(E))}},{key:"drawRectangleTool",value:function(y,c){var w=this,P=window.T,E=new P.RectangleTool(this._mapController,y);E.addEventListener("draw",function(T){var C,B=T.target,p=T.currentBounds,I=T.currentRectangle,U=T.allRectangles;(C=w._onDrawCallback)===null||C===void 0||C.call(w,{type:"rectangleTool",target:B,currentBounds:p,currentRectangle:I,allRectangles:U})}),E.open(),E&&(c==null||c(E))}},{key:"clearLayer",value:function(y){var c=this;if(y){var w=this._overLayConlections[y]||[];w.forEach(function(E){var T;(T=c._mapController)===null||T===void 0||T.removeOverLay(E)})}else{var P;(P=this._mapController)===null||P===void 0||P.clearOverLays()}}},{key:"getMapController",value:function(){return{T:window.T,map:this._mapController}}},{key:"setCenter",value:function(y){this._mapController&&this._mapController.setCenter(new window.T.LngLat(y[0],y[1]))}},{key:"setZoom",value:function(y){this._mapController&&this._mapController.setZoom(y)}},{key:"flyTo",value:function(y,c){this._mapController&&this._mapController.panTo(new window.T.LngLat(y[0],y[1]),c||14)}},{key:"destroy",value:function(){this._scriptDom&&document.body.removeChild(this._scriptDom),this._mapController=null}}]),ue}(),_e=kt,Te=function(b){var y=b.center,c=b.zoom,w=b.token,P=b.onLoad,E=b.onLoadError,T=b.onMapClick,C=b.onMapDraw;return(0,le.useEffect)(function(){var B=new _e({center:y,onLoad:function(){console.log("\u5730\u56FE\u521D\u59CB\u5316\u5B8C\u6210",B),P(B)},onLoadError:function(I){console.log("onLoadError",I),E==null||E(I)},onMapClick:function(I){console.log("\u{1F680} ~ \u5730\u56FE\u70B9\u51FB ->",I),T==null||T(I)},onDrawCallback:function(I){console.log("\u{1F680} ~ \u7ED8\u5236\u89E6\u53D1 ->",I),C==null||C(I)},tk:w,zoom:c||14,containerId:"langoMap"})},[]),(0,N.jsx)("div",{className:"lango-map",children:(0,N.jsx)("div",{id:"langoMap"})})},Ma=Te,Na=Ma,bi=oe(50009),Aa=oe(25098),So=oe.n(Aa),Ua=oe(31996),ja=oe.n(Ua),Ja=oe(26037),Ha=oe.n(Ja),Po=oe(73935),Va=bi.Z.getComponent("button"),Ga=function(ue){ja()(y,ue);var b=Ha()(y);function y(c,w){var P;return Ot()(this,y),P=b.call(this,c,w),fe()(So()(P),"_options",null),P.player=c,P._options=w,P.mountReactComponent=P.mountReactComponent.bind(So()(P)),c.ready(function(){return P.mountReactComponent()}),P.on("dispose",function(){return Po.unmountComponentAtNode(P.el())}),P}return zt()(y,[{key:"mountReactComponent",value:function(){Po.render(this._options.children,this.el())}}]),y}(Va),Za=Ga,xl=oe(49740),Ka=function(b){var y=b.url,c=b.poster,w=b.type,P=w===void 0?"mp4":w,E=b.className,T=b.isControl,C=T===void 0?!0:T,B=b.vOption,p=b.vControlbar,I=b.children,U=b.onLoad,ce=b.onLoadError,Ce=(0,le.useRef)(null),Pe=(0,le.useRef)(null);bi.Z.registerComponent("LangoComponent",Za);var De=(0,le.useMemo)(function(){var Oe,Ke,Je,Se,nt,it,Ie,St={controls:!0,autoplay:!1,loop:!1,muted:!0,fluid:!0,width:"100%",height:"100%",poster:c,playbackRates:p!=null&&p.playbackRateMenuButton?[.5,1,1.5,2,2.5]:[],controlBar:{playToggle:(Oe=p==null?void 0:p.playToggle)!==null&&Oe!==void 0?Oe:!0,durationDisplay:(Ke=p==null?void 0:p.durationDisplay)!==null&&Ke!==void 0?Ke:!0,remainingTimeDisplay:(Je=p==null?void 0:p.remainingTimeDisplay)!==null&&Je!==void 0?Je:!0,progressControl:(Se=p==null?void 0:p.progressControl)!==null&&Se!==void 0?Se:!0,volumePanel:(nt=p==null?void 0:p.volumePanel)!==null&&nt!==void 0?nt:!0,playbackRateMenuButton:(it=p==null?void 0:p.playbackRateMenuButton)!==null&&it!==void 0?it:!0,fullscreenToggle:(Ie=p==null?void 0:p.fullscreenToggle)!==null&&Ie!==void 0?Ie:!0,children:[{name:"playToggle"},{name:"currentTimeDisplay"},{name:"progressControl"},{name:"durationDisplay"},{name:"playbackRateMenuButton",playbackRates:[.5,1,1.5,2,2.5]},{name:"volumePanel",inline:!1},{name:"fullscreenToggle"}]},sources:[{src:y,type:P==="hls"?"application/x-mpegURL":"video/mp4"}],language:"zh-CN"};return Ee()(Ee()({},St),B)},[y,P]),_t=(0,le.useMemo)(function(){return E?C?["lango-video-component",E].join(" "):["lango-video-component",E,"lango-video-component-without-controlbar"].join(" "):"lango-video-component"},[E,C]);return(0,le.useEffect)(function(){if(Ce.current&&Pe.current)Pe.current.src(y),Pe.current.load(),Pe.current.play();else{var Oe=Pe.current=(0,bi.Z)(Ce.current,De,function(){console.log("player is ready!"),U&&(U==null||U(Oe))});if(Oe.on("error",function(Se){console.log("player error",Se),ce&&(ce==null||ce(Se))}),Oe)if(C){var Ke=Oe.getChild("ControlBar").addChild("LangoComponent",{children:I,isControl:C});Ke.addClass(_t)}else{var Je=Oe.addChild("LangoComponent",{children:I,isControl:C});Je.addClass(_t)}}},[De,Ce.current]),(0,le.useEffect)(function(){return function(){Pe.current&&(Pe.current.pause(),Pe.current.dispose(),Pe.current=null)}},[]),(0,N.jsx)("div",{className:"lango-video",children:(0,N.jsx)("video",{ref:Ce,className:ct()("video-js","vjs-big-play-centered","vjs-fluid","lango-video-box",(p==null?void 0:p.currentTimeDisplay)&&"video-curent-time"),children:(0,N.jsxs)("p",{className:"vjs-no-js",children:["To view this video please enable JavaScript, and consider upgrading to a web browser that",(0,N.jsx)("a",{href:"https://videojs.com/html5-video-support/",target:"_blank",children:"supports HTML5 video"})]})})})},Xa=Ka,Ya=Xa},25893:function(){}}]);
